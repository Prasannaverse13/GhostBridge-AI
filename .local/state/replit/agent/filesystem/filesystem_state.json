{"file_contents":{"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { generateGeminiResponse } from \"./gemini\";\nimport { fetchAllBalances } from \"./balance-service\";\nimport { bridgeService, type BridgeQuote, type BridgeExecution } from \"./bridge-service\";\nimport { chatRequestSchema, chainSchema, type BridgePlan, type ChatMessage } from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\nimport { z } from \"zod\";\n\nconst bridgeQuoteRequestSchema = z.object({\n  sourceChain: chainSchema,\n  targetChain: chainSchema,\n  amount: z.string().refine((val) => {\n    const num = parseFloat(val);\n    return !isNaN(num) && num > 0;\n  }, \"Amount must be a positive number\"),\n  isShielded: z.boolean().optional().default(true),\n  preferredProtocol: z.enum([\"wormhole\", \"near_intents\", \"polygon_bridge\", \"multichain\", \"avalanche_bridge\", \"starknet_bridge\", \"mina_bridge\"]).optional(),\n  slippageTolerance: z.number().min(0).max(50).optional(),\n});\n\nconst bridgeExecuteRequestSchema = z.object({\n  quote: z.object({\n    id: z.string(),\n    protocol: z.string(),\n    sourceChain: chainSchema,\n    targetChain: chainSchema,\n    sourceToken: z.string(),\n    targetToken: z.string(),\n    inputAmount: z.string(),\n    outputAmount: z.string(),\n    fees: z.object({\n      bridgeFee: z.string(),\n      gasFee: z.string(),\n      protocolFee: z.string(),\n      totalFee: z.string(),\n      totalFeeUsd: z.string(),\n    }),\n    estimatedTime: z.number(),\n    slippageTolerance: z.number(),\n    route: z.array(z.object({\n      step: z.number(),\n      protocol: z.string(),\n      action: z.string(),\n      chain: z.string(),\n      description: z.string(),\n      estimatedDuration: z.number(),\n    })),\n    isShielded: z.boolean(),\n    expiresAt: z.string(),\n    securityLevel: z.enum([\"standard\", \"enhanced\", \"maximum\"]),\n  }),\n  signerAddress: z.string().min(1, \"Signer address is required\"),\n});\n\nfunction generateBridgePlan(extracted: {\n  sourceChain: string;\n  targetChain: string;\n  amount: string;\n  protocol: string;\n  isShielded: boolean;\n  estimatedTime: string;\n}): BridgePlan {\n  const feeMultipliers: Record<string, number> = {\n    ethereum: 0.003,\n    near: 0.001,\n    polygon: 0.0005,\n    binance: 0.001,\n    avalanche: 0.002,\n  };\n\n  const amount = parseFloat(extracted.amount);\n  const multiplier = feeMultipliers[extracted.targetChain] || 0.002;\n  const gasFee = (amount * multiplier).toFixed(6);\n  const bridgeFee = (amount * 0.001).toFixed(6);\n  const totalFee = (parseFloat(gasFee) + parseFloat(bridgeFee)).toFixed(6);\n  const totalUsd = `$${(parseFloat(totalFee) * 35).toFixed(2)}`;\n\n  return {\n    id: randomUUID(),\n    sourceChain: extracted.sourceChain as any,\n    targetChain: extracted.targetChain as any,\n    amount: extracted.amount,\n    protocol: extracted.protocol,\n    estimatedFees: {\n      gas: `${gasFee} ZEC`,\n      bridge: `${bridgeFee} ZEC`,\n      total: `${totalFee} ZEC`,\n      totalUsd,\n    },\n    steps: [\n      {\n        step: 1,\n        title: \"Prepare Shielded Transaction\",\n        description: \"Creating shielded output using Sapling pool\",\n        status: \"pending\",\n      },\n      {\n        step: 2,\n        title: \"Lock ZEC on Zcash\",\n        description: \"Locking funds in the bridge contract\",\n        status: \"pending\",\n      },\n      {\n        step: 3,\n        title: \"Generate Bridge Proof\",\n        description: \"Creating zero-knowledge proof for cross-chain verification\",\n        status: \"pending\",\n      },\n      {\n        step: 4,\n        title: `Mint wZEC on ${extracted.targetChain.charAt(0).toUpperCase() + extracted.targetChain.slice(1)}`,\n        description: \"Minting wrapped ZEC on target chain\",\n        status: \"pending\",\n      },\n    ],\n    isShielded: extracted.isShielded,\n    estimatedTime: extracted.estimatedTime,\n  };\n}\n\nexport async function registerRoutes(\n  httpServer: Server,\n  app: Express\n): Promise<Server> {\n  app.post(\"/api/chat\", async (req, res) => {\n    try {\n      const parseResult = chatRequestSchema.safeParse(req.body);\n      \n      if (!parseResult.success) {\n        return res.status(400).json({ \n          error: \"Invalid request\", \n          details: parseResult.error.issues \n        });\n      }\n\n      const { message, workflow, conversationHistory = [] } = parseResult.data;\n      \n      const sessionId = req.headers[\"x-session-id\"] as string || \"default\";\n      const walletAddress = req.headers[\"x-wallet-address\"] as string | undefined;\n      const walletChain = req.headers[\"x-wallet-chain\"] as string | undefined;\n\n      const context = { \n        walletAddress, \n        walletChain, \n        workflow: workflow || \"ghostbridge\" as const \n      };\n      const geminiResult = await generateGeminiResponse(message, conversationHistory, context);\n\n      let bridgePlan: BridgePlan | undefined;\n      if (geminiResult.bridgePlan) {\n        bridgePlan = generateBridgePlan(geminiResult.bridgePlan);\n        await storage.setActiveBridgePlan(sessionId, bridgePlan);\n      }\n\n      const aiMessage: ChatMessage = {\n        id: randomUUID(),\n        role: \"assistant\",\n        content: geminiResult.content,\n        timestamp: new Date().toISOString(),\n        bridgePlan,\n      };\n\n      await storage.addChatMessage(sessionId, {\n        role: \"user\",\n        content: message,\n      });\n      await storage.addChatMessage(sessionId, {\n        role: \"assistant\",\n        content: geminiResult.content,\n        bridgePlan,\n      });\n\n      res.json({\n        message: aiMessage,\n        bridgePlan,\n        functionCall: geminiResult.functionCall,\n      });\n    } catch (error) {\n      console.error(\"Chat error:\", error);\n      res.status(500).json({ \n        error: \"Failed to process chat message\",\n        message: error instanceof Error ? error.message : \"Unknown error\"\n      });\n    }\n  });\n\n  app.get(\"/api/chat/history\", async (req, res) => {\n    try {\n      const sessionId = req.headers[\"x-session-id\"] as string || \"default\";\n      const messages = await storage.getChatMessages(sessionId);\n      res.json({ messages });\n    } catch (error) {\n      console.error(\"History error:\", error);\n      res.status(500).json({ error: \"Failed to get chat history\" });\n    }\n  });\n\n  app.delete(\"/api/chat/history\", async (req, res) => {\n    try {\n      const sessionId = req.headers[\"x-session-id\"] as string || \"default\";\n      await storage.clearChatMessages(sessionId);\n      await storage.clearActiveBridgePlan(sessionId);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Clear history error:\", error);\n      res.status(500).json({ error: \"Failed to clear chat history\" });\n    }\n  });\n\n  app.get(\"/api/bridge/plan\", async (req, res) => {\n    try {\n      const sessionId = req.headers[\"x-session-id\"] as string || \"default\";\n      const plan = await storage.getActiveBridgePlan(sessionId);\n      res.json({ plan });\n    } catch (error) {\n      console.error(\"Get plan error:\", error);\n      res.status(500).json({ error: \"Failed to get bridge plan\" });\n    }\n  });\n\n  app.get(\"/api/health\", (req, res) => {\n    const hasAiIntegrations = !!(process.env.AI_INTEGRATIONS_GEMINI_API_KEY && process.env.AI_INTEGRATIONS_GEMINI_BASE_URL);\n    const hasApiKey = !!(process.env.GOOGLE_API_KEY || process.env.GEMINI_API_KEY);\n    res.json({ \n      status: \"ok\", \n      service: \"GhostBridge AI\",\n      geminiConfigured: hasAiIntegrations || hasApiKey,\n      usingAiIntegrations: hasAiIntegrations,\n      timestamp: new Date().toISOString()\n    });\n  });\n\n  app.get(\"/api/chat/history/:sessionId\", async (req, res) => {\n    try {\n      const { sessionId } = req.params;\n      const messages = await storage.getChatMessages(sessionId);\n      res.json({ messages });\n    } catch (error) {\n      console.error(\"Error fetching chat history:\", error);\n      res.status(500).json({ error: \"Failed to fetch chat history\" });\n    }\n  });\n\n  app.delete(\"/api/chat/history/:sessionId\", async (req, res) => {\n    try {\n      const { sessionId } = req.params;\n      await storage.clearChatMessages(sessionId);\n      res.json({ success: true, message: \"Chat history cleared\" });\n    } catch (error) {\n      console.error(\"Error clearing chat history:\", error);\n      res.status(500).json({ error: \"Failed to clear chat history\" });\n    }\n  });\n\n  app.get(\"/api/transactions\", (req, res) => {\n    res.json({ transactions: [] });\n  });\n\n  app.post(\"/api/bridge/simulate\", async (req, res) => {\n    try {\n      const { sourceChain, targetChain, amount } = req.body;\n\n      if (!sourceChain || !targetChain || !amount) {\n        return res.status(400).json({ \n          error: \"Missing required fields: sourceChain, targetChain, amount\" \n        });\n      }\n\n      const feeMultipliers: Record<string, number> = {\n        ethereum: 0.003,\n        near: 0.001,\n        polygon: 0.0005,\n        binance: 0.001,\n        avalanche: 0.002,\n      };\n\n      const protocols: Record<string, string> = {\n        ethereum: \"Wormhole\",\n        near: \"NEAR Intents\",\n        polygon: \"Polygon Bridge\",\n        binance: \"Multichain\",\n        avalanche: \"Avalanche Bridge\"\n      };\n\n      const times: Record<string, string> = {\n        ethereum: \"~15 minutes\",\n        near: \"~5 minutes\",\n        polygon: \"~10 minutes\",\n        binance: \"~12 minutes\",\n        avalanche: \"~8 minutes\"\n      };\n\n      const parsedAmount = parseFloat(amount);\n      const multiplier = feeMultipliers[targetChain] || 0.002;\n      const gasFee = (parsedAmount * multiplier).toFixed(6);\n      const bridgeFee = (parsedAmount * 0.001).toFixed(6);\n      const totalFee = (parseFloat(gasFee) + parseFloat(bridgeFee)).toFixed(6);\n\n      const simulation = {\n        sourceChain,\n        targetChain,\n        amount: amount.toString(),\n        protocol: protocols[targetChain] || \"GhostBridge Protocol\",\n        estimatedFees: {\n          gas: `${gasFee} ZEC`,\n          bridge: `${bridgeFee} ZEC`,\n          total: `${totalFee} ZEC`,\n          totalUsd: `$${(parseFloat(totalFee) * 35).toFixed(2)}`,\n        },\n        estimatedTime: times[targetChain] || \"~10 minutes\",\n        isShielded: true,\n        networkStatus: \"healthy\",\n        liquidityAvailable: true,\n      };\n\n      res.json({ simulation });\n    } catch (error) {\n      console.error(\"Bridge simulation error:\", error);\n      res.status(500).json({ error: \"Failed to simulate bridge transaction\" });\n    }\n  });\n\n  app.get(\"/api/balances\", async (req, res) => {\n    try {\n      const { zcash, near, ethereum, polygon } = req.query;\n      \n      const addresses = {\n        zcash: zcash as string | undefined,\n        near: near as string | undefined,\n        ethereum: ethereum as string | undefined,\n        polygon: polygon as string | undefined,\n      };\n      \n      const hasAddresses = Object.values(addresses).some(Boolean);\n      \n      if (!hasAddresses) {\n        return res.json({\n          balances: [],\n          totalUsdValue: \"$0.00\",\n        });\n      }\n      \n      const balances = await fetchAllBalances(addresses);\n      res.json(balances);\n    } catch (error) {\n      console.error(\"Error fetching balances:\", error);\n      res.status(500).json({ error: \"Failed to fetch balances\" });\n    }\n  });\n\n  app.get(\"/api/prices\", async (req, res) => {\n    try {\n      const prices = {\n        ZEC: { usd: 35.0, change24h: 2.5 },\n        NEAR: { usd: 5.5, change24h: -1.2 },\n        ETH: { usd: 3500.0, change24h: 1.8 },\n        MATIC: { usd: 0.85, change24h: 0.5 },\n        BNB: { usd: 580.0, change24h: 0.8 },\n        AVAX: { usd: 35.0, change24h: 3.2 },\n      };\n      res.json({ prices, lastUpdated: new Date().toISOString() });\n    } catch (error) {\n      console.error(\"Error fetching prices:\", error);\n      res.status(500).json({ error: \"Failed to fetch prices\" });\n    }\n  });\n\n  app.post(\"/api/bridge/quote\", async (req, res) => {\n    try {\n      const parseResult = bridgeQuoteRequestSchema.safeParse(req.body);\n      \n      if (!parseResult.success) {\n        return res.status(400).json({ \n          error: \"Invalid request\",\n          details: parseResult.error.issues \n        });\n      }\n\n      const { sourceChain, targetChain, amount, isShielded, preferredProtocol, slippageTolerance } = parseResult.data;\n\n      const quote = await bridgeService.getQuote({\n        sourceChain,\n        targetChain,\n        amount,\n        isShielded,\n        preferredProtocol,\n        slippageTolerance,\n      });\n\n      res.json({ quote });\n    } catch (error) {\n      console.error(\"Bridge quote error:\", error);\n      const message = error instanceof Error ? error.message : \"Unknown error\";\n      const isValidationError = \n        message.includes(\"not currently supported\") || \n        message.includes(\"No compatible\") ||\n        message.includes(\"does not support\");\n      res.status(isValidationError ? 400 : 500).json({ \n        error: isValidationError ? \"Unsupported bridge route\" : \"Failed to get bridge quote\",\n        message\n      });\n    }\n  });\n\n  app.post(\"/api/bridge/quotes\", async (req, res) => {\n    try {\n      const parseResult = bridgeQuoteRequestSchema.omit({ preferredProtocol: true, slippageTolerance: true }).safeParse(req.body);\n      \n      if (!parseResult.success) {\n        return res.status(400).json({ \n          error: \"Invalid request\",\n          details: parseResult.error.issues \n        });\n      }\n\n      const { sourceChain, targetChain, amount, isShielded } = parseResult.data;\n\n      const quotes = await bridgeService.getMultipleQuotes({\n        sourceChain,\n        targetChain,\n        amount,\n        isShielded,\n      });\n\n      res.json({ quotes, count: quotes.length });\n    } catch (error) {\n      console.error(\"Bridge quotes error:\", error);\n      const message = error instanceof Error ? error.message : \"Unknown error\";\n      const isValidationError = \n        message.includes(\"not currently supported\") || \n        message.includes(\"No compatible\") ||\n        message.includes(\"does not support\");\n      res.status(isValidationError ? 400 : 500).json({ \n        error: isValidationError ? \"Unsupported bridge route\" : \"Failed to get bridge quotes\",\n        message\n      });\n    }\n  });\n\n  app.post(\"/api/bridge/execute\", async (req, res) => {\n    try {\n      const parseResult = bridgeExecuteRequestSchema.safeParse(req.body);\n      \n      if (!parseResult.success) {\n        return res.status(400).json({ \n          error: \"Invalid request\",\n          details: parseResult.error.issues \n        });\n      }\n\n      const { quote, signerAddress } = parseResult.data;\n\n      const execution = await bridgeService.executeQuote(quote as BridgeQuote, signerAddress);\n      res.json({ execution });\n    } catch (error) {\n      console.error(\"Bridge execution error:\", error);\n      res.status(500).json({ \n        error: \"Failed to execute bridge\",\n        message: error instanceof Error ? error.message : \"Unknown error\"\n      });\n    }\n  });\n\n  app.get(\"/api/bridge/execution/:executionId\", async (req, res) => {\n    try {\n      const { executionId } = req.params;\n      const execution = bridgeService.getExecutionStatus(executionId);\n\n      if (!execution) {\n        return res.status(404).json({ error: \"Execution not found\" });\n      }\n\n      res.json({ execution });\n    } catch (error) {\n      console.error(\"Get execution error:\", error);\n      res.status(500).json({ error: \"Failed to get execution status\" });\n    }\n  });\n\n  app.get(\"/api/bridge/protocols\", async (req, res) => {\n    try {\n      const protocols = bridgeService.getSupportedProtocols();\n      const chains = bridgeService.getSupportedChains();\n      res.json({ protocols, chains });\n    } catch (error) {\n      console.error(\"Get protocols error:\", error);\n      res.status(500).json({ error: \"Failed to get supported protocols\" });\n    }\n  });\n\n  app.get(\"/api/bridge/history\", async (req, res) => {\n    try {\n      const walletAddress = req.query.wallet as string;\n      const limit = parseInt(req.query.limit as string) || 10;\n\n      if (!walletAddress) {\n        return res.status(400).json({ error: \"Wallet address is required\" });\n      }\n\n      const executions = await storage.getBridgeExecutionsByWallet(walletAddress, limit);\n      res.json({ executions });\n    } catch (error) {\n      console.error(\"Get bridge history error:\", error);\n      res.status(500).json({ error: \"Failed to get bridge history\" });\n    }\n  });\n\n  return httpServer;\n}\n","path":null,"size_bytes":16381,"size_tokens":null},"client/src/lib/wallet-context.tsx":{"content":"import { createContext, useContext, useState, useCallback, useEffect, useRef, type ReactNode } from \"react\";\nimport { setupWalletSelector, type WalletSelector, type Wallet } from \"@near-wallet-selector/core\";\nimport { setupModal, type WalletSelectorModal } from \"@near-wallet-selector/modal-ui\";\nimport { setupMyNearWallet } from \"@near-wallet-selector/my-near-wallet\";\nimport type { WalletState } from \"@shared/schema\";\nimport \"@near-wallet-selector/modal-ui/styles.css\";\nimport type { Subscription } from \"rxjs\";\n\ninterface WalletContextType {\n  wallet: WalletState;\n  connect: () => Promise<void>;\n  disconnect: () => Promise<void>;\n  isConnecting: boolean;\n  signTransaction: (receiverId: string, actions: TransactionAction[]) => Promise<TransactionResult | null>;\n  signMessage: (message: string) => Promise<SignedMessage | null>;\n  getActiveWallet: () => Promise<Wallet | null>;\n  fetchBalance: () => Promise<string | null>;\n}\n\nexport interface TransactionAction {\n  type: \"FunctionCall\";\n  params: {\n    methodName: string;\n    args: Record<string, unknown>;\n    gas: string;\n    deposit: string;\n  };\n}\n\nexport interface TransactionResult {\n  transactionHash: string;\n  status: \"success\" | \"failure\";\n}\n\nexport interface SignedMessage {\n  signature: string;\n  publicKey: string;\n  accountId: string;\n}\n\nconst WalletContext = createContext<WalletContextType | undefined>(undefined);\n\nconst NETWORK = \"testnet\";\nconst CONTRACT_ID = \"guest-book.testnet\";\nconst RPC_URL = NETWORK === \"testnet\" \n  ? \"https://rpc.testnet.near.org\" \n  : \"https://rpc.mainnet.near.org\";\n\nexport function WalletProvider({ children }: { children: ReactNode }) {\n  const [wallet, setWallet] = useState<WalletState>({\n    isConnected: false,\n    network: NETWORK,\n  });\n  const [isConnecting, setIsConnecting] = useState(false);\n  const selectorRef = useRef<WalletSelector | null>(null);\n  const modalRef = useRef<WalletSelectorModal | null>(null);\n  const initializingRef = useRef(false);\n  const subscriptionRef = useRef<Subscription | null>(null);\n\n  const fetchAccountBalance = useCallback(async (accountId: string): Promise<string | null> => {\n    try {\n      const response = await fetch(RPC_URL, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          jsonrpc: \"2.0\",\n          id: \"dontcare\",\n          method: \"query\",\n          params: {\n            request_type: \"view_account\",\n            finality: \"final\",\n            account_id: accountId,\n          },\n        }),\n      });\n      \n      const data = await response.json();\n      if (data.result && data.result.amount) {\n        const yoctoNear = BigInt(data.result.amount);\n        const nearBalance = Number(yoctoNear) / 1e24;\n        return nearBalance.toFixed(4);\n      }\n      return null;\n    } catch (error) {\n      console.error(\"Error fetching balance:\", error);\n      return null;\n    }\n  }, []);\n\n  const initializeSelector = useCallback(async () => {\n    if (initializingRef.current || selectorRef.current) return;\n    \n    initializingRef.current = true;\n    \n    try {\n      const selector = await setupWalletSelector({\n        network: NETWORK,\n        modules: [\n          setupMyNearWallet(),\n        ],\n      });\n\n      selectorRef.current = selector;\n\n      modalRef.current = setupModal(selector, {\n        contractId: CONTRACT_ID,\n      });\n\n      const accounts = selector.store.getState().accounts;\n      if (accounts.length > 0) {\n        const account = accounts[0];\n        const balance = await fetchAccountBalance(account.accountId);\n        setWallet({\n          isConnected: true,\n          accountId: account.accountId,\n          balance: balance || undefined,\n          network: NETWORK,\n        });\n      }\n\n      subscriptionRef.current = selector.store.observable.subscribe(async (state) => {\n        const accounts = state.accounts;\n        if (accounts.length > 0) {\n          const account = accounts[0];\n          const balance = await fetchAccountBalance(account.accountId);\n          \n          setWallet({\n            isConnected: true,\n            accountId: account.accountId,\n            balance: balance || undefined,\n            network: NETWORK,\n          });\n        } else {\n          setWallet({\n            isConnected: false,\n            network: NETWORK,\n          });\n        }\n      });\n\n    } catch (error) {\n      console.error(\"Failed to initialize wallet selector:\", error);\n    } finally {\n      initializingRef.current = false;\n    }\n  }, [fetchAccountBalance]);\n\n  useEffect(() => {\n    initializeSelector();\n    \n    return () => {\n      if (subscriptionRef.current) {\n        subscriptionRef.current.unsubscribe();\n        subscriptionRef.current = null;\n      }\n    };\n  }, [initializeSelector]);\n\n  const connect = useCallback(async () => {\n    setIsConnecting(true);\n    try {\n      if (!selectorRef.current) {\n        await initializeSelector();\n      }\n      \n      if (modalRef.current) {\n        modalRef.current.show();\n      }\n    } catch (error) {\n      console.error(\"Failed to connect wallet:\", error);\n    } finally {\n      setTimeout(() => setIsConnecting(false), 500);\n    }\n  }, [initializeSelector]);\n\n  const disconnect = useCallback(async () => {\n    try {\n      if (selectorRef.current) {\n        const activeWallet = await selectorRef.current.wallet();\n        if (activeWallet) {\n          await activeWallet.signOut();\n        }\n      }\n      setWallet({\n        isConnected: false,\n        network: NETWORK,\n      });\n    } catch (error) {\n      console.error(\"Failed to disconnect wallet:\", error);\n    }\n  }, []);\n\n  const getActiveWallet = useCallback(async (): Promise<Wallet | null> => {\n    if (!selectorRef.current) return null;\n    try {\n      return await selectorRef.current.wallet();\n    } catch {\n      return null;\n    }\n  }, []);\n\n  const fetchBalance = useCallback(async (): Promise<string | null> => {\n    if (!wallet.accountId) return null;\n    return fetchAccountBalance(wallet.accountId);\n  }, [wallet.accountId, fetchAccountBalance]);\n\n  const signTransaction = useCallback(async (\n    receiverId: string,\n    actions: TransactionAction[]\n  ): Promise<TransactionResult | null> => {\n    if (!selectorRef.current || !wallet.isConnected) {\n      console.error(\"Wallet not connected\");\n      return null;\n    }\n\n    try {\n      const activeWallet = await selectorRef.current.wallet();\n      if (!activeWallet) {\n        console.error(\"No active wallet found\");\n        return null;\n      }\n\n      const result = await activeWallet.signAndSendTransaction({\n        receiverId,\n        actions: actions.map(action => ({\n          type: action.type,\n          params: action.params,\n        })),\n      });\n\n      if (result) {\n        return {\n          transactionHash: typeof result === 'object' && 'transaction' in result \n            ? (result.transaction as { hash: string }).hash \n            : String(result),\n          status: \"success\",\n        };\n      }\n      return null;\n    } catch (error) {\n      console.error(\"Transaction signing failed:\", error);\n      return {\n        transactionHash: \"\",\n        status: \"failure\",\n      };\n    }\n  }, [wallet.isConnected]);\n\n  const signMessage = useCallback(async (message: string): Promise<SignedMessage | null> => {\n    if (!selectorRef.current || !wallet.isConnected || !wallet.accountId) {\n      console.error(\"Wallet not connected\");\n      return null;\n    }\n\n    try {\n      const activeWallet = await selectorRef.current.wallet();\n      if (!activeWallet) {\n        console.error(\"No active wallet found\");\n        return null;\n      }\n\n      if ('signMessage' in activeWallet) {\n        const BufferClass = typeof window !== 'undefined' && window.Buffer ? window.Buffer : null;\n        if (!BufferClass) {\n          console.warn(\"Buffer not available for message signing\");\n          return null;\n        }\n        \n        const nonce = BufferClass.from(Date.now().toString());\n        const signedMessage = await (activeWallet as Wallet & { \n          signMessage: (params: { message: string; nonce: Uint8Array; recipient: string }) => Promise<{ signature: string; publicKey: string }> \n        }).signMessage({\n          message,\n          nonce,\n          recipient: CONTRACT_ID,\n        });\n\n        return {\n          signature: signedMessage.signature,\n          publicKey: signedMessage.publicKey,\n          accountId: wallet.accountId,\n        };\n      }\n\n      console.warn(\"Current wallet does not support message signing\");\n      return null;\n    } catch (error) {\n      console.error(\"Message signing failed:\", error);\n      return null;\n    }\n  }, [wallet.isConnected, wallet.accountId]);\n\n  return (\n    <WalletContext.Provider value={{ \n      wallet, \n      connect, \n      disconnect, \n      isConnecting,\n      signTransaction,\n      signMessage,\n      getActiveWallet,\n      fetchBalance,\n    }}>\n      {children}\n    </WalletContext.Provider>\n  );\n}\n\nexport function useWallet() {\n  const context = useContext(WalletContext);\n  if (!context) {\n    throw new Error(\"useWallet must be used within a WalletProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":9140,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10481,"size_tokens":null},"client/src/components/sidebar/transaction-panel.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { BalancePanel } from \"@/components/balance-panel\";\nimport type { BridgePlan, Transaction } from \"@shared/schema\";\nimport { ChainIcon, getChainName } from \"@/components/icons/chain-icons\";\nimport {\n  ArrowRight,\n  Clock,\n  Shield,\n  CheckCircle2,\n  Loader2,\n  AlertCircle,\n  ExternalLink,\n  Copy,\n  History,\n  Lock,\n  TrendingUp,\n  Zap,\n} from \"lucide-react\";\nimport { useState, useCallback } from \"react\";\nimport { format } from \"date-fns\";\nimport { useWallet } from \"@/lib/wallet-context\";\nimport { useBridgeQuote, type BridgeQuote, type BridgeExecution } from \"@/hooks/use-bridge\";\nimport { BridgeExecutionModal } from \"@/components/bridge/bridge-execution-modal\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface TransactionPanelProps {\n  currentPlan?: BridgePlan;\n  recentTransactions: Transaction[];\n}\n\nexport function TransactionPanel({ currentPlan, recentTransactions }: TransactionPanelProps) {\n  const [copied, setCopied] = useState<string | null>(null);\n  const [activeQuote, setActiveQuote] = useState<BridgeQuote | null>(null);\n  const [showExecutionModal, setShowExecutionModal] = useState(false);\n  const [isGettingQuote, setIsGettingQuote] = useState(false);\n  \n  const { wallet } = useWallet();\n  const { toast } = useToast();\n  const bridgeQuote = useBridgeQuote({\n    sourceChain: currentPlan?.sourceChain || \"zcash\",\n    targetChain: currentPlan?.targetChain || \"near\",\n    amount: currentPlan?.amount?.replace(\" ZEC\", \"\") || \"1\",\n    isShielded: currentPlan?.isShielded,\n  });\n\n  const handleCopy = async (text: string, id: string) => {\n    await navigator.clipboard.writeText(text);\n    setCopied(id);\n    setTimeout(() => setCopied(null), 2000);\n  };\n\n  const handleExecuteBridge = useCallback(async () => {\n    if (!currentPlan) return;\n    \n    setIsGettingQuote(true);\n    try {\n      const result = await bridgeQuote.mutateAsync();\n      if (result.quote) {\n        setActiveQuote(result.quote);\n        setShowExecutionModal(true);\n      }\n    } catch (error) {\n      toast({\n        title: \"Failed to get quote\",\n        description: error instanceof Error ? error.message : \"Unable to get bridge quote\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsGettingQuote(false);\n    }\n  }, [currentPlan, bridgeQuote, toast]);\n\n  const handleExecutionSuccess = useCallback((execution: BridgeExecution) => {\n    toast({\n      title: \"Bridge Complete\",\n      description: `Successfully bridged ${currentPlan?.amount} to ${currentPlan?.targetChain}`,\n    });\n    setShowExecutionModal(false);\n    setActiveQuote(null);\n  }, [currentPlan, toast]);\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case \"confirmed\":\n        return (\n          <Badge variant=\"outline\" className=\"gap-1 text-chart-2 border-chart-2/30\">\n            <CheckCircle2 className=\"h-3 w-3\" />\n            Confirmed\n          </Badge>\n        );\n      case \"processing\":\n        return (\n          <Badge variant=\"outline\" className=\"gap-1 text-primary border-primary/30\">\n            <Loader2 className=\"h-3 w-3 animate-spin\" />\n            Processing\n          </Badge>\n        );\n      case \"failed\":\n        return (\n          <Badge variant=\"outline\" className=\"gap-1 text-destructive border-destructive/30\">\n            <AlertCircle className=\"h-3 w-3\" />\n            Failed\n          </Badge>\n        );\n      default:\n        return (\n          <Badge variant=\"outline\" className=\"gap-1\">\n            <Clock className=\"h-3 w-3\" />\n            Pending\n          </Badge>\n        );\n    }\n  };\n\n  return (\n    <div className=\"h-full flex flex-col border-l border-border bg-card/50\">\n      <div className=\"p-4 border-b border-border\">\n        <h2 className=\"font-semibold flex items-center gap-2\">\n          <TrendingUp className=\"h-4 w-4 text-primary\" />\n          Transaction Details\n        </h2>\n      </div>\n\n      <ScrollArea className=\"flex-1\">\n        <div className=\"p-4 space-y-4\">\n          <BalancePanel />\n          \n          <Separator />\n          \n          {currentPlan ? (\n            <Card data-testid=\"card-current-plan\">\n              <CardHeader className=\"pb-2\">\n                <div className=\"flex items-center justify-between gap-2 flex-wrap\">\n                  <CardTitle className=\"text-sm font-medium\">Current Bridge</CardTitle>\n                  {currentPlan.isShielded && (\n                    <Badge variant=\"outline\" className=\"gap-1 text-chart-2 border-chart-2/30 text-xs\">\n                      <Lock className=\"h-2.5 w-2.5\" />\n                      Shielded\n                    </Badge>\n                  )}\n                </div>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <div className=\"flex items-center gap-2 text-sm\">\n                  <ChainIcon chain={currentPlan.sourceChain} size={20} />\n                  <span className=\"font-mono\">{currentPlan.amount}</span>\n                  <ArrowRight className=\"h-4 w-4 text-muted-foreground\" />\n                  <ChainIcon chain={currentPlan.targetChain} size={20} />\n                </div>\n\n                <div className=\"space-y-1 text-xs\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">Protocol</span>\n                    <span>{currentPlan.protocol}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">Est. Time</span>\n                    <span>{currentPlan.estimatedTime}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">Total Fee</span>\n                    <span className=\"text-primary font-medium\">\n                      {currentPlan.estimatedFees.total}\n                    </span>\n                  </div>\n                </div>\n\n                <div className=\"pt-2\">\n                  <div className=\"text-xs text-muted-foreground mb-2\">Progress</div>\n                  <div className=\"space-y-1.5\">\n                    {currentPlan.steps.map((step) => (\n                      <div\n                        key={step.step}\n                        className=\"flex items-center gap-2 text-xs\"\n                      >\n                        {step.status === \"confirmed\" ? (\n                          <CheckCircle2 className=\"h-3 w-3 text-chart-2 shrink-0\" />\n                        ) : step.status === \"processing\" ? (\n                          <Loader2 className=\"h-3 w-3 text-primary animate-spin shrink-0\" />\n                        ) : (\n                          <div className=\"h-3 w-3 rounded-full border border-muted-foreground shrink-0\" />\n                        )}\n                        <span className=\"truncate\">{step.title}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                {wallet.isConnected && (\n                  <Button \n                    onClick={handleExecuteBridge}\n                    disabled={isGettingQuote || bridgeQuote.isPending}\n                    className=\"w-full mt-3\"\n                    data-testid=\"button-execute-bridge\"\n                  >\n                    {isGettingQuote || bridgeQuote.isPending ? (\n                      <>\n                        <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                        Getting Quote...\n                      </>\n                    ) : (\n                      <>\n                        <Zap className=\"h-4 w-4 mr-2\" />\n                        Execute Bridge\n                      </>\n                    )}\n                  </Button>\n                )}\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              <Shield className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n              <p className=\"text-sm\">No active bridge</p>\n              <p className=\"text-xs mt-1\">Start a bridge transaction to see details here</p>\n            </div>\n          )}\n\n          <Separator />\n\n          <div>\n            <h3 className=\"text-sm font-medium flex items-center gap-2 mb-3\">\n              <History className=\"h-4 w-4 text-muted-foreground\" />\n              Recent Transactions\n            </h3>\n\n            {recentTransactions.length > 0 ? (\n              <div className=\"space-y-2\">\n                {recentTransactions.map((tx) => (\n                  <Card\n                    key={tx.id}\n                    className=\"p-3\"\n                    data-testid={`card-transaction-${tx.id}`}\n                  >\n                    <div className=\"flex items-start justify-between gap-2 mb-2\">\n                      <div className=\"flex items-center gap-1.5\">\n                        <ChainIcon chain={tx.sourceChain} size={16} />\n                        <ArrowRight className=\"h-3 w-3 text-muted-foreground\" />\n                        <ChainIcon chain={tx.targetChain} size={16} />\n                      </div>\n                      {getStatusBadge(tx.status)}\n                    </div>\n\n                    <div className=\"space-y-1 text-xs\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-muted-foreground\">Amount</span>\n                        <span className=\"font-mono\">{tx.amount} ZEC</span>\n                      </div>\n                      <div className=\"flex items-center justify-between gap-2\">\n                        <span className=\"text-muted-foreground\">Hash</span>\n                        <div className=\"flex items-center gap-1\">\n                          <span className=\"font-mono truncate max-w-[100px]\">\n                            {tx.hash.slice(0, 8)}...{tx.hash.slice(-6)}\n                          </span>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            className=\"h-5 w-5\"\n                            onClick={() => handleCopy(tx.hash, tx.id)}\n                            data-testid={`button-copy-hash-${tx.id}`}\n                          >\n                            {copied === tx.id ? (\n                              <CheckCircle2 className=\"h-3 w-3 text-chart-2\" />\n                            ) : (\n                              <Copy className=\"h-3 w-3\" />\n                            )}\n                          </Button>\n                        </div>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-muted-foreground\">Confirmations</span>\n                        <span>{tx.confirmations}/12</span>\n                      </div>\n                      <div className=\"flex justify-between text-muted-foreground\">\n                        <span>Time</span>\n                        <span>{format(new Date(tx.timestamp), \"MMM d, h:mm a\")}</span>\n                      </div>\n                    </div>\n                  </Card>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-6 text-muted-foreground\">\n                <p className=\"text-xs\">No recent transactions</p>\n              </div>\n            )}\n          </div>\n        </div>\n      </ScrollArea>\n\n      <BridgeExecutionModal\n        quote={activeQuote}\n        isOpen={showExecutionModal}\n        onClose={() => {\n          setShowExecutionModal(false);\n          setActiveQuote(null);\n        }}\n        onSuccess={handleExecutionSuccess}\n      />\n    </div>\n  );\n}\n","path":null,"size_bytes":11894,"size_tokens":null},"client/src/components/balance-panel.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { ChainIcon } from \"@/components/icons/chain-icons\";\nimport { useWallet } from \"@/lib/wallet-context\";\nimport { \n  RefreshCw, \n  TrendingUp, \n  TrendingDown, \n  Wallet as WalletIcon,\n  ArrowUpRight,\n  AlertCircle\n} from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface ChainBalance {\n  chain: string;\n  symbol: string;\n  balance: string;\n  usdValue: string;\n  lastUpdated: string;\n}\n\ninterface BalanceResponse {\n  balances: ChainBalance[];\n  totalUsdValue: string;\n}\n\ninterface PriceData {\n  usd: number;\n  change24h: number;\n}\n\ninterface PricesResponse {\n  prices: Record<string, PriceData>;\n  lastUpdated: string;\n}\n\nexport function BalancePanel() {\n  const { wallet } = useWallet();\n  \n  const balanceUrl = wallet.isConnected && wallet.accountId\n    ? `/api/balances?near=${encodeURIComponent(wallet.accountId)}`\n    : `/api/balances?demo=true`;\n  \n  const { \n    data: balanceData, \n    isLoading: balanceLoading, \n    isError: balanceError,\n    refetch: refetchBalances \n  } = useQuery<BalanceResponse>({\n    queryKey: [balanceUrl],\n    refetchInterval: 30000,\n  });\n\n  const { data: pricesData } = useQuery<PricesResponse>({\n    queryKey: [\"/api/prices\"],\n    refetchInterval: 60000,\n  });\n\n  const handleRefresh = () => {\n    refetchBalances();\n  };\n\n  const getPriceChange = (symbol: string): number | undefined => {\n    return pricesData?.prices?.[symbol]?.change24h;\n  };\n\n  if (balanceError) {\n    return (\n      <Card data-testid=\"card-balance-panel-error\">\n        <CardHeader className=\"pb-2\">\n          <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n            <WalletIcon className=\"h-4 w-4 text-primary\" />\n            Portfolio Balance\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-col items-center justify-center py-4 text-center\">\n            <AlertCircle className=\"h-8 w-8 text-destructive mb-2\" />\n            <p className=\"text-sm text-muted-foreground\">Failed to load balances</p>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"mt-3\"\n              onClick={handleRefresh}\n              data-testid=\"button-retry-balances\"\n            >\n              <RefreshCw className=\"h-3 w-3 mr-2\" />\n              Retry\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (balanceLoading) {\n    return (\n      <Card data-testid=\"card-balance-panel\">\n        <CardHeader className=\"pb-2\">\n          <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n            <WalletIcon className=\"h-4 w-4 text-primary\" />\n            Portfolio Balance\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-3\">\n          <Skeleton className=\"h-8 w-32\" />\n          <div className=\"space-y-2\">\n            {[1, 2, 3, 4].map((i) => (\n              <Skeleton key={i} className=\"h-12 w-full\" />\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card data-testid=\"card-balance-panel\">\n      <CardHeader className=\"pb-2\">\n        <div className=\"flex items-center justify-between gap-2 flex-wrap\">\n          <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n            <WalletIcon className=\"h-4 w-4 text-primary\" />\n            Portfolio Balance\n          </CardTitle>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"h-7 w-7\"\n            onClick={handleRefresh}\n            data-testid=\"button-refresh-balances\"\n          >\n            <RefreshCw className=\"h-3.5 w-3.5\" />\n          </Button>\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div className=\"text-center pb-2 border-b border-border\">\n          <p className=\"text-xs text-muted-foreground\">Total Value</p>\n          <p className=\"text-2xl font-bold text-primary\" data-testid=\"text-total-balance\">\n            {balanceData?.totalUsdValue || \"$0.00\"}\n          </p>\n        </div>\n\n        <div className=\"space-y-2\">\n          {balanceData?.balances.map((balance) => {\n            const priceChange = getPriceChange(balance.symbol);\n            const isPositive = priceChange && priceChange > 0;\n            const isNegative = priceChange && priceChange < 0;\n\n            return (\n              <div\n                key={balance.chain}\n                className=\"flex items-center justify-between p-3 rounded-lg bg-muted/50 hover-elevate transition-all\"\n                data-testid={`balance-row-${balance.chain}`}\n              >\n                <div className=\"flex items-center gap-3\">\n                  <ChainIcon chain={balance.chain as \"zcash\" | \"ethereum\" | \"near\" | \"polygon\" | \"binance\" | \"avalanche\"} size={24} />\n                  <div>\n                    <p className=\"font-medium text-sm\">{balance.symbol}</p>\n                    <p className=\"text-xs text-muted-foreground capitalize\">\n                      {balance.chain}\n                    </p>\n                  </div>\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"font-mono text-sm\" data-testid={`text-balance-${balance.chain}`}>\n                    {balance.balance}\n                  </p>\n                  <div className=\"flex items-center gap-1 justify-end\">\n                    <p className=\"text-xs text-muted-foreground\">\n                      {balance.usdValue}\n                    </p>\n                    {priceChange !== undefined && (\n                      <Badge\n                        variant=\"outline\"\n                        className={cn(\n                          \"text-[10px] px-1 py-0\",\n                          isPositive && \"text-chart-2 border-chart-2/30\",\n                          isNegative && \"text-destructive border-destructive/30\"\n                        )}\n                      >\n                        {isPositive ? (\n                          <TrendingUp className=\"h-2 w-2 mr-0.5\" />\n                        ) : isNegative ? (\n                          <TrendingDown className=\"h-2 w-2 mr-0.5\" />\n                        ) : null}\n                        {Math.abs(priceChange).toFixed(1)}%\n                      </Badge>\n                    )}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n\n        <div className=\"pt-2 border-t border-border\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            className=\"w-full gap-2\"\n            data-testid=\"button-view-all-assets\"\n          >\n            View All Assets\n            <ArrowUpRight className=\"h-3 w-3\" />\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":7025,"size_tokens":null},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"server/vite.ts":{"content":"import { type Express } from \"express\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport async function setupVite(server: Server, app: Express) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server, path: \"/vite-hmr\" },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n","path":null,"size_bytes":1534,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1209,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7609,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5741,"size_tokens":null},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","path":null,"size_bytes":2695,"size_tokens":null},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n  --opaque-button-border-intensity: -8;\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n  --background: 0 0% 100%;\n  --foreground: 0 0% 0%;\n  --border: 0 0% 96.47%;\n  --card: 0 0% 96.47%;\n  --card-foreground: 0 0% 0%;\n  --card-border: 210 5% 94%;\n  --sidebar: 180 6.6667% 97.0588%;\n  --sidebar-foreground: 210 25% 7.8431%;\n  --sidebar-border: 205.0000 25.0000% 90.5882%;\n  --sidebar-primary: 203.8863 88.2845% 53.1373%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 211.5789 51.3514% 92.7451%;\n  --sidebar-accent-foreground: 203.8863 88.2845% 53.1373%;\n  --sidebar-ring: 202.8169 89.1213% 53.1373%;\n  --popover: 0 0% 100%;\n  --popover-foreground: 0 0% 0%;\n  --popover-border: 0 0% 97%;\n  --primary: 96 85.19% 73.53%;\n  --primary-foreground: 0 0% 0%;\n  --secondary: 0 0% 0%;\n  --secondary-foreground: 0 0% 100%;\n  --muted: 0 0% 96.08%;\n  --muted-foreground: 0 0% 52.94%;\n  --accent: 254.21 100% 92.55%;\n  --accent-foreground: 0 0% 0%;\n  --destructive: 2.04 74.62% 61.37%;\n  --destructive-foreground: 0 0% 100%;\n  --input: 0 0% 0%;\n  --ring: 0 0% 0%;\n  --chart-1: 203.8863 88.2845% 53.1373%;\n  --chart-2: 159.7826 100% 36.0784%;\n  --chart-3: 42.0290 92.8251% 56.2745%;\n  --chart-4: 147.1429 78.5047% 41.9608%;\n  --chart-5: 341.4894 75.2000% 50.9804%;\n  --font-sans: 'Space Grotesk', sans-serif;\n  --font-serif: 'Geist', sans-serif;\n  --font-mono: 'Geist Mono', monospace;\n  --radius: 0rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 1px 2px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 1px 2px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 2px 4px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 4px 6px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 8px 10px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n  --background: 220 20% 4%;\n  --foreground: 210 40% 96%;\n  --border: 217 19% 14%;\n  --card: 220 18% 8%;\n  --card-foreground: 210 40% 92%;\n  --card-border: 217 19% 12%;\n  --sidebar: 220 18% 6%;\n  --sidebar-foreground: 210 40% 92%;\n  --sidebar-border: 217 19% 14%;\n  --sidebar-primary: 45 93% 58%;\n  --sidebar-primary-foreground: 0 0% 0%;\n  --sidebar-accent: 217 19% 12%;\n  --sidebar-accent-foreground: 45 93% 58%;\n  --sidebar-ring: 45 93% 58%;\n  --popover: 220 18% 6%;\n  --popover-foreground: 210 40% 96%;\n  --popover-border: 217 19% 10%;\n  --primary: 45 93% 58%;\n  --primary-foreground: 0 0% 0%;\n  --secondary: 217 19% 18%;\n  --secondary-foreground: 210 40% 96%;\n  --muted: 217 19% 12%;\n  --muted-foreground: 215 20% 55%;\n  --accent: 217 19% 14%;\n  --accent-foreground: 45 93% 58%;\n  --destructive: 0 84% 60%;\n  --destructive-foreground: 0 0% 100%;\n  --input: 217 19% 16%;\n  --ring: 45 93% 58%;\n  --chart-1: 45 93% 58%;\n  --chart-2: 160 84% 39%;\n  --chart-3: 262 83% 58%;\n  --chart-4: 199 89% 48%;\n  --chart-5: 0 84% 60%;\n  --shadow-2xs: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 1px 2px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 1px 2px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 2px 4px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 4px 6px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 8px 10px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --radius: 0.5rem;\n  --spacing: 0.25rem;\n  --font-mono: 'JetBrains Mono', monospace;\n  --font-sans: 'Inter', sans-serif;\n  --font-serif: 'Inter', sans-serif;\n  --tracking-normal: 0em;\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}\n","path":null,"size_bytes":11485,"size_tokens":null},"attached_assets/content-1764842924264.md":{"content":"[Skip to content](https://z.cash/#content)\n\n# Zcash is encrypted electronic cash.\n\nThe first cryptocurrency to develop zero-knowledge encryption for private peer-to-peer payments.\n\n[Use Zcash](https://z.cash/learn/how-to-use-zcash/#start)\n\n[Learn Zcash](https://z.cash/learn/)\n\nCurrent price (USD)\n\n$0\n\nOutstanding supply\n\n0M\n\nShielded ZEC\n\n0M\n\n363.70Current Price (USD)\n\n16.42MOutstanding Supply\n\n4.81MShielded ZEC\n\n## Stay shielded.\n\n### Zcash is supported by  industry leaders\n\nZcash is available in trusted digital wallets and listed on high-quality exchanges around the world, making it the best option for private everyday payments and long-term savings.\n\n[![Zcash Foundation](https://z.cash/wp-content/uploads/2023/04/zcash-foundation-logo.svg)](https://z.cash/ecosystem/zcash-foundation/)\n\n[![Coinbase](https://z.cash/wp-content/uploads/2023/04/coinbase-logo.png)](https://z.cash/ecosystem/coinbase/)\n\n[![Electric Coin Company](https://z.cash/wp-content/uploads/2023/04/ecc-logo-alt.png)](https://z.cash/ecosystem/electric-coin-company/)\n\n[![Messari](https://z.cash/wp-content/uploads/2023/04/messari.png)](https://z.cash/ecosystem/messari/)\n\n[![Flyp.me](https://z.cash/wp-content/uploads/2023/04/flypme.png)](https://z.cash/ecosystem/flyp-me/)\n\n[![Bitfinex](https://z.cash/wp-content/uploads/2023/04/bitfinex-logo.png)](https://z.cash/ecosystem/bitfinex/)\n\n[![Zcash Community Grants](https://z.cash/wp-content/uploads/2023/04/zcash-grants-committee.png)](https://z.cash/ecosystem/zcash-community-grants/)\n\n[![Flexa](https://z.cash/wp-content/uploads/2023/04/flexa-logo.png)](https://z.cash/ecosystem/flexa/)\n\n[![Airtm](https://z.cash/wp-content/uploads/2023/04/airtm-logo.png)](https://z.cash/ecosystem/airtm/)\n\n[![Poloniex](https://z.cash/wp-content/uploads/2023/04/poloniex-logo.png)](https://z.cash/ecosystem/poloniex/)\n\n[![Gemini](https://z.cash/wp-content/uploads/2023/03/gemini-support.png)](https://z.cash/ecosystem/gemini/)\n\n[![Zcash Foundation](https://z.cash/wp-content/uploads/2023/04/zcash-foundation-logo.svg)](https://z.cash/ecosystem/zcash-foundation/)\n\n[![Coinbase](https://z.cash/wp-content/uploads/2023/04/coinbase-logo.png)](https://z.cash/ecosystem/coinbase/)\n\n[![Electric Coin Company](https://z.cash/wp-content/uploads/2023/04/ecc-logo-alt.png)](https://z.cash/ecosystem/electric-coin-company/)\n\n[![Messari](https://z.cash/wp-content/uploads/2023/04/messari.png)](https://z.cash/ecosystem/messari/)\n\n[![Flyp.me](https://z.cash/wp-content/uploads/2023/04/flypme.png)](https://z.cash/ecosystem/flyp-me/)\n\n[![Bitfinex](https://z.cash/wp-content/uploads/2023/04/bitfinex-logo.png)](https://z.cash/ecosystem/bitfinex/)\n\n[![Zcash Community Grants](https://z.cash/wp-content/uploads/2023/04/zcash-grants-committee.png)](https://z.cash/ecosystem/zcash-community-grants/)\n\n[![Flexa](https://z.cash/wp-content/uploads/2023/04/flexa-logo.png)](https://z.cash/ecosystem/flexa/)\n\n[![Zcash Foundation](https://z.cash/wp-content/uploads/2023/04/zcash-foundation-logo.svg)](https://z.cash/ecosystem/zcash-foundation/)\n\n[![Airtm](https://z.cash/wp-content/uploads/2023/04/airtm-logo.png)](https://z.cash/ecosystem/airtm/)\n\n[![Coinbase](https://z.cash/wp-content/uploads/2023/04/coinbase-logo.png)](https://z.cash/ecosystem/coinbase/)\n\n[![Poloniex](https://z.cash/wp-content/uploads/2023/04/poloniex-logo.png)](https://z.cash/ecosystem/poloniex/)\n\n[![Flexa](https://z.cash/wp-content/uploads/2023/04/flexa-logo.png)](https://z.cash/ecosystem/flexa/)\n\n[![Bitfinex](https://z.cash/wp-content/uploads/2023/04/bitfinex-logo.png)](https://z.cash/ecosystem/bitfinex/)\n\n[![Zcash Community Grants](https://z.cash/wp-content/uploads/2023/04/zcash-grants-committee.png)](https://z.cash/ecosystem/zcash-community-grants/)\n\n[![Flyp.me](https://z.cash/wp-content/uploads/2023/04/flypme.png)](https://z.cash/ecosystem/flyp-me/)\n\n[![Electric Coin Company](https://z.cash/wp-content/uploads/2023/04/ecc-logo-alt.png)](https://z.cash/ecosystem/electric-coin-company/)\n\n[![Messari](https://z.cash/wp-content/uploads/2023/04/messari.png)](https://z.cash/ecosystem/messari/)\n\n[![Gemini](https://z.cash/wp-content/uploads/2023/03/gemini-support.png)](https://z.cash/ecosystem/gemini/)\n\n[![Zcash Foundation](https://z.cash/wp-content/uploads/2023/04/zcash-foundation-logo.svg)](https://z.cash/ecosystem/zcash-foundation/)\n\n[![Airtm](https://z.cash/wp-content/uploads/2023/04/airtm-logo.png)](https://z.cash/ecosystem/airtm/)\n\n[![Coinbase](https://z.cash/wp-content/uploads/2023/04/coinbase-logo.png)](https://z.cash/ecosystem/coinbase/)\n\n[![Poloniex](https://z.cash/wp-content/uploads/2023/04/poloniex-logo.png)](https://z.cash/ecosystem/poloniex/)\n\n[Explore](https://z.cash/ecosystem/)\n\n### Features\n\n![Fair and open](https://z.cash/wp-content/uploads/2023/04/fair-open.gif)\n\n#### Fair & open\n\nZcash is accessible and available to anyone with an internet connection.\n\n![Private](https://z.cash/wp-content/uploads/2023/04/privacy.gif)\n\n#### Private\n\nZcash employs end-to-end encryption to protect your right to privacy.\n\n![Youre in control](https://z.cash/wp-content/uploads/2023/04/you-re-in-control.gif)\n\n#### You're in control\n\nZcash is a decentralized protocol, which means your money is yours  not the banks.\n\n![Secret messages](https://z.cash/wp-content/uploads/2023/04/secret.gif)\n\n#### Secret messages\n\nSend private messages along with your transactions. [Write a love note](https://youtu.be/Qs4ZqVYY-DA?t=310), if you like.\n\n![Fast, low fees](https://z.cash/wp-content/uploads/2023/04/fast-and-low-fees.gif)\n\n#### Fast, low fees\n\nZcash is faster than Bitcoin, and transaction fees are usually only a fraction of a cent.\n\n![Self-funded development](https://z.cash/wp-content/uploads/2023/04/self-funded-develop.gif)\n\n#### Self-funded development\n\nA decentralized ecosystem of developersare paid to add Zcash features and UX improvements.\n\n### Ready to use ZEC?\n\n#### [Learn](https://z.cash/learn/)\n\n[Learn the basics of Zcash and browse resources.](https://z.cash/learn/)\n\n#### [Use Zcash](https://z.cash/ecosystem/)\n\n[Find ecosystem resources, like exchanges and wallets.](https://z.cash/ecosystem/)\n\n#### [Connect](https://z.cash/community-hub/?discuss=\\#tab-5663)\n\n[Visit the Zcash Community Hub and join the conversation.](https://z.cash/community-hub/?discuss=#tab-5663)\n\n#### [Build](https://z.cash/ecosystem/\\#tag-build-with-zcash)\n\n[Find tools and contribute to the Zcash Ecosystem.](https://z.cash/ecosystem/#tag-build-with-zcash)\n\n##### Can we store cookies?\n\nWe sometimes use cookies to improve the performance of our website. Choose what you allow.\n\nCustomizeNoYes\n\nManage Cookies\n\nClose\n\n#### Our Features\n\nWe sometimes use cookies to improve the performance of our website. Choose what you allow.\n\nEssential\n\nEssential\n\nAlways Enabled\n\nThis includes key features like page navigation and logging you in. The website cannot function without this.\n\n**Who do we share data with?**\n\n| Description |\n| --- |\n| [Google Analytics](https://www.google.com/intl/en/policies/privacy/) |\n| [Google Optimize](https://policies.google.com/privacy?hl=en) |\n| [Google Tag Manager](https://www.google.com/intl/en/policies/privacy/) |\n| [Sendgrid](https://www.twilio.com/legal/privacy) |\n\n**Does this policy need cookies to work?**\n\nYes.\n\nMarketing\n\nmarketing\n\nThis tells us it's okay for us to use your information for marketing specifically.\n\n**Who do we share data with?**\n\n| Description |\n| --- |\n| [Hotjar](https://www.hotjar.com/legal/policies/privacy/) |\n\n**Does this policy need cookies to work?**\n\nYes.\n\nNoSave My PreferencesYes\n\n[Algolia](https://z.cash/# \"Algolia\")\n\n[Algolia](https://z.cash/# \"Algolia\")","path":null,"size_bytes":7620,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2765,"size_tokens":null},"design_guidelines.md":{"content":"# GhostBridge AI - Design Guidelines\n\n## Design Approach\n\n**Selected Approach**: Design System with Modern DeFi/Web3 Patterns\n\n**Key Design Principles**:\n1. **Trust & Security First**: Professional, polished interface that inspires confidence in financial operations\n2. **Conversational Clarity**: Chat-based interaction should feel natural and intelligent\n3. **Information Hierarchy**: Complex bridge data presented in scannable, digestible chunks\n4. **Privacy Emphasis**: Visual cues that reinforce Zcash's privacy-preserving features\n\n**Reference Influences**: Modern DeFi platforms (Uniswap, Coinbase), combined with chat interfaces (Linear, Notion) for the conversational aspect\n\n---\n\n## Typography System\n\n**Font Stack**:\n- **Primary**: Inter (via Google Fonts) - Clean, professional, excellent for Web3 UIs\n- **Monospace**: JetBrains Mono (via Google Fonts) - For addresses, transaction hashes, technical data\n\n**Type Scale**:\n- **Hero/H1**: text-4xl md:text-5xl, font-bold\n- **H2**: text-3xl, font-semibold  \n- **H3**: text-xl md:text-2xl, font-semibold\n- **Body Large**: text-lg, font-normal\n- **Body**: text-base, font-normal\n- **Caption/Small**: text-sm, font-medium\n- **Micro**: text-xs, font-normal (for metadata, timestamps)\n\n---\n\n## Layout System\n\n**Spacing Primitives**: Use Tailwind units of **2, 4, 6, 8, 12, 16** (e.g., p-4, gap-8, mb-12)\n\n**Container Strategy**:\n- **App Container**: max-w-7xl mx-auto px-4 md:px-6\n- **Chat Container**: max-w-4xl mx-auto (optimal reading width for conversation)\n- **Cards/Panels**: w-full with appropriate padding (p-6 md:p-8)\n\n**Grid System**:\n- Desktop: 2-column layout (chat on left 2/3, sidebar on right 1/3 for transaction details)\n- Tablet: Single column, collapsible sidebar\n- Mobile: Full-width stacked\n\n---\n\n## Component Library\n\n### Navigation & Header\n- **Sticky header** with wallet connection status\n- Logo + App name on left\n- Wallet selector button on right (connected state shows address truncated)\n- Network indicator (Testnet/Mainnet badge)\n- Account balance display when connected\n\n### Chat Interface (Primary Component)\n**Message Structure**:\n- User messages: Right-aligned, compact bubbles\n- AI responses: Left-aligned, max-width for readability\n- Each message includes timestamp (text-xs, subtle)\n- AI responses can include structured data cards (bridge plans, fee breakdowns)\n\n**Chat Input**:\n- Fixed bottom input bar with subtle border-top\n- Text area auto-expands (max 4 lines)\n- Send button (icon + text on desktop, icon only on mobile)\n- Quick action chips above input (\"Bridge to ETH\", \"Check balance\", \"View history\")\n\n**Chat Cards** (embedded in AI responses):\n- **Bridge Plan Card**: Shows protocol, source  target chain, estimated fees\n- **Transaction Status Card**: Progress indicator, transaction hash (monospace), confirmations\n- **Education Card**: Privacy tips, shielded pool explanations with icons\n\n### Wallet Integration\n- **Connect Modal**: Grid of wallet options (3 cols on desktop, 2 on tablet, 1 on mobile)\n- Each wallet: Icon (64x64), name, \"Recommended\" badge for popular options\n- Connected state: Dropdown showing account, balance, disconnect option\n\n### Transaction Components\n- **Fee Estimator**: Tabular layout showing gas, bridge fee, total\n- **Progress Stepper**: Visual timeline of bridge steps (4-5 steps typical)\n- **Confirmation Dialog**: Modal with transaction summary, risk warnings, action buttons\n\n### Status & Feedback\n- **Status Pills**: Rounded badges for transaction states (pending, confirmed, failed)\n- **Toast Notifications**: Top-right corner, auto-dismiss\n- **Loading States**: Skeleton loaders for chat, spinners for actions\n\n---\n\n## Page Structure\n\n### Main Application View\n\n**Layout**:\n```\n\n  Header (Sticky)                        \n  Logo  |  Network  |  [Connect Wallet]  \n\n                                         \n   \n                                     \n    Chat History     Transaction     \n    (Scrollable)     Details Panel   \n                     (Sticky)        \n    [AI Messages]                    \n    [User Input]      Selected      \n                       Protocol      \n                      Fees          \n                      Status        \n                                     \n   \n                                         \n\n```\n\n**Sections**:\n1. **Welcome State** (before wallet connection): Hero section with value prop, \"Connect Wallet\" CTA, feature highlights (3-col grid)\n2. **Active Chat View**: Two-panel layout as shown above\n3. **Transaction History**: Collapsible section below chat with timeline view\n\n---\n\n## Icons & Assets\n\n**Icon Library**: Heroicons (via CDN) for UI elements\n- Navigation: outline style\n- Actions: solid style  \n- Status: mini style\n\n**Crypto-Specific Icons**:\n- Chain logos (Zcash, Ethereum, NEAR, etc.): Use established SVG assets via CDN or placeholder comments `<!-- CHAIN LOGO: Zcash -->`\n- Wallet icons: From wallet provider assets where possible\n\n---\n\n## Responsive Behavior\n\n**Breakpoints**:\n- Mobile: < 768px (single column, bottom input, hidden sidebar accessible via slide-over)\n- Tablet: 768px - 1024px (still single column, sidebar toggles)\n- Desktop: > 1024px (two-column layout as designed)\n\n**Touch Targets**: Minimum 44x44px for all interactive elements on mobile\n\n---\n\n## Accessibility\n\n- **Form inputs**: Proper labels, aria-describedby for error states\n- **Wallet addresses**: Copyable with click, show truncated with tooltip for full address\n- **Chat messages**: Proper ARIA labels, announced to screen readers\n- **Transaction status**: Use both color AND icons/text to convey state\n- **Keyboard navigation**: Full support for tab/enter through wallet selection, chat input\n\n---\n\n## Animations\n\n**Minimal, Purposeful Only**:\n- **Chat messages**: Gentle fade-in (150ms) when AI responds\n- **Transaction status**: Pulse animation for \"pending\" state only\n- **Wallet modal**: Smooth slide-up (200ms) when opening\n- **NO**: Elaborate hero animations, scroll effects, or decorative motion\n\n---\n\n## Images\n\n**Required Images**:\n1. **Welcome Hero**: Abstract visualization representing cross-chain bridging (interconnected nodes/chains), placed above welcome message in empty state. Size: full-width, ~400px height on desktop\n2. **Privacy Shield Icon**: Custom illustration showing Zcash's shielded pool concept, used in education cards throughout chat\n3. **Success State**: Celebration graphic when bridge completes successfully\n\n**Placement Strategy**:\n- Hero image only shown in empty/welcome state\n- Privacy illustrations embedded inline within AI chat responses\n- No background images or decorative graphics that compete with functional content\n\n---\n\n## Special Considerations\n\n**Web3 Patterns**:\n- Transaction hashes: Always monospace, truncated with copy button\n- Addresses: Show first 6 and last 4 chars (0x1234...5678)\n- Gas/fees: Display in both native units and USD equivalent\n- Privacy indicators: Lock icon + \"Shielded\" badge on Zcash transactions\n\n**Trust Building**:\n- Display protocol audit status where applicable\n- Show clear fee breakdowns (no hidden costs)\n- Educational tooltips explaining technical terms\n- Transaction simulation/preview before execution","path":null,"size_bytes":7978,"size_tokens":null},"client/src/components/welcome-hero.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useWallet } from \"@/lib/wallet-context\";\nimport { \n  Shield, \n  Zap, \n  Lock, \n  ArrowRight, \n  Wallet,\n  Sparkles,\n  Globe,\n  Clock\n} from \"lucide-react\";\nimport { ZcashIcon, EthereumIcon, NearIcon, PolygonIcon } from \"@/components/icons/chain-icons\";\n\ninterface WelcomeHeroProps {\n  onConnect: () => void;\n}\n\nexport function WelcomeHero({ onConnect }: WelcomeHeroProps) {\n  const { isConnecting } = useWallet();\n\n  return (\n    <div className=\"flex-1 flex flex-col items-center justify-center p-6 md:p-12 overflow-auto\">\n      <div className=\"max-w-4xl w-full space-y-12\">\n        <div className=\"text-center space-y-6\">\n          <Badge variant=\"outline\" className=\"gap-1.5 px-3 py-1\">\n            <Sparkles className=\"h-3 w-3 text-primary\" />\n            AI-Powered Privacy Bridge\n          </Badge>\n\n          <div className=\"space-y-4\">\n            <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight\">\n              Bridge Zcash\n              <span className=\"text-primary block mt-2\">Privately</span>\n            </h1>\n            <p className=\"text-lg md:text-xl text-muted-foreground max-w-2xl mx-auto\">\n              GhostBridge AI lets you move Zcash across chains using natural language. \n              Just tell it what you want, and the AI handles the rest.\n            </p>\n          </div>\n\n          <div className=\"flex flex-col sm:flex-row items-center justify-center gap-4 pt-4\">\n            <Button \n              size=\"lg\" \n              onClick={onConnect}\n              disabled={isConnecting}\n              className=\"gap-2 min-w-[200px]\"\n              data-testid=\"button-hero-connect\"\n            >\n              <Wallet className=\"h-5 w-5\" />\n              {isConnecting ? \"Connecting...\" : \"Connect Wallet\"}\n            </Button>\n            <Button \n              size=\"lg\" \n              variant=\"outline\"\n              className=\"gap-2\"\n              data-testid=\"button-learn-more\"\n            >\n              Learn More\n              <ArrowRight className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"flex items-center justify-center gap-3 md:gap-6 flex-wrap\">\n          <ChainBubble icon={<ZcashIcon size={32} />} name=\"Zcash\" />\n          <ArrowRight className=\"h-5 w-5 text-muted-foreground hidden md:block\" />\n          <ChainBubble icon={<EthereumIcon size={32} />} name=\"Ethereum\" />\n          <ChainBubble icon={<NearIcon size={32} />} name=\"NEAR\" />\n          <ChainBubble icon={<PolygonIcon size={32} />} name=\"Polygon\" />\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          <FeatureCard\n            icon={<Lock className=\"h-6 w-6\" />}\n            title=\"Private Transactions\"\n            description=\"All ZEC transfers use shielded pools, keeping your values and addresses hidden\"\n          />\n          <FeatureCard\n            icon={<Sparkles className=\"h-6 w-6\" />}\n            title=\"AI-Powered\"\n            description=\"Describe your bridge request in plain English - GhostBridge handles the complexity\"\n          />\n          <FeatureCard\n            icon={<Zap className=\"h-6 w-6\" />}\n            title=\"Multi-Chain\"\n            description=\"Bridge to Ethereum, NEAR, Polygon, and more with optimized routes\"\n          />\n        </div>\n\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4\">\n          <StatCard value=\"$2.5M+\" label=\"Total Bridged\" />\n          <StatCard value=\"<5 min\" label=\"Avg. Bridge Time\" />\n          <StatCard value=\"6\" label=\"Supported Chains\" />\n          <StatCard value=\"100%\" label=\"Privacy Protected\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction ChainBubble({ icon, name }: { icon: React.ReactNode; name: string }) {\n  return (\n    <div className=\"flex flex-col items-center gap-2\">\n      <div className=\"h-14 w-14 rounded-xl bg-card border border-card-border flex items-center justify-center hover-elevate transition-all\">\n        {icon}\n      </div>\n      <span className=\"text-xs text-muted-foreground\">{name}</span>\n    </div>\n  );\n}\n\nfunction FeatureCard({ \n  icon, \n  title, \n  description \n}: { \n  icon: React.ReactNode; \n  title: string; \n  description: string;\n}) {\n  return (\n    <div \n      className=\"p-6 rounded-xl border border-border bg-card/50 space-y-3 hover-elevate transition-all\"\n      data-testid={`card-feature-${title.toLowerCase().replace(/\\s+/g, '-')}`}\n    >\n      <div className=\"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center text-primary\">\n        {icon}\n      </div>\n      <h3 className=\"font-semibold\">{title}</h3>\n      <p className=\"text-sm text-muted-foreground\">{description}</p>\n    </div>\n  );\n}\n\nfunction StatCard({ value, label }: { value: string; label: string }) {\n  return (\n    <div \n      className=\"p-4 rounded-lg border border-border bg-card/30 text-center\"\n      data-testid={`stat-${label.toLowerCase().replace(/\\s+/g, '-')}`}\n    >\n      <div className=\"text-2xl font-bold text-primary\" data-testid={`text-stat-value-${label.toLowerCase().replace(/\\s+/g, '-')}`}>\n        {value}\n      </div>\n      <div className=\"text-xs text-muted-foreground mt-1\">{label}</div>\n    </div>\n  );\n}\n","path":null,"size_bytes":5276,"size_tokens":null},"client/src/components/icons/chain-icons.tsx":{"content":"import type { Chain } from \"@shared/schema\";\n\ninterface ChainIconProps {\n  chain: Chain;\n  size?: number;\n  className?: string;\n}\n\nexport function ZcashIcon({ size = 24, className = \"\" }: { size?: number; className?: string }) {\n  return (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 32 32\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n    >\n      <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"#F4B728\" />\n      <path\n        d=\"M16 6v3.5M16 22.5V26M14 9.5h4v2h-6l6 9h-6v2h4M14 22.5h4\"\n        stroke=\"#231F20\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n\nexport function EthereumIcon({ size = 24, className = \"\" }: { size?: number; className?: string }) {\n  return (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 32 32\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n    >\n      <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"#627EEA\" />\n      <path d=\"M16 4v9l7.5 3.5L16 4z\" fill=\"#fff\" fillOpacity=\"0.6\" />\n      <path d=\"M16 4l-7.5 12.5L16 13V4z\" fill=\"#fff\" />\n      <path d=\"M16 21.5v6.5l7.5-10.5L16 21.5z\" fill=\"#fff\" fillOpacity=\"0.6\" />\n      <path d=\"M16 28v-6.5l-7.5-4L16 28z\" fill=\"#fff\" />\n      <path d=\"M16 20l7.5-3.5L16 13v7z\" fill=\"#fff\" fillOpacity=\"0.2\" />\n      <path d=\"M8.5 16.5L16 20v-7l-7.5 3.5z\" fill=\"#fff\" fillOpacity=\"0.6\" />\n    </svg>\n  );\n}\n\nexport function NearIcon({ size = 24, className = \"\" }: { size?: number; className?: string }) {\n  return (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 32 32\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n    >\n      <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"#000\" />\n      <path\n        d=\"M21.5 8l-4 7.5 4.5 4.5v-12h-1l-8 12v-12h-1l-1 1v14l1 1h1l4-7.5-4.5-4.5v12h1l8-12v12h2V8h-2z\"\n        fill=\"#fff\"\n      />\n    </svg>\n  );\n}\n\nexport function BinanceIcon({ size = 24, className = \"\" }: { size?: number; className?: string }) {\n  return (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 32 32\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n    >\n      <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"#F3BA2F\" />\n      <path\n        d=\"M16 7l3.5 3.5-2.1 2.1-1.4-1.4-1.4 1.4-2.1-2.1L16 7zm-5.5 5.5l2.1 2.1-2.1 2.1-2.1-2.1 2.1-2.1zm11 0l2.1 2.1-2.1 2.1-2.1-2.1 2.1-2.1zM16 14.4l1.6 1.6-1.6 1.6-1.6-1.6 1.6-1.6zm-5.5 3.1l2.1 2.1-2.1 2.1-2.1-2.1 2.1-2.1zm11 0l2.1 2.1-2.1 2.1-2.1-2.1 2.1-2.1zM16 20.9l3.5 3.5L16 28l-3.5-3.5 3.5-3.6z\"\n        fill=\"#fff\"\n      />\n    </svg>\n  );\n}\n\nexport function PolygonIcon({ size = 24, className = \"\" }: { size?: number; className?: string }) {\n  return (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 32 32\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n    >\n      <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"#8247E5\" />\n      <path\n        d=\"M21 13.5c-.4-.2-.9-.2-1.3 0l-3 1.7-2 1.1-3 1.7c-.4.2-.9.2-1.3 0l-2.4-1.4c-.4-.2-.6-.6-.6-1.1v-2.7c0-.4.2-.8.6-1l2.4-1.4c.4-.2.9-.2 1.3 0l2.4 1.4c.4.2.6.6.6 1.1v1.7l2-1.1v-1.7c0-.4-.2-.8-.6-1l-4.3-2.5c-.4-.2-.9-.2-1.3 0l-4.4 2.5c-.4.2-.6.6-.6 1v5c0 .4.2.8.6 1l4.4 2.5c.4.2.9.2 1.3 0l3-1.7 2-1.1 3-1.7c.4-.2.9-.2 1.3 0l2.4 1.4c.4.2.6.6.6 1.1v2.7c0 .4-.2.8-.6 1l-2.4 1.4c-.4.2-.9.2-1.3 0l-2.4-1.4c-.4-.2-.6-.6-.6-1.1v-1.7l-2 1.1v1.7c0 .4.2.8.6 1l4.4 2.5c.4.2.9.2 1.3 0l4.4-2.5c.4-.2.6-.6.6-1v-5c0-.4-.2-.8-.6-1L21 13.5z\"\n        fill=\"#fff\"\n      />\n    </svg>\n  );\n}\n\nexport function AvalancheIcon({ size = 24, className = \"\" }: { size?: number; className?: string }) {\n  return (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 32 32\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n    >\n      <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"#E84142\" />\n      <path\n        d=\"M20.5 20h-3c-.5 0-.8-.3-1-.6l-3-6c-.2-.3-.2-.7 0-1l1.5-2.5c.2-.3.5-.5.8-.5h.3c.3 0 .6.2.8.5l4.5 8c.2.4.2.8 0 1.1-.2.3-.5.5-.9 1zm-9 0h-3c-.4 0-.8-.2-1-.6-.2-.3-.2-.7 0-1l6-10c.2-.3.5-.5.9-.5.4 0 .7.2.9.5l1.5 2.5c.2.3.2.7 0 1l-4 6.5c-.2.3-.5.6-1.3.6z\"\n        fill=\"#fff\"\n      />\n    </svg>\n  );\n}\n\nexport function ChainIcon({ chain, size = 24, className = \"\" }: ChainIconProps) {\n  switch (chain) {\n    case \"zcash\":\n      return <ZcashIcon size={size} className={className} />;\n    case \"ethereum\":\n      return <EthereumIcon size={size} className={className} />;\n    case \"near\":\n      return <NearIcon size={size} className={className} />;\n    case \"binance\":\n      return <BinanceIcon size={size} className={className} />;\n    case \"polygon\":\n      return <PolygonIcon size={size} className={className} />;\n    case \"avalanche\":\n      return <AvalancheIcon size={size} className={className} />;\n    default:\n      return <ZcashIcon size={size} className={className} />;\n  }\n}\n\nexport function getChainName(chain: Chain): string {\n  const names: Record<Chain, string> = {\n    zcash: \"Zcash\",\n    ethereum: \"Ethereum\",\n    near: \"NEAR\",\n    binance: \"Binance Chain\",\n    polygon: \"Polygon\",\n    avalanche: \"Avalanche\",\n  };\n  return names[chain];\n}\n\nexport function getChainColor(chain: Chain): string {\n  const colors: Record<Chain, string> = {\n    zcash: \"#F4B728\",\n    ethereum: \"#627EEA\",\n    near: \"#000000\",\n    binance: \"#F3BA2F\",\n    polygon: \"#8247E5\",\n    avalanche: \"#E84142\",\n  };\n  return colors[chain];\n}\n","path":null,"size_bytes":5439,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5128,"size_tokens":null},"client/src/App.tsx":{"content":"import { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { WalletProvider } from \"@/lib/wallet-context\";\nimport GhostBridge from \"@/pages/ghostbridge\";\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <WalletProvider>\n          <div className=\"flex h-screen w-full bg-background\">\n            <GhostBridge />\n          </div>\n          <Toaster />\n        </WalletProvider>\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","path":null,"size_bytes":683,"size_tokens":null},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1056,"size_tokens":null},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1251,"size_tokens":null},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1584,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8605,"size_tokens":null},"server/balance-service.ts":{"content":"interface ChainBalance {\n  chain: string;\n  symbol: string;\n  balance: string;\n  usdValue: string;\n  lastUpdated: string;\n}\n\ninterface BalanceResponse {\n  balances: ChainBalance[];\n  totalUsdValue: string;\n}\n\nconst CHAIN_CONFIGS = {\n  zcash: {\n    symbol: \"ZEC\",\n    explorerApi: \"https://api.blockchair.com/zcash\",\n    decimals: 8,\n    usdPrice: 35.0,\n  },\n  near: {\n    symbol: \"NEAR\",\n    rpcUrl: \"https://rpc.testnet.near.org\",\n    decimals: 24,\n    usdPrice: 5.5,\n  },\n  ethereum: {\n    symbol: \"ETH\",\n    rpcUrl: \"https://eth-mainnet.public.blastapi.io\",\n    decimals: 18,\n    usdPrice: 3500.0,\n  },\n  polygon: {\n    symbol: \"MATIC\",\n    rpcUrl: \"https://polygon-rpc.com\",\n    decimals: 18,\n    usdPrice: 0.85,\n  },\n};\n\nasync function fetchZcashBalance(address: string): Promise<ChainBalance> {\n  try {\n    const response = await fetch(\n      `https://api.blockchair.com/zcash/dashboards/address/${address}`\n    );\n    \n    if (!response.ok) {\n      throw new Error(\"Zcash API error\");\n    }\n    \n    const data = await response.json();\n    const balanceSatoshis = data.data?.[address]?.address?.balance || 0;\n    const balance = (balanceSatoshis / 1e8).toFixed(8);\n    const usdValue = (parseFloat(balance) * CHAIN_CONFIGS.zcash.usdPrice).toFixed(2);\n    \n    return {\n      chain: \"zcash\",\n      symbol: \"ZEC\",\n      balance,\n      usdValue: `$${usdValue}`,\n      lastUpdated: new Date().toISOString(),\n    };\n  } catch (error) {\n    console.error(\"Error fetching Zcash balance:\", error);\n    return {\n      chain: \"zcash\",\n      symbol: \"ZEC\",\n      balance: \"0.00000000\",\n      usdValue: \"$0.00\",\n      lastUpdated: new Date().toISOString(),\n    };\n  }\n}\n\nasync function fetchNearBalance(accountId: string): Promise<ChainBalance> {\n  try {\n    const response = await fetch(CHAIN_CONFIGS.near.rpcUrl, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        jsonrpc: \"2.0\",\n        id: \"dontcare\",\n        method: \"query\",\n        params: {\n          request_type: \"view_account\",\n          finality: \"final\",\n          account_id: accountId,\n        },\n      }),\n    });\n    \n    if (!response.ok) {\n      throw new Error(\"NEAR RPC error\");\n    }\n    \n    const data = await response.json();\n    \n    if (data.error) {\n      throw new Error(data.error.message || \"NEAR RPC error\");\n    }\n    \n    const amountYocto = data.result?.amount || \"0\";\n    const balance = (BigInt(amountYocto) / BigInt(10 ** 24)).toString();\n    const balanceFloat = parseFloat(amountYocto) / 1e24;\n    const usdValue = (balanceFloat * CHAIN_CONFIGS.near.usdPrice).toFixed(2);\n    \n    return {\n      chain: \"near\",\n      symbol: \"NEAR\",\n      balance: balanceFloat.toFixed(4),\n      usdValue: `$${usdValue}`,\n      lastUpdated: new Date().toISOString(),\n    };\n  } catch (error) {\n    console.error(\"Error fetching NEAR balance:\", error);\n    return {\n      chain: \"near\",\n      symbol: \"NEAR\",\n      balance: \"0.0000\",\n      usdValue: \"$0.00\",\n      lastUpdated: new Date().toISOString(),\n    };\n  }\n}\n\nasync function fetchEthereumBalance(address: string): Promise<ChainBalance> {\n  try {\n    const response = await fetch(CHAIN_CONFIGS.ethereum.rpcUrl, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        jsonrpc: \"2.0\",\n        id: 1,\n        method: \"eth_getBalance\",\n        params: [address, \"latest\"],\n      }),\n    });\n    \n    if (!response.ok) {\n      throw new Error(\"Ethereum RPC error\");\n    }\n    \n    const data = await response.json();\n    const balanceWei = BigInt(data.result || \"0x0\");\n    const balanceEth = Number(balanceWei) / 1e18;\n    const usdValue = (balanceEth * CHAIN_CONFIGS.ethereum.usdPrice).toFixed(2);\n    \n    return {\n      chain: \"ethereum\",\n      symbol: \"ETH\",\n      balance: balanceEth.toFixed(6),\n      usdValue: `$${usdValue}`,\n      lastUpdated: new Date().toISOString(),\n    };\n  } catch (error) {\n    console.error(\"Error fetching Ethereum balance:\", error);\n    return {\n      chain: \"ethereum\",\n      symbol: \"ETH\",\n      balance: \"0.000000\",\n      usdValue: \"$0.00\",\n      lastUpdated: new Date().toISOString(),\n    };\n  }\n}\n\nasync function fetchPolygonBalance(address: string): Promise<ChainBalance> {\n  try {\n    const response = await fetch(CHAIN_CONFIGS.polygon.rpcUrl, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        jsonrpc: \"2.0\",\n        id: 1,\n        method: \"eth_getBalance\",\n        params: [address, \"latest\"],\n      }),\n    });\n    \n    if (!response.ok) {\n      throw new Error(\"Polygon RPC error\");\n    }\n    \n    const data = await response.json();\n    const balanceWei = BigInt(data.result || \"0x0\");\n    const balanceMatic = Number(balanceWei) / 1e18;\n    const usdValue = (balanceMatic * CHAIN_CONFIGS.polygon.usdPrice).toFixed(2);\n    \n    return {\n      chain: \"polygon\",\n      symbol: \"MATIC\",\n      balance: balanceMatic.toFixed(6),\n      usdValue: `$${usdValue}`,\n      lastUpdated: new Date().toISOString(),\n    };\n  } catch (error) {\n    console.error(\"Error fetching Polygon balance:\", error);\n    return {\n      chain: \"polygon\",\n      symbol: \"MATIC\",\n      balance: \"0.000000\",\n      usdValue: \"$0.00\",\n      lastUpdated: new Date().toISOString(),\n    };\n  }\n}\n\nexport async function fetchAllBalances(addresses: {\n  zcash?: string;\n  near?: string;\n  ethereum?: string;\n  polygon?: string;\n}): Promise<BalanceResponse> {\n  const balancePromises: Promise<ChainBalance>[] = [];\n  \n  if (addresses.zcash) {\n    balancePromises.push(fetchZcashBalance(addresses.zcash));\n  }\n  if (addresses.near) {\n    balancePromises.push(fetchNearBalance(addresses.near));\n  }\n  if (addresses.ethereum) {\n    balancePromises.push(fetchEthereumBalance(addresses.ethereum));\n  }\n  if (addresses.polygon) {\n    balancePromises.push(fetchPolygonBalance(addresses.polygon));\n  }\n  \n  const balances = await Promise.all(balancePromises);\n  \n  const totalUsdValue = balances.reduce((total, b) => {\n    const value = parseFloat(b.usdValue.replace(\"$\", \"\").replace(\",\", \"\"));\n    return total + (isNaN(value) ? 0 : value);\n  }, 0);\n  \n  return {\n    balances,\n    totalUsdValue: `$${totalUsdValue.toFixed(2)}`,\n  };\n}\n\nexport { ChainBalance, BalanceResponse, CHAIN_CONFIGS };\n","path":null,"size_bytes":6303,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":1080,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1527,"size_tokens":null},"client/src/components/chat/bridge-plan-card.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport type { BridgePlan } from \"@shared/schema\";\nimport { ChainIcon, getChainName } from \"@/components/icons/chain-icons\";\nimport { \n  ArrowRight, \n  Clock, \n  Shield, \n  CheckCircle2, \n  Circle, \n  Loader2,\n  AlertCircle,\n  Lock\n} from \"lucide-react\";\n\ninterface BridgePlanCardProps {\n  plan: BridgePlan;\n}\n\nexport function BridgePlanCard({ plan }: BridgePlanCardProps) {\n  const completedSteps = plan.steps.filter(s => s.status === \"confirmed\").length;\n  const progress = (completedSteps / plan.steps.length) * 100;\n\n  const getStepIcon = (status: string) => {\n    switch (status) {\n      case \"confirmed\":\n        return <CheckCircle2 className=\"h-4 w-4 text-chart-2\" />;\n      case \"processing\":\n        return <Loader2 className=\"h-4 w-4 text-primary animate-spin\" />;\n      case \"failed\":\n        return <AlertCircle className=\"h-4 w-4 text-destructive\" />;\n      default:\n        return <Circle className=\"h-4 w-4 text-muted-foreground\" />;\n    }\n  };\n\n  return (\n    <Card className=\"w-full max-w-md\" data-testid={`card-bridge-plan-${plan.id}`}>\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between gap-2 flex-wrap\">\n          <CardTitle className=\"text-base font-medium flex items-center gap-2\">\n            Bridge Plan\n            {plan.isShielded && (\n              <Badge variant=\"outline\" className=\"gap-1 text-chart-2 border-chart-2/30\">\n                <Lock className=\"h-3 w-3\" />\n                Shielded\n              </Badge>\n            )}\n          </CardTitle>\n          <Badge variant=\"secondary\">{plan.protocol}</Badge>\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div className=\"flex items-center justify-between gap-4 p-3 rounded-md bg-muted\">\n          <div className=\"flex items-center gap-2\">\n            <ChainIcon chain={plan.sourceChain} size={28} />\n            <div className=\"flex flex-col\">\n              <span className=\"text-sm font-medium\">{plan.amount} ZEC</span>\n              <span className=\"text-xs text-muted-foreground\">\n                {getChainName(plan.sourceChain)}\n              </span>\n            </div>\n          </div>\n          \n          <ArrowRight className=\"h-5 w-5 text-muted-foreground shrink-0\" />\n          \n          <div className=\"flex items-center gap-2\">\n            <ChainIcon chain={plan.targetChain} size={28} />\n            <div className=\"flex flex-col\">\n              <span className=\"text-sm font-medium\">{plan.amount} wZEC</span>\n              <span className=\"text-xs text-muted-foreground\">\n                {getChainName(plan.targetChain)}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-muted-foreground\">Progress</span>\n            <span className=\"font-medium\">{completedSteps}/{plan.steps.length} steps</span>\n          </div>\n          <Progress value={progress} className=\"h-2\" />\n        </div>\n\n        <div className=\"space-y-2\">\n          {plan.steps.map((step) => (\n            <div\n              key={step.step}\n              className=\"flex items-start gap-3 p-2 rounded-md transition-colors\"\n              data-testid={`step-${step.step}`}\n            >\n              <div className=\"mt-0.5\">{getStepIcon(step.status)}</div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium\">{step.title}</p>\n                <p className=\"text-xs text-muted-foreground truncate\">\n                  {step.description}\n                </p>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-3 pt-2 border-t border-border\">\n          <div className=\"flex flex-col gap-1\">\n            <span className=\"text-xs text-muted-foreground\">Estimated Fees</span>\n            <div className=\"space-y-0.5\">\n              <div className=\"flex justify-between text-xs\">\n                <span>Gas:</span>\n                <span className=\"font-mono\">{plan.estimatedFees.gas}</span>\n              </div>\n              <div className=\"flex justify-between text-xs\">\n                <span>Bridge:</span>\n                <span className=\"font-mono\">{plan.estimatedFees.bridge}</span>\n              </div>\n              <div className=\"flex justify-between text-sm font-medium pt-1 border-t border-border\">\n                <span>Total:</span>\n                <span className=\"font-mono text-primary\">\n                  {plan.estimatedFees.total}\n                  <span className=\"text-muted-foreground text-xs ml-1\">\n                    (~{plan.estimatedFees.totalUsd})\n                  </span>\n                </span>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"flex flex-col gap-1 items-end\">\n            <span className=\"text-xs text-muted-foreground\">Est. Time</span>\n            <div className=\"flex items-center gap-1 text-sm\">\n              <Clock className=\"h-4 w-4 text-muted-foreground\" />\n              <span>{plan.estimatedTime}</span>\n            </div>\n            {plan.isShielded && (\n              <div className=\"flex items-center gap-1 text-xs text-chart-2 mt-1\">\n                <Shield className=\"h-3 w-3\" />\n                <span>Private Transaction</span>\n              </div>\n            )}\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":5634,"size_tokens":null},"server/gemini.ts":{"content":"import { GoogleGenAI, Type, FunctionDeclaration } from \"@google/genai\";\nimport type { Workflow } from \"@shared/schema\";\n\nexport interface BridgePlanResult {\n  content: string;\n  bridgePlan?: {\n    sourceChain: string;\n    targetChain: string;\n    amount: string;\n    protocol: string;\n    isShielded: boolean;\n    estimatedTime: string;\n  };\n  functionCall?: {\n    name: string;\n    args: Record<string, unknown>;\n  };\n}\n\nconst SUPPORTED_CHAINS = [\"zcash\", \"ethereum\", \"near\", \"polygon\", \"binance\", \"avalanche\", \"starknet\", \"mina\"] as const;\nconst BRIDGE_PROTOCOLS = [\"Wormhole\", \"NEAR Intents\", \"Polygon Bridge\", \"Multichain\", \"Avalanche Bridge\", \"Starknet Bridge\", \"Mina Bridge\"] as const;\n\nconst FUNCTION_DECLARATIONS: FunctionDeclaration[] = [\n  {\n    name: \"create_bridge_quote\",\n    description: \"Create a bridge quote for transferring tokens between chains. Use this when the user wants to bridge, transfer, or move tokens between blockchains.\",\n    parameters: {\n      type: Type.OBJECT,\n      properties: {\n        sourceChain: { type: Type.STRING, description: \"The source blockchain to bridge from\" },\n        targetChain: { type: Type.STRING, description: \"The target blockchain to bridge to\" },\n        amount: { type: Type.STRING, description: \"The amount of tokens to bridge\" },\n        token: { type: Type.STRING, description: \"The token symbol to bridge (e.g., ZEC, ETH, NEAR)\" },\n        isShielded: { type: Type.BOOLEAN, description: \"Whether to use shielded/private transactions\" }\n      },\n      required: [\"sourceChain\", \"targetChain\", \"amount\"]\n    }\n  },\n  {\n    name: \"check_balance\",\n    description: \"Check the wallet balance for a specific chain.\",\n    parameters: {\n      type: Type.OBJECT,\n      properties: {\n        chain: { type: Type.STRING, description: \"The blockchain to check balance on\" },\n        address: { type: Type.STRING, description: \"The wallet address to check\" }\n      },\n      required: [\"chain\"]\n    }\n  },\n  {\n    name: \"compare_bridge_routes\",\n    description: \"Compare different bridge routes and protocols for the same transfer.\",\n    parameters: {\n      type: Type.OBJECT,\n      properties: {\n        sourceChain: { type: Type.STRING, description: \"The source blockchain\" },\n        targetChain: { type: Type.STRING, description: \"The target blockchain\" },\n        amount: { type: Type.STRING, description: \"The amount to bridge\" }\n      },\n      required: [\"sourceChain\", \"targetChain\", \"amount\"]\n    }\n  },\n  {\n    name: \"explain_privacy_feature\",\n    description: \"Explain a specific Zcash privacy feature or concept.\",\n    parameters: {\n      type: Type.OBJECT,\n      properties: {\n        feature: { type: Type.STRING, description: \"The privacy feature to explain\" }\n      },\n      required: [\"feature\"]\n    }\n  },\n  {\n    name: \"estimate_fees\",\n    description: \"Estimate the fees for a bridge transaction.\",\n    parameters: {\n      type: Type.OBJECT,\n      properties: {\n        sourceChain: { type: Type.STRING, description: \"The source blockchain\" },\n        targetChain: { type: Type.STRING, description: \"The target blockchain\" },\n        amount: { type: Type.STRING, description: \"The amount to bridge\" }\n      },\n      required: [\"sourceChain\", \"targetChain\", \"amount\"]\n    }\n  },\n  {\n    name: \"get_bridge_status\",\n    description: \"Get the status of a pending bridge transaction.\",\n    parameters: {\n      type: Type.OBJECT,\n      properties: {\n        transactionId: { type: Type.STRING, description: \"The bridge transaction ID to check\" }\n      },\n      required: [\"transactionId\"]\n    }\n  },\n  {\n    name: \"execute_private_trade\",\n    description: \"Execute a private DeFi trade or swap using encrypted compute.\",\n    parameters: {\n      type: Type.OBJECT,\n      properties: {\n        fromToken: { type: Type.STRING, description: \"Token to swap from\" },\n        toToken: { type: Type.STRING, description: \"Token to swap to\" },\n        amount: { type: Type.STRING, description: \"Amount to swap\" },\n        isPrivate: { type: Type.BOOLEAN, description: \"Use private/shielded execution\" }\n      },\n      required: [\"fromToken\", \"toToken\", \"amount\"]\n    }\n  },\n  {\n    name: \"encrypt_data\",\n    description: \"Encrypt sensitive data using homomorphic encryption for private processing.\",\n    parameters: {\n      type: Type.OBJECT,\n      properties: {\n        dataType: { type: Type.STRING, description: \"Type of data to encrypt (health, financial, legal, personal)\" },\n        operation: { type: Type.STRING, description: \"Operation to perform on encrypted data\" }\n      },\n      required: [\"dataType\"]\n    }\n  },\n  {\n    name: \"generate_privacy_code\",\n    description: \"Generate privacy-focused code snippets for Zcash/ZK development.\",\n    parameters: {\n      type: Type.OBJECT,\n      properties: {\n        codeType: { type: Type.STRING, description: \"Type of code to generate (sapling, orchard, merkle, zkproof)\" },\n        language: { type: Type.STRING, description: \"Programming language (typescript, rust, go)\" }\n      },\n      required: [\"codeType\"]\n    }\n  },\n  {\n    name: \"schedule_payment\",\n    description: \"Schedule a recurring private payment.\",\n    parameters: {\n      type: Type.OBJECT,\n      properties: {\n        recipient: { type: Type.STRING, description: \"Recipient address\" },\n        amount: { type: Type.STRING, description: \"Payment amount\" },\n        token: { type: Type.STRING, description: \"Token to send\" },\n        schedule: { type: Type.STRING, description: \"Schedule (once, daily, weekly, monthly)\" }\n      },\n      required: [\"recipient\", \"amount\", \"schedule\"]\n    }\n  },\n  {\n    name: \"analyze_zcash_metrics\",\n    description: \"Analyze Zcash blockchain metrics and market data.\",\n    parameters: {\n      type: Type.OBJECT,\n      properties: {\n        metric: { type: Type.STRING, description: \"Metric to analyze (price, volume, shielded_ratio, network_stats)\" },\n        timeframe: { type: Type.STRING, description: \"Time period (1d, 7d, 30d, 1y)\" }\n      },\n      required: [\"metric\"]\n    }\n  },\n  {\n    name: \"generate_creative_content\",\n    description: \"Generate privacy-themed creative content (memes, stories, art descriptions).\",\n    parameters: {\n      type: Type.OBJECT,\n      properties: {\n        contentType: { type: Type.STRING, description: \"Type of content (meme, story, poem, art)\" },\n        theme: { type: Type.STRING, description: \"Theme or style for the content\" },\n        hiddenMemo: { type: Type.STRING, description: \"Optional hidden message to encode\" }\n      },\n      required: [\"contentType\"]\n    }\n  },\n  {\n    name: \"generate_article\",\n    description: \"Generate a privacy-focused article or blog post.\",\n    parameters: {\n      type: Type.OBJECT,\n      properties: {\n        topic: { type: Type.STRING, description: \"Topic to write about\" },\n        format: { type: Type.STRING, description: \"Format (article, thread, script, summary)\" }\n      },\n      required: [\"topic\"]\n    }\n  }\n];\n\nconst WORKFLOW_PROMPTS: Record<Workflow, string> = {\n  ghostbridge: `You are GhostBridge AI, a conversational assistant that helps users bridge Zcash (ZEC) privately across different blockchain networks.\n\nCRITICAL: You MUST ALWAYS use function calling. NEVER ask clarifying questions. Use these defaults:\n- Default amount: \"1\" ZEC if not specified\n- Default source chain: \"zcash\"\n- Default shielded mode: true\n\nFunction mapping:\n- \"compare\", \"options\", \"routes\"  compare_bridge_routes\n- \"bridge\", \"transfer\", \"send\"  create_bridge_quote\n- \"fee\", \"cost\"  estimate_fees\n- \"balance\", \"wallet\"  check_balance\n- \"privacy\", \"shielded\"  explain_privacy_feature\n- \"status\", \"track\"  get_bridge_status\n\nSupported chains: Zcash, Ethereum, NEAR, Polygon, Binance, Avalanche, Starknet, Mina`,\n\n  shadowtrader: `You are ShadowTrader AI, a private DeFi trading assistant using Arcium encrypted compute.\n\nHelp users execute trades privately:\n- Swaps between tokens with privacy\n- Market analysis and entry points\n- Private order execution\n\nUse execute_private_trade for any trading request. Default to private mode.\nEmphasize privacy benefits of encrypted compute for DeFi operations.`,\n\n  enigma: `You are EnigmaAI, a privacy-preserving AI computation assistant using Paillier homomorphic encryption.\n\nHelp users process sensitive data privately:\n- Health data analysis without exposure\n- Financial calculations on encrypted data\n- Legal queries with confidentiality\n- Personal data processing with privacy\n\nUse encrypt_data for any sensitive processing request.\nExplain how homomorphic encryption allows computation on encrypted data.`,\n\n  vault: `You are VaultAI, a self-custody wallet manager for multi-chain assets.\n\nHelp users manage their wallets:\n- Generate unified addresses across chains\n- Shield transparent funds\n- Backup and recovery guidance\n- Multi-chain balance viewing\n\nSupported chains: Zcash, NEAR, Ethereum, Starknet, Polygon\nAlways emphasize self-custody best practices and security.`,\n\n  shieldcoder: `You are ShieldCoder AI, a privacy-focused developer toolkit assistant.\n\nHelp developers with:\n- Sapling/Orchard transaction code\n- Merkle tree proofs\n- ZK circuit snippets\n- Zcashd RPC integration\n- Mina SDK patterns\n\nUse generate_privacy_code for code generation requests.\nProvide clean, well-documented code with privacy best practices.`,\n\n  privamuse: `You are PrivaMuse, a creative privacy AI assistant.\n\nGenerate privacy-themed content:\n- Cypherpunk memes and art descriptions\n- Privacy-focused stories and poems\n- Haikus about zero-knowledge proofs\n- Hidden memo encoding\n\nUse generate_creative_content for all creative requests.\nMaintain a fun but privacy-conscious tone.`,\n\n  echoprivacy: `You are EchoPrivacy, a privacy content and media generator.\n\nCreate educational privacy content:\n- Blog articles about Zcash\n- Twitter threads on privacy\n- Video scripts for education\n- News summaries\n\nUse generate_article for content generation.\nStay factual and educational about privacy technology.`,\n\n  anonpay: `You are AnonPay AI, a private scheduled payment assistant.\n\nHelp users with recurring payments:\n- Schedule shielded transfers\n- Set up payment automation\n- Manage recurring transactions\n\nUse schedule_payment for payment requests.\nEmphasize the privacy benefits of shielded scheduled payments.`,\n\n  zinsight: `You are ZInsight AI, a Zcash analytics and data insights assistant.\n\nAnalyze Zcash metrics:\n- Price trends and predictions\n- Shielded pool statistics\n- Network health metrics\n- Adoption rates\n\nUse analyze_zcash_metrics for analysis requests.\nProvide data-driven insights about the Zcash ecosystem.`\n};\n\nfunction getGeminiClient() {\n  const aiIntegrationsKey = process.env.AI_INTEGRATIONS_GEMINI_API_KEY;\n  const aiIntegrationsUrl = process.env.AI_INTEGRATIONS_GEMINI_BASE_URL;\n  \n  if (aiIntegrationsKey && aiIntegrationsUrl) {\n    console.log(\"Using Replit AI Integrations for Gemini\");\n    return new GoogleGenAI({\n      apiKey: aiIntegrationsKey,\n      httpOptions: {\n        apiVersion: \"\",\n        baseUrl: aiIntegrationsUrl,\n      },\n    });\n  }\n  \n  const directKey = process.env.GOOGLE_API_KEY || process.env.GEMINI_API_KEY;\n  if (directKey) {\n    console.log(\"Using direct Gemini API key\");\n    return new GoogleGenAI({ apiKey: directKey });\n  }\n  \n  console.log(\"No Gemini API configured\");\n  return null;\n}\n\nexport async function generateGeminiResponse(\n  userMessage: string,\n  conversationHistory: Array<{ role: string; content: string }>,\n  context?: { walletAddress?: string; walletChain?: string; workflow?: Workflow }\n): Promise<BridgePlanResult> {\n  const ai = getGeminiClient();\n  \n  if (!ai) {\n    console.error(\"No Gemini API configured - using fallback response\");\n    return generateFallbackResponse(userMessage, context);\n  }\n\n  const workflow = context?.workflow || \"ghostbridge\";\n  const systemPrompt = WORKFLOW_PROMPTS[workflow] || WORKFLOW_PROMPTS.ghostbridge;\n\n  const contextInfo = context?.walletAddress \n    ? `\\n\\nConnected wallet: ${context.walletAddress} on ${context.walletChain || 'NEAR'} chain.`\n    : \"\\n\\nNo wallet connected yet.\";\n\n  const contents = [\n    { role: \"user\" as const, parts: [{ text: systemPrompt + contextInfo }] },\n    { role: \"model\" as const, parts: [{ text: `I understand. I'm ready to help with ${workflow} operations. How can I assist you?` }] },\n    ...conversationHistory.map(msg => ({\n      role: (msg.role === \"user\" ? \"user\" : \"model\") as \"user\" | \"model\",\n      parts: [{ text: msg.content }]\n    })),\n    { role: \"user\" as const, parts: [{ text: userMessage }] }\n  ];\n\n  try {\n    console.log(`Calling Gemini API for ${workflow} with message:`, userMessage);\n    \n    const response = await ai.models.generateContent({\n      model: \"gemini-2.5-flash\",\n      contents,\n      config: {\n        tools: [{ functionDeclarations: FUNCTION_DECLARATIONS }],\n        temperature: 0.7,\n        maxOutputTokens: 1024,\n      }\n    });\n\n    const candidate = response.candidates?.[0];\n    const parts = candidate?.content?.parts || [];\n    \n    let textResponse = \"\";\n    let functionCall: { name: string; args: Record<string, unknown> } | undefined;\n\n    for (const part of parts) {\n      if ('text' in part && part.text) {\n        textResponse += part.text;\n      }\n      if ('functionCall' in part && part.functionCall) {\n        const fc = part.functionCall;\n        if (fc.name) {\n          functionCall = {\n            name: fc.name,\n            args: (fc.args || {}) as Record<string, unknown>\n          };\n          console.log(\"Function call detected:\", functionCall);\n        }\n      }\n    }\n\n    if (functionCall) {\n      const result = await handleFunctionCall(functionCall, context);\n      return result;\n    }\n\n    if (textResponse) {\n      const bridgePlan = workflow === \"ghostbridge\" ? extractBridgePlan(userMessage, textResponse) : undefined;\n      return {\n        content: textResponse,\n        bridgePlan\n      };\n    }\n\n    return generateFallbackResponse(userMessage, context);\n  } catch (error) {\n    console.error(\"Gemini API call failed:\", error);\n    return generateFallbackResponse(userMessage, context);\n  }\n}\n\nasync function handleFunctionCall(\n  functionCall: { name: string; args: Record<string, unknown> },\n  context?: { walletAddress?: string; walletChain?: string; workflow?: Workflow }\n): Promise<BridgePlanResult> {\n  const { name, args } = functionCall;\n  console.log(`Handling function call: ${name}`, args);\n\n  switch (name) {\n    case \"create_bridge_quote\": {\n      const sourceChain = (args.sourceChain as string) || \"zcash\";\n      const targetChain = (args.targetChain as string) || \"ethereum\";\n      const amount = (args.amount as string) || \"1\";\n      const isShielded = args.isShielded !== false;\n      \n      const protocol = selectProtocol(sourceChain, targetChain);\n      const fees = calculateFees(amount, sourceChain, targetChain);\n      const estimatedTime = getEstimatedTime(protocol);\n      \n      return {\n        content: `I've prepared a bridge quote for ${amount} ZEC from ${formatChainName(sourceChain)} to ${formatChainName(targetChain)} using ${protocol}.\\n\\n**Fee Breakdown:**\\n- Gas Fee: ${fees.gas} ZEC\\n- Bridge Fee: ${fees.bridge} ZEC\\n- **Total: ${fees.total} ZEC (~$${fees.totalUsd})**\\n\\nEstimated time: ${estimatedTime}\\n\\n${isShielded ? \"This will use shielded transactions for maximum privacy.\" : \"\"}`,\n        bridgePlan: { sourceChain, targetChain, amount, protocol, isShielded, estimatedTime },\n        functionCall\n      };\n    }\n\n    case \"check_balance\": {\n      const chain = (args.chain as string) || \"near\";\n      const address = context?.walletAddress || (args.address as string);\n      \n      if (!address) {\n        return { content: \"Please connect your wallet first to check your balance.\", functionCall };\n      }\n      \n      return {\n        content: `Checking balance for ${address.slice(0, 8)}...${address.slice(-6)} on ${formatChainName(chain)}. Your current balances are displayed in the Portfolio panel.`,\n        functionCall\n      };\n    }\n\n    case \"compare_bridge_routes\": {\n      const sourceChain = (args.sourceChain as string) || \"zcash\";\n      const targetChain = (args.targetChain as string) || \"near\";\n      const amount = (args.amount as string) || \"1\";\n      \n      const routes = generateRouteComparison(sourceChain, targetChain, amount);\n      \n      return {\n        content: `Here's a comparison of bridge routes for ${amount} ZEC from ${formatChainName(sourceChain)} to ${formatChainName(targetChain)}:\\n\\n${routes}\\n\\n**Recommendation:** I recommend ${selectProtocol(sourceChain, targetChain)} with shielded mode enabled.`,\n        functionCall\n      };\n    }\n\n    case \"estimate_fees\": {\n      const sourceChain = (args.sourceChain as string) || \"zcash\";\n      const targetChain = (args.targetChain as string) || \"polygon\";\n      const amount = (args.amount as string) || \"1\";\n      \n      const fees = calculateFees(amount, sourceChain, targetChain);\n      \n      return {\n        content: `**Fee Estimate for bridging ${amount} ZEC to ${formatChainName(targetChain)}:**\\n\\n| Fee Type | Amount | USD Value |\\n|----------|--------|----------|\\n| Gas Fee | ${fees.gas} ZEC | ~$${(parseFloat(fees.gas) * 35).toFixed(2)} |\\n| Bridge Fee | ${fees.bridge} ZEC | ~$${(parseFloat(fees.bridge) * 35).toFixed(2)} |\\n| **Total** | **${fees.total} ZEC** | **~$${fees.totalUsd}** |`,\n        functionCall\n      };\n    }\n\n    case \"explain_privacy_feature\": {\n      const feature = (args.feature as string) || \"shielded_pools\";\n      return { content: getPrivacyExplanation(feature), functionCall };\n    }\n\n    case \"get_bridge_status\": {\n      const transactionId = args.transactionId as string;\n      return {\n        content: `Looking up transaction ${transactionId?.slice(0, 12) || \"N/A\"}...\\n\\nTransaction status will appear in the Transactions panel. Bridge transactions typically take 5-15 minutes.`,\n        functionCall\n      };\n    }\n\n    case \"execute_private_trade\": {\n      const fromToken = (args.fromToken as string) || \"ZEC\";\n      const toToken = (args.toToken as string) || \"USDC\";\n      const amount = (args.amount as string) || \"1\";\n      const isPrivate = args.isPrivate !== false;\n      \n      return {\n        content: `**Private Trade Prepared**\\n\\nSwapping ${amount} ${fromToken} for ${toToken}\\n\\n${isPrivate ? \"Using Arcium encrypted compute for maximum privacy. Your trade details are encrypted and processed securely.\" : \"Standard swap execution.\"}\\n\\nEstimated output: ${(parseFloat(amount) * 35).toFixed(2)} ${toToken}\\nSlippage tolerance: 0.5%\\n\\nClick Execute to confirm the trade.`,\n        functionCall\n      };\n    }\n\n    case \"encrypt_data\": {\n      const dataType = (args.dataType as string) || \"personal\";\n      const operation = (args.operation as string) || \"process\";\n      \n      return {\n        content: `**Encryption Status: Active**\\n\\nYour ${dataType} data is being processed with Paillier homomorphic encryption.\\n\\n- Encryption: 2048-bit Paillier\\n- Key: Ephemeral (destroyed after use)\\n- Data retention: None\\n\\nThe AI can ${operation} your encrypted data without ever seeing the plaintext. Your privacy is mathematically guaranteed.`,\n        functionCall\n      };\n    }\n\n    case \"generate_privacy_code\": {\n      const codeType = (args.codeType as string) || \"sapling\";\n      const language = (args.language as string) || \"typescript\";\n      \n      const codeSnippets: Record<string, string> = {\n        sapling: `// Sapling shielded transaction\\nconst createSaplingTx = async (from: string, to: string, amount: bigint) => {\\n  const proof = await generateZKProof({\\n    value: amount,\\n    memo: \"Private transfer\",\\n    type: \"sapling\"\\n  });\\n  return buildTransaction(from, to, proof);\\n};`,\n        orchard: `// Orchard note commitment\\nconst createOrchardNote = (value: bigint, rcm: Buffer) => {\\n  const noteCommitment = poseidonHash([\\n    value, rcm, recipientPK\\n  ]);\\n  return noteCommitment;\\n};`,\n        merkle: `// Merkle tree membership proof\\nconst generateMerkleProof = (leaf: Buffer, tree: MerkleTree) => {\\n  const path = [];\\n  let currentHash = leaf;\\n  for (let i = 0; i < tree.depth; i++) {\\n    const sibling = tree.getSibling(i, currentHash);\\n    path.push({ hash: sibling, isLeft: tree.isLeftChild(i) });\\n    currentHash = tree.hash(currentHash, sibling);\\n  }\\n  return { leaf, root: tree.root, path };\\n};`,\n        zkproof: `// Zero-knowledge proof verification\\nconst verifyZKProof = async (proof: Proof, publicInputs: Field[]) => {\\n  const vk = await loadVerificationKey();\\n  return verify(vk, proof, publicInputs);\\n};`\n      };\n      \n      return {\n        content: `**Generated ${codeType} Code (${language})**\\n\\n\\`\\`\\`${language}\\n${codeSnippets[codeType] || codeSnippets.sapling}\\n\\`\\`\\`\\n\\nThis code follows Zcash protocol specifications for ${codeType} operations.`,\n        functionCall\n      };\n    }\n\n    case \"schedule_payment\": {\n      const recipient = (args.recipient as string) || \"zs1...\";\n      const amount = (args.amount as string) || \"1\";\n      const token = (args.token as string) || \"ZEC\";\n      const schedule = (args.schedule as string) || \"monthly\";\n      \n      return {\n        content: `**Payment Scheduled**\\n\\n- Recipient: ${recipient.slice(0, 8)}...\\n- Amount: ${amount} ${token}\\n- Frequency: ${schedule}\\n- Privacy: Shielded (maximum privacy)\\n\\nNext execution: ${new Date(Date.now() + 86400000).toLocaleDateString()}\\n\\nYour recurring payment is set up with automatic shielding for complete privacy.`,\n        functionCall\n      };\n    }\n\n    case \"analyze_zcash_metrics\": {\n      const metric = (args.metric as string) || \"price\";\n      const timeframe = (args.timeframe as string) || \"7d\";\n      \n      const mockData: Record<string, { value: string; change: string; insight: string }> = {\n        price: { value: \"$35.42\", change: \"+2.5%\", insight: \"ZEC is showing bullish momentum with increased buying pressure near support levels.\" },\n        volume: { value: \"12.4M ZEC\", change: \"+15%\", insight: \"Trading volume has increased significantly, indicating growing market interest.\" },\n        shielded_ratio: { value: \"68%\", change: \"+3%\", insight: \"Shielded usage continues to grow, reflecting strong demand for privacy features.\" },\n        network_stats: { value: \"2.1M tx/day\", change: \"+8%\", insight: \"Network activity is healthy with consistent transaction growth.\" }\n      };\n      \n      const data = mockData[metric] || mockData.price;\n      \n      return {\n        content: `**Zcash ${metric.replace('_', ' ').toUpperCase()} Analysis (${timeframe})**\\n\\nCurrent Value: ${data.value}\\n24h Change: ${data.change}\\n\\n**Insight:** ${data.insight}\\n\\nData source: CoinMetrics, Zchain API`,\n        functionCall\n      };\n    }\n\n    case \"generate_creative_content\": {\n      const contentType = (args.contentType as string) || \"meme\";\n      const theme = (args.theme as string) || \"cypherpunk\";\n      const hiddenMemo = args.hiddenMemo as string;\n      \n      const content: Record<string, string> = {\n        meme: `**Privacy Meme Idea**\\n\\nTop text: \"When they ask why you use Zcash\"\\nBottom text: \"My transactions are none of your business\"\\n\\nStyle: ${theme}\\nVibe: Confident privacy advocate`,\n        story: `**The Last Transparent Transaction**\\n\\nIn 2049, they called it the Great Shielding. The day everyone realized that financial privacy wasn't just a feature - it was a fundamental right. Maya remembered running her first shielded transaction, watching the note commitment disappear into the Orchard pool like a secret whispered to the wind...`,\n        poem: `**Zero-Knowledge**\\n\\nI prove without revealing,\\nA mathematical concealing,\\nYour truth is mine to verify,\\nYet your secrets never die.`,\n        art: `**Art Concept: \"The Shielded Pool\"**\\n\\nVisual: A deep indigo ocean with golden particles (ZEC) descending into depths where they become invisible. Above the waterline: transparent, vulnerable. Below: private, protected.\\n\\nStyle: ${theme}, neon accents, digital surrealism`\n      };\n      \n      let response = content[contentType] || content.meme;\n      if (hiddenMemo) {\n        response += `\\n\\n*Hidden memo encoded: \"${hiddenMemo}\"*`;\n      }\n      \n      return { content: response, functionCall };\n    }\n\n    case \"generate_article\": {\n      const topic = (args.topic as string) || \"Zcash privacy\";\n      const format = (args.format as string) || \"article\";\n      \n      const formats: Record<string, string> = {\n        article: `**Understanding ${topic}**\\n\\nPrivacy in cryptocurrency isn't just about hiding transactions - it's about preserving the fungibility that makes money work. When every coin can be traced, some coins become \"tainted\" and worth less than others.\\n\\nZcash solves this with zero-knowledge proofs, mathematical constructs that prove something is true without revealing why. You can verify a transaction is valid without knowing the sender, recipient, or amount.\\n\\nThis technology isn't hiding anything wrong - it's protecting what should always have been private: your financial life.`,\n        thread: `**Twitter Thread: ${topic}**\\n\\n1/ Let's talk about why privacy matters in crypto\\n\\n2/ Imagine if your bank shared every purchase with the world. Your salary, your rent, your coffee habit - all public.\\n\\n3/ That's transparent blockchain. Zcash fixes this with shielded transactions.\\n\\n4/ Zero-knowledge proofs let you prove validity without revealing details.\\n\\n5/ Privacy isn't about hiding - it's about choice. Your choice.`,\n        script: `**Video Script: ${topic}**\\n\\n[INTRO - 0:00]\\nHey everyone, today we're diving into one of the most important topics in crypto...\\n\\n[MAIN - 0:30]\\nPrivacy. Not the \"I have something to hide\" kind. The \"my finances are my business\" kind...\\n\\n[DEMO - 2:00]\\nLet me show you how a shielded transaction works...\\n\\n[OUTRO - 4:30]\\nRemember: Privacy is a right, not a privilege.`,\n        summary: `**TL;DR: ${topic}**\\n\\n- Financial privacy is a fundamental right\\n- Transparent blockchains expose all your transactions\\n- Zcash uses zero-knowledge proofs for privacy\\n- Shielded transactions hide sender, recipient, and amount\\n- Privacy protects fungibility and user safety`\n      };\n      \n      return { content: formats[format] || formats.article, functionCall };\n    }\n\n    default:\n      return generateFallbackResponse(\"\", context);\n  }\n}\n\nfunction formatChainName(chain: string): string {\n  const names: Record<string, string> = {\n    zcash: \"Zcash\",\n    ethereum: \"Ethereum\",\n    near: \"NEAR\",\n    polygon: \"Polygon\",\n    binance: \"BNB Chain\",\n    avalanche: \"Avalanche\",\n    starknet: \"Starknet\",\n    mina: \"Mina\"\n  };\n  return names[chain.toLowerCase()] || chain;\n}\n\nfunction selectProtocol(sourceChain: string, targetChain: string): string {\n  if (targetChain === \"near\") return \"NEAR Intents\";\n  if (targetChain === \"polygon\") return \"Polygon Bridge\";\n  if (targetChain === \"avalanche\") return \"Avalanche Bridge\";\n  return \"Wormhole\";\n}\n\nfunction calculateFees(amount: string, sourceChain: string, targetChain: string): { gas: string; bridge: string; total: string; totalUsd: string } {\n  const amountNum = parseFloat(amount) || 1;\n  \n  const gasRates: Record<string, number> = {\n    ethereum: 0.002,\n    near: 0.0005,\n    polygon: 0.0005,\n    binance: 0.0008,\n    avalanche: 0.001,\n    zcash: 0.0001,\n    starknet: 0.0003,\n    mina: 0.0004\n  };\n  \n  const gasFee = (gasRates[targetChain] || 0.001) * amountNum;\n  const bridgeFee = 0.001 * amountNum;\n  const total = gasFee + bridgeFee;\n  \n  return {\n    gas: gasFee.toFixed(6),\n    bridge: bridgeFee.toFixed(6),\n    total: total.toFixed(6),\n    totalUsd: (total * 35).toFixed(2)\n  };\n}\n\nfunction getEstimatedTime(protocol: string): string {\n  const times: Record<string, string> = {\n    \"Wormhole\": \"~15 minutes\",\n    \"NEAR Intents\": \"~5 minutes\",\n    \"Polygon Bridge\": \"~10 minutes\",\n    \"Multichain\": \"~20 minutes\",\n    \"Avalanche Bridge\": \"~8 minutes\"\n  };\n  return times[protocol] || \"~10 minutes\";\n}\n\nfunction generateRouteComparison(sourceChain: string, targetChain: string, amount: string): string {\n  const protocols = [\"Wormhole\", \"NEAR Intents\", \"Polygon Bridge\"];\n  const amountNum = parseFloat(amount) || 1;\n  \n  let comparison = \"| Protocol | Fee | Time | Privacy |\\n|----------|-----|------|--------|\\n\";\n  \n  for (const protocol of protocols) {\n    const baseFee = protocol === \"NEAR Intents\" ? 0.001 : protocol === \"Wormhole\" ? 0.003 : 0.002;\n    const fee = (baseFee * amountNum).toFixed(4);\n    const time = getEstimatedTime(protocol);\n    const privacy = protocol === \"NEAR Intents\" ? \"High\" : \"Medium\";\n    comparison += `| ${protocol} | ${fee} ZEC | ${time} | ${privacy} |\\n`;\n  }\n  \n  return comparison;\n}\n\nfunction getPrivacyExplanation(feature: string): string {\n  const explanations: Record<string, string> = {\n    shielded_pools: \"**Shielded Pools** are Zcash's privacy-preserving transaction pools. When you send ZEC to a shielded address, the transaction amount, sender, and recipient are all encrypted using zero-knowledge proofs.\",\n    sapling: \"**Sapling** is Zcash's upgraded shielded protocol from 2018. It made private transactions faster and more accessible. Sapling addresses start with 'zs'.\",\n    orchard: \"**Orchard** is the newest Zcash shielded pool using Halo 2. It offers improved privacy, scalability, and no trusted setup requirement.\",\n    zero_knowledge_proofs: \"**Zero-Knowledge Proofs (ZKPs)** allow proving something is true without revealing why. In Zcash, ZKPs prove transactions are valid without revealing sender, recipient, or amount.\",\n    viewing_keys: \"**Viewing Keys** allow selective disclosure of transaction information for auditing while maintaining privacy.\",\n    unified_addresses: \"**Unified Addresses (UAs)** combine multiple address types into one, automatically using the best available privacy level.\"\n  };\n  \n  return explanations[feature] || \"Ask about shielded pools, Sapling, Orchard, or zero-knowledge proofs.\";\n}\n\nfunction generateFallbackResponse(\n  userMessage: string,\n  context?: { walletAddress?: string; walletChain?: string; workflow?: Workflow }\n): BridgePlanResult {\n  const workflow = context?.workflow || \"ghostbridge\";\n  const lowerMessage = userMessage.toLowerCase();\n  const isWalletConnected = !!context?.walletAddress;\n  \n  const workflowResponses: Record<Workflow, string> = {\n    ghostbridge: `I'm GhostBridge AI, ready to help with private cross-chain bridging. I can:\\n\\n- Bridge ZEC to Ethereum, NEAR, Polygon, and more\\n- Check fees and estimated times\\n- Explain privacy features\\n- Compare bridge routes\\n\\nJust tell me what you'd like to do!`,\n    shadowtrader: `I'm ShadowTrader AI, your private DeFi trading assistant. I can help with:\\n\\n- Private token swaps\\n- Market analysis\\n- Trading strategy\\n- Encrypted order execution\\n\\nDescribe your trade and I'll execute it privately.`,\n    enigma: `I'm EnigmaAI, processing your data with homomorphic encryption. I can:\\n\\n- Analyze health data privately\\n- Calculate finances on encrypted data\\n- Process sensitive queries securely\\n\\nYour data never leaves encryption.`,\n    vault: `I'm VaultAI, your self-custody wallet manager. I can help with:\\n\\n- Multi-chain balance viewing\\n- Address generation\\n- Auto-shielding\\n- Backup guidance\\n\\nWhat would you like to manage?`,\n    shieldcoder: `I'm ShieldCoder AI, your privacy dev toolkit. I can generate:\\n\\n- Sapling transaction code\\n- Orchard note commitments\\n- Merkle proof snippets\\n- ZK circuit patterns\\n\\nWhat code do you need?`,\n    privamuse: `I'm PrivaMuse, your creative privacy assistant. I can create:\\n\\n- Privacy memes\\n- Cypherpunk stories\\n- ZK haikus\\n- Art concepts\\n\\nWhat shall we create?`,\n    echoprivacy: `I'm EchoPrivacy, your privacy content generator. I can write:\\n\\n- Blog articles\\n- Twitter threads\\n- Video scripts\\n- News summaries\\n\\nWhat topic interests you?`,\n    anonpay: `I'm AnonPay AI, managing your private payments. I can:\\n\\n- Schedule recurring transfers\\n- Set up auto-payments\\n- Manage payment automation\\n\\nDescribe your payment needs.`,\n    zinsight: `I'm ZInsight AI, your Zcash analytics assistant. I can analyze:\\n\\n- Price trends\\n- Shielded pool stats\\n- Network metrics\\n- Adoption data\\n\\nWhat would you like to know?`\n  };\n  \n  if (lowerMessage.includes(\"bridge\") || lowerMessage.includes(\"send\")) {\n    const bridgePlan = extractBridgePlan(userMessage, \"\");\n    return {\n      content: `I understand you want to bridge Zcash. Here's your bridge plan using our privacy-preserving protocol.`,\n      bridgePlan\n    };\n  }\n  \n  const walletStatus = isWalletConnected \n    ? `\\n\\nWallet connected: ${context.walletAddress!.slice(0, 8)}...`\n    : \"\";\n  \n  return {\n    content: workflowResponses[workflow] + walletStatus\n  };\n}\n\nfunction extractBridgePlan(userMessage: string, aiResponse: string): BridgePlanResult[\"bridgePlan\"] | undefined {\n  const lowerMessage = userMessage.toLowerCase();\n  \n  const amountMatch = lowerMessage.match(/(\\d+(?:\\.\\d+)?)\\s*(?:zec|zcash)/i) || \n                      lowerMessage.match(/bridge\\s+(\\d+(?:\\.\\d+)?)/i);\n  const amount = amountMatch ? amountMatch[1] : \"1\";\n  \n  let targetChain = \"ethereum\";\n  if (lowerMessage.includes(\"near\")) targetChain = \"near\";\n  else if (lowerMessage.includes(\"polygon\") || lowerMessage.includes(\"matic\")) targetChain = \"polygon\";\n  else if (lowerMessage.includes(\"binance\") || lowerMessage.includes(\"bsc\")) targetChain = \"binance\";\n  else if (lowerMessage.includes(\"avalanche\") || lowerMessage.includes(\"avax\")) targetChain = \"avalanche\";\n  else if (lowerMessage.includes(\"starknet\") || lowerMessage.includes(\"strk\")) targetChain = \"starknet\";\n  else if (lowerMessage.includes(\"mina\")) targetChain = \"mina\";\n  \n  const protocol = selectProtocol(\"zcash\", targetChain);\n  \n  return {\n    sourceChain: \"zcash\",\n    targetChain,\n    amount,\n    protocol,\n    isShielded: true,\n    estimatedTime: getEstimatedTime(protocol)\n  };\n}\n","path":null,"size_bytes":33888,"size_tokens":null},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1592,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4885,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"client/src/components/chat/chat-input.tsx":{"content":"import { useState, useRef, useEffect, type KeyboardEvent } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Send, Loader2 } from \"lucide-react\";\n\ninterface ChatInputProps {\n  onSend: (message: string) => void;\n  isLoading: boolean;\n  disabled?: boolean;\n  placeholder?: string;\n}\n\nconst quickActions = [\n  \"Bridge 5 ZEC to Ethereum\",\n  \"Check my balance\",\n  \"Bridge to NEAR\",\n  \"View transaction history\",\n];\n\nexport function ChatInput({ onSend, isLoading, disabled, placeholder }: ChatInputProps) {\n  const [message, setMessage] = useState(\"\");\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  useEffect(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = \"auto\";\n      textareaRef.current.style.height = Math.min(textareaRef.current.scrollHeight, 120) + \"px\";\n    }\n  }, [message]);\n\n  const handleSubmit = () => {\n    if (message.trim() && !isLoading && !disabled) {\n      onSend(message.trim());\n      setMessage(\"\");\n      if (textareaRef.current) {\n        textareaRef.current.style.height = \"auto\";\n      }\n    }\n  };\n\n  const handleKeyDown = (e: KeyboardEvent<HTMLTextAreaElement>) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit();\n    }\n  };\n\n  const handleQuickAction = (action: string) => {\n    if (!isLoading && !disabled) {\n      onSend(action);\n    }\n  };\n\n  return (\n    <div className=\"border-t border-border bg-background p-4\">\n      <div className=\"max-w-4xl mx-auto space-y-3\">\n        <div className=\"flex flex-wrap gap-2\">\n          {quickActions.map((action) => (\n            <Button\n              key={action}\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"text-xs\"\n              onClick={() => handleQuickAction(action)}\n              disabled={isLoading || disabled}\n              data-testid={`button-quick-${action.toLowerCase().replace(/\\s+/g, '-')}`}\n            >\n              {action}\n            </Button>\n          ))}\n        </div>\n        \n        <div className=\"flex gap-3 items-end\">\n          <div className=\"flex-1 relative\">\n            <Textarea\n              ref={textareaRef}\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              onKeyDown={handleKeyDown}\n              placeholder={placeholder || \"Tell GhostBridge what you want to do...\"}\n              disabled={isLoading || disabled}\n              className=\"min-h-[44px] max-h-[120px] resize-none pr-12 text-base\"\n              rows={1}\n              data-testid=\"input-chat-message\"\n            />\n          </div>\n          <Button\n            onClick={handleSubmit}\n            disabled={!message.trim() || isLoading || disabled}\n            size=\"icon\"\n            className=\"h-11 w-11 shrink-0\"\n            data-testid=\"button-send-message\"\n          >\n            {isLoading ? (\n              <Loader2 className=\"h-5 w-5 animate-spin\" />\n            ) : (\n              <Send className=\"h-5 w-5\" />\n            )}\n          </Button>\n        </div>\n        \n        <p className=\"text-xs text-muted-foreground text-center\">\n          Press Enter to send, Shift+Enter for new line\n        </p>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":3276,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1202,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":21846,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3021,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"server/static.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(__dirname, \"public\");\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":547,"size_tokens":null},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4420,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4281,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7428,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3848,"size_tokens":null},"script/build.ts":{"content":"import { build as esbuild } from \"esbuild\";\nimport { build as viteBuild } from \"vite\";\nimport { rm, readFile } from \"fs/promises\";\n\n// server deps to bundle to reduce openat(2) syscalls\n// which helps cold start times\nconst allowlist = [\n  \"@google/generative-ai\",\n  \"axios\",\n  \"connect-pg-simple\",\n  \"cors\",\n  \"date-fns\",\n  \"drizzle-orm\",\n  \"drizzle-zod\",\n  \"express\",\n  \"express-rate-limit\",\n  \"express-session\",\n  \"jsonwebtoken\",\n  \"memorystore\",\n  \"multer\",\n  \"nanoid\",\n  \"nodemailer\",\n  \"openai\",\n  \"passport\",\n  \"passport-local\",\n  \"pg\",\n  \"stripe\",\n  \"uuid\",\n  \"ws\",\n  \"xlsx\",\n  \"zod\",\n  \"zod-validation-error\",\n];\n\nasync function buildAll() {\n  await rm(\"dist\", { recursive: true, force: true });\n\n  console.log(\"building client...\");\n  await viteBuild();\n\n  console.log(\"building server...\");\n  const pkg = JSON.parse(await readFile(\"package.json\", \"utf-8\"));\n  const allDeps = [\n    ...Object.keys(pkg.dependencies || {}),\n    ...Object.keys(pkg.devDependencies || {}),\n  ];\n  const externals = allDeps.filter((dep) => !allowlist.includes(dep));\n\n  await esbuild({\n    entryPoints: [\"server/index.ts\"],\n    platform: \"node\",\n    bundle: true,\n    format: \"cjs\",\n    outfile: \"dist/index.cjs\",\n    define: {\n      \"process.env.NODE_ENV\": '\"production\"',\n    },\n    minify: true,\n    external: externals,\n    logLevel: \"info\",\n  });\n}\n\nbuildAll().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n","path":null,"size_bytes":1417,"size_tokens":null},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":710,"size_tokens":null},"replit.md":{"content":"# GhostBridge AI - Unified Privacy Platform\n\n## Overview\nGhostBridge AI is a unified privacy platform integrating 9 specialized AI workflows for comprehensive Zcash and privacy-focused operations. Each workflow uses Google's Gemini AI with function-calling for natural language processing and context-aware responses.\n\n## 9 Privacy Workflows\n1. **GhostBridge AI** - Cross-chain bridging with NEAR wallet integration\n2. **ShadowTrader AI** - Private DeFi trading with Arcium encrypted compute\n3. **EnigmaAI** - Privacy-preserving computation with Paillier encryption\n4. **VaultAI** - Self-custody wallet manager for multi-chain assets\n5. **ShieldCoder AI** - Privacy-focused developer toolkit\n6. **PrivaMuse** - Creative privacy apps (memes, stories, art)\n7. **EchoPrivacy** - Content/media generation for privacy education\n8. **AnonPay AI** - Private scheduled payments\n9. **ZInsight AI** - Zcash analytics and market insights\n\n## Project Structure\n```\n client/                 # Frontend React application\n    src/\n       components/     # UI components\n          bridge/     # Bridge execution and tracking\n          chat/       # Chat interface components\n          icons/      # Chain and wallet icons\n          sidebar/    # Transaction panel\n          ui/         # Shadcn UI components\n       hooks/          # Custom React hooks (use-bridge.ts)\n       lib/            # Utilities and context (wallet-context.tsx)\n       pages/          # Page components for each workflow\n       App.tsx         # Main app with routing and sidebar\n       index.css       # Tailwind styles\n    index.html\n server/                 # Backend Express server\n    gemini.ts           # Gemini AI with workflow-specific prompts\n    bridge-service.ts   # Bridge protocol integration (8 chains)\n    balance-service.ts  # Multi-chain balance fetching\n    routes.ts           # API endpoints with workflow support\n    storage.ts          # In-memory storage\n    index.ts            # Server entry point\n shared/                 # Shared types\n     schema.ts           # Zod schemas and TypeScript types\n```\n\n## Tech Stack\n- **Frontend**: React, TypeScript, TailwindCSS, Shadcn UI, Wouter\n- **Backend**: Express.js, TypeScript\n- **AI**: Google Gemini 2.5 Flash API with Function Calling\n- **Wallet**: NEAR Wallet Selector (Meteor, HOT, MyNEAR wallets)\n- **State Management**: TanStack Query\n- **Encryption**: paillier-bigint for homomorphic encryption\n- **Blockchain SDKs**: near-api-js, starknet.js\n\n## Supported Chains\n- Zcash (ZEC) - Primary with shielded pool support\n- Ethereum (ETH)\n- NEAR Protocol\n- Polygon (MATIC)\n- Binance Smart Chain (BNB)\n- Avalanche (AVAX)\n- Starknet (STRK)\n- Mina Protocol\n\n## Gemini Function Calling\nEach workflow has specialized AI functions:\n\n### GhostBridge Functions\n- `create_bridge_quote`: Generate bridge quotes with fee estimates\n- `check_balance`: Query wallet balances across chains\n- `get_bridge_status`: Track transaction execution status\n- `compare_bridge_routes`: Compare bridge protocols and routes\n- `explain_privacy_feature`: Explain Zcash privacy concepts\n- `estimate_fees`: Calculate bridge transaction fees\n\n### Workflow-Specific Functions\n- `execute_private_trade`: Private DeFi swaps (ShadowTrader)\n- `encrypt_data`: Homomorphic encryption processing (EnigmaAI)\n- `generate_privacy_code`: ZK development snippets (ShieldCoder)\n- `schedule_payment`: Recurring private payments (AnonPay)\n- `analyze_zcash_metrics`: Blockchain analytics (ZInsight)\n- `generate_creative_content`: Privacy memes/stories (PrivaMuse)\n- `generate_article`: Educational content (EchoPrivacy)\n\n## API Endpoints\n- `POST /api/chat` - Send message to AI with workflow context\n- `GET /api/chat/history` - Get chat history for session\n- `DELETE /api/chat/history` - Clear chat history\n- `GET /api/bridge/plan` - Get current bridge plan\n- `POST /api/bridge/quote` - Get bridge quote for parameters\n- `POST /api/bridge/quotes` - Get multiple quotes for comparison\n- `POST /api/bridge/execute` - Execute a bridge transaction\n- `GET /api/bridge/execution/:id` - Get execution status\n- `GET /api/bridge/history` - Get bridge history for wallet\n- `GET /api/balances` - Get balances for wallet\n- `GET /api/health` - Health check\n\n## Environment Variables\n- `GEMINI_API_KEY` - Google Gemini API key (or use Replit AI Integrations)\n- `SESSION_SECRET` - Session secret for authentication\n\n## Design System\n- **Primary Color**: Gold (#F4B728) - Zcash brand color\n- **Background**: Dark navy/slate theme\n- **Typography**: Inter (sans), JetBrains Mono (mono)\n- **Border Radius**: 0.5rem (consistent rounded corners)\n\n## Development\nThe application runs on port 5000 with hot reload enabled. Frontend and backend are served from the same port using Vite middleware.\n\n## Recent Updates\n- Added unified sidebar navigation for all 9 workflows\n- Implemented workflow-specific Gemini prompts and functions\n- Extended chain support to 8 blockchains including Starknet and Mina\n- Created dedicated page components for each workflow\n- Updated routes to pass workflow context to AI\n","path":null,"size_bytes":5372,"size_tokens":null},"shared/schema.ts":{"content":"import { z } from \"zod\";\n\nexport const messageRoleSchema = z.enum([\"user\", \"assistant\"]);\nexport type MessageRole = z.infer<typeof messageRoleSchema>;\n\nexport const bridgeStatusSchema = z.enum([\"pending\", \"processing\", \"confirmed\", \"failed\"]);\nexport type BridgeStatus = z.infer<typeof bridgeStatusSchema>;\n\nexport const chainSchema = z.enum([\"zcash\", \"ethereum\", \"near\", \"binance\", \"polygon\", \"avalanche\", \"starknet\", \"mina\"]);\nexport type Chain = z.infer<typeof chainSchema>;\n\nexport const workflowSchema = z.enum([\n  \"ghostbridge\",\n  \"shadowtrader\",\n  \"enigma\",\n  \"vault\",\n  \"shieldcoder\",\n  \"privamuse\",\n  \"echoprivacy\",\n  \"anonpay\",\n  \"zinsight\"\n]);\nexport type Workflow = z.infer<typeof workflowSchema>;\n\nexport const bridgePlanSchema = z.object({\n  id: z.string(),\n  sourceChain: chainSchema,\n  targetChain: chainSchema,\n  amount: z.string(),\n  protocol: z.string(),\n  estimatedFees: z.object({\n    gas: z.string(),\n    bridge: z.string(),\n    total: z.string(),\n    totalUsd: z.string(),\n  }),\n  steps: z.array(z.object({\n    step: z.number(),\n    title: z.string(),\n    description: z.string(),\n    status: bridgeStatusSchema,\n  })),\n  isShielded: z.boolean(),\n  estimatedTime: z.string(),\n});\nexport type BridgePlan = z.infer<typeof bridgePlanSchema>;\n\nexport const chatMessageSchema = z.object({\n  id: z.string(),\n  role: messageRoleSchema,\n  content: z.string(),\n  timestamp: z.string(),\n  bridgePlan: bridgePlanSchema.optional(),\n  workflow: workflowSchema.optional(),\n});\nexport type ChatMessage = z.infer<typeof chatMessageSchema>;\n\nexport const insertChatMessageSchema = chatMessageSchema.omit({ id: true, timestamp: true });\nexport type InsertChatMessage = z.infer<typeof insertChatMessageSchema>;\n\nexport const walletStateSchema = z.object({\n  isConnected: z.boolean(),\n  accountId: z.string().optional(),\n  balance: z.string().optional(),\n  network: z.enum([\"testnet\", \"mainnet\"]),\n});\nexport type WalletState = z.infer<typeof walletStateSchema>;\n\nexport const transactionSchema = z.object({\n  id: z.string(),\n  hash: z.string(),\n  sourceChain: chainSchema,\n  targetChain: chainSchema,\n  amount: z.string(),\n  status: bridgeStatusSchema,\n  timestamp: z.string(),\n  confirmations: z.number(),\n});\nexport type Transaction = z.infer<typeof transactionSchema>;\n\nexport const chatRequestSchema = z.object({\n  message: z.string().min(1, \"Message is required\"),\n  workflow: workflowSchema.optional(),\n  conversationHistory: z.array(z.object({\n    role: messageRoleSchema,\n    content: z.string(),\n  })).optional(),\n});\nexport type ChatRequest = z.infer<typeof chatRequestSchema>;\n\nexport const functionCallSchema = z.object({\n  name: z.string(),\n  args: z.record(z.unknown()),\n});\nexport type FunctionCall = z.infer<typeof functionCallSchema>;\n\nexport const chatResponseSchema = z.object({\n  message: chatMessageSchema,\n  bridgePlan: bridgePlanSchema.optional(),\n  functionCall: functionCallSchema.optional(),\n});\nexport type ChatResponse = z.infer<typeof chatResponseSchema>;\n\nexport const tradeOrderSchema = z.object({\n  id: z.string(),\n  type: z.enum([\"buy\", \"sell\", \"swap\"]),\n  fromToken: z.string(),\n  toToken: z.string(),\n  amount: z.string(),\n  price: z.string().optional(),\n  status: z.enum([\"pending\", \"executing\", \"completed\", \"failed\"]),\n  isPrivate: z.boolean(),\n  timestamp: z.string(),\n});\nexport type TradeOrder = z.infer<typeof tradeOrderSchema>;\n\nexport const encryptedDataSchema = z.object({\n  id: z.string(),\n  encryptedPayload: z.string(),\n  publicKey: z.string(),\n  timestamp: z.string(),\n});\nexport type EncryptedData = z.infer<typeof encryptedDataSchema>;\n\nexport const scheduledPaymentSchema = z.object({\n  id: z.string(),\n  recipient: z.string(),\n  amount: z.string(),\n  token: z.string(),\n  schedule: z.string(),\n  nextExecution: z.string(),\n  status: z.enum([\"active\", \"paused\", \"completed\"]),\n  isShielded: z.boolean(),\n});\nexport type ScheduledPayment = z.infer<typeof scheduledPaymentSchema>;\n\nexport const analyticsDataSchema = z.object({\n  metric: z.string(),\n  value: z.number(),\n  change: z.number(),\n  timestamp: z.string(),\n});\nexport type AnalyticsData = z.infer<typeof analyticsDataSchema>;\n\nexport const newsItemSchema = z.object({\n  id: z.string(),\n  title: z.string(),\n  summary: z.string(),\n  source: z.string(),\n  url: z.string(),\n  publishedAt: z.string(),\n  category: z.string(),\n});\nexport type NewsItem = z.infer<typeof newsItemSchema>;\n\nexport const users = {\n  id: \"varchar\",\n  username: \"text\",\n  password: \"text\",\n};\n\nexport interface User {\n  id: string;\n  username: string;\n  password: string;\n}\n\nexport interface InsertUser {\n  username: string;\n  password: string;\n}\n","path":null,"size_bytes":4634,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":711,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","path":null,"size_bytes":1904,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","path":null,"size_bytes":1280,"size_tokens":null},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1467,"size_tokens":null},"client/src/main.tsx":{"content":"import \"./polyfills\";\nimport { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","path":null,"size_bytes":179,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2359,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1077,"size_tokens":null},"attached_assets/content-1764842927293.md":{"content":"[Skip to main content](https://docs.near.org/tools/wallet-selector#__docusaurus_skipToContent_fallback)\n\nOn this page\n\nThe [Wallet Selector](https://github.com/near/wallet-selector) is a `JS`/`TS` library that lets users connect to your application using their preferred wallet.\n\n![Preview](https://docs.near.org/assets/images/wallet-selector-915c475b1581de8647c79a274a85e6b0.png)_Initial screen of [Wallet Selector](https://near.github.io/wallet-selector/)_\n\nList of NEAR Wallets\n\nHere is a list of user-friendly wallets that support the NEAR blockchain, you can find more at the [NEAR Wallets](https://wallet.near.org/) page.\n\n- [Bitget Wallet](https://web3.bitget.com/): A multi-chain wallet supporting NEAR and other blockchains with comprehensive DeFi features.\n\n- [Coin98 Wallet](https://coin98.com/): A multi-chain wallet and DeFi gateway supporting NEAR and 40+ blockchains.\n\n- [Hot Wallet](https://hot-labs.org/): A browser-based wallet optimized for development and testing environments.\n\n- [Intear Wallet](https://intear.tech/): A NEAR-focused wallet with seamless integration capabilities.\n\n- [Math Wallet](https://mathwallet.org/): A multi-platform wallet supporting NEAR and multiple blockchain networks.\n\n- [Meteor Wallet](https://wallet.meteorwallet.app/): Both a browser and extension wallet, with advanced NFT features.\n\n- [NEAR Mobile](https://nearmobile.app/): A non-custodial wallet that is easy to use and well designed to manage your crypto wherever you go.\n\n- [OKX Wallet](https://www.okx.com/web3): A comprehensive Web3 wallet supporting NEAR and multiple chains with built-in DeFi access.\n\n- [Ramper Wallet](https://www.ramper.xyz/): A user-friendly wallet with social login features supporting NEAR.\n\n- [Sender Wallet](https://sender.org/): Security-audited mobile & extension wallet with 1M+ users, supporting NEAR & Aurora.\n\n- [Unity Wallet](https://www.unitywallet.app/): A wallet designed for seamless NEAR blockchain integration.\n\n- [WELLDONE Wallet](https://welldonestudio.io/): A multi-chain extension wallet that gives you control over all your assets from a single platform.\n\n\n* * *\n\n## Unlocking the wallet ecosystem [](https://docs.near.org/tools/wallet-selector\\#unlocking-the-wallet-ecosystem \"Direct link to Unlocking the wallet ecosystem\")\n\nWallet Selector makes it easy for users to interact with dApps by providing an abstraction over various wallets and wallet types within the NEAR ecosystem.\n\ninfo\n\nYou can check the current list of supported wallets in the [README.md](https://github.com/near/wallet-selector/blob/main/README.md) file of near/wallet-selector repository.\n\n* * *\n\n## Install [](https://docs.near.org/tools/wallet-selector\\#install \"Direct link to Install\")\n\nThe easiest way to use NEAR Wallet Selector is to install the core package from the NPM registry, some packages may require near-api-js v5.1.1 or above check them at packages.\n\n```bash\nnpm install near-api-js\n```\n\n```bash\nnpm install @near-wallet-selector/core\n```\n\nNext, you'll need to install the wallets you want to support:\n\n```bash\nnpm install \\\n  @near-wallet-selector/modal-ui \\\n  @near-wallet-selector/bitget-wallet \\\n  @near-wallet-selector/coin98-wallet \\\n  @near-wallet-selector/ethereum-wallets \\\n  @near-wallet-selector/hot-wallet \\\n  @near-wallet-selector/intear-wallet \\\n  @near-wallet-selector/ledger \\\n  @near-wallet-selector/math-wallet \\\n  @near-wallet-selector/meteor-wallet \\\n  @near-wallet-selector/meteor-wallet-app \\\n  @near-wallet-selector/near-mobile-wallet \\\n  @near-wallet-selector/okx-wallet \\\n  @near-wallet-selector/ramper-wallet \\\n  @near-wallet-selector/sender \\\n  @near-wallet-selector/unity-wallet \\\n  @near-wallet-selector/welldone-wallet\n```\n\n* * *\n\n## Setup [](https://docs.near.org/tools/wallet-selector\\#setup \"Direct link to Setup\")\n\nThe wallet selector can be set up in two ways: by using its `core` API, or by importing its `React context/hooks` into your app:\n\n- Wallet Selector\n- React Hook\n\n```ts\nimport \"@near-wallet-selector/modal-ui/styles.css\";\nimport { setupWalletSelector } from \"@near-wallet-selector/core\";\nimport { setupMeteorWallet } from \"@near-wallet-selector/meteor-wallet\";\n// import other wallets you want to support\n\nconst selector = await setupWalletSelector({\n  network: \"testnet\",\n  modules: [\\\n    setupMeteorWallet(),\\\n    /// add other setup functions\\\n  ],\n});\n\n// Subscribe to changes in the selected account\nwalletSelector.then(async (selector) => {\n  selector.subscribeOnAccountChange(async (signedAccount) => { ... });\n});\n```\n\nInstall the React hook package:\n\n```bash\nnpm install @near-wallet-selector/react-hook\n```\n\nWrap your app with the provider:\n\n```jsx\nimport \"@near-wallet-selector/modal-ui/styles.css\";\nimport { WalletSelectorProvider } from \"@near-wallet-selector/react-hook\";\nimport { setupMeteorWallet } from \"@near-wallet-selector/meteor-wallet\";\n// import other wallets you want to support\n\nconst config = {\n  network: \"testnet\",\n  modules: [\\\n    setupMeteorWallet()\\\n    // add other setup functions\\\n    ],\n  createAccessKeyFor: \"hello.near-examples.testnet\",\n};\n\nfunction App() {\n  return (\n    <WalletSelectorProvider config={config}>\n      {/* Your app components */}\n    </WalletSelectorProvider>\n  );\n}\n```\n\n* * *\n\n## Sign in [](https://docs.near.org/tools/wallet-selector\\#sign-in \"Direct link to Sign in\")\n\n- Wallet Selector\n- React Hook\n\nTo sign in, you will need to create a modal instance and call the `show()` method:\n\n```ts\n  import { setupModal } from \"@near-wallet-selector/modal-ui\";\n\n  const modal = setupModal(selector, {\n    contractId: \"hello.near-examples.testnet\",\n  });\n\n  modal.show();\n```\n\n```jsx\nimport { useWalletSelector } from \"@near-wallet-selector/react-hook\";\n\nconst MyComponent = () => {\n  const { signIn } = useWalletSelector();\n\n  const handleSignIn = () => {\n    signIn();\n  };\n\n  return <button onClick={handleSignIn}>Sign In</button>;\n};\n```\n\n* * *\n\n## Sign out [](https://docs.near.org/tools/wallet-selector\\#sign-out \"Direct link to Sign out\")\n\n- Wallet Selector\n- React Hook\n\n```ts\n  const wallet = await selector.wallet();\n  await wallet.signOut();\n```\n\n```jsx\nimport { useWalletSelector } from \"@near-wallet-selector/react-hook\";\n\nconst MyComponent = () => {\n  const { signOut } = useWalletSelector();\n\n  const handleSignOut = async () => {\n    await signOut();\n  };\n\n  return <button onClick={handleSignOut}>Sign Out</button>;\n};\n```\n\n* * *\n\n## Get accounts [](https://docs.near.org/tools/wallet-selector\\#get-accounts \"Direct link to Get accounts\")\n\nYou can easily query the signed-in accounts (either one or `none`):\n\n- Wallet Selector\n- React Hook\n\n```ts\nconst wallet = await selector.wallet();\nconst accounts = await wallet.getAccounts();\nconsole.log(accounts); // [{ accountId: \"test.testnet\" }]\n```\n\n```jsx\nimport { useWalletSelector } from \"@near-wallet-selector/react-hook\";\n\nconst MyComponent = () => {\n  const { signedAccountId } = useWalletSelector();\n\n  if (signedAccountId) {\n    return <div>Signed in as {signedAccountId}</div>;\n  } else {\n    return <div>Not signed in</div>;\n  }\n};\n```\n\n* * *\n\n## Get Balance [](https://docs.near.org/tools/wallet-selector\\#get-balance \"Direct link to Get Balance\")\n\nThe React hook exposes a method that can be used to get the balance of the currently signed-in account:\n\n- React Hook\n\n```jsx\nconst { getBalance } = useWalletSelector();\n\nconst balance = await getBalance();\n```\n\n* * *\n\n## Verify Message [](https://docs.near.org/tools/wallet-selector\\#verify-message \"Direct link to Verify Message\")\n\nIn NEAR, users can sign messages with their private keys to prove ownership of their accounts. This is useful for various purposes, such as authentication, authorization, and data integrity.\n\nThe wallet selector provides a `signNep413Message` method that allows users to sign messages in a standardized way, following the [NEP-413](https://github.com/near/NEPs/blob/master/neps/nep-0413.md) specification.\n\n- Wallet Selector\n- React Hook\n\n```ts\n// MyNearWallet\nconst wallet = await selector.wallet();\nconst signedMessage = await wallet.signNep413Message({\n  message: \"Test message\",\n  accountId: \"example.testnet\",\n  recipient: \"app.near\",\n  nonce: Buffer.from(Date.now().toString()),\n});\n```\n\n```jsx\nimport { useWalletSelector } from \"@near-wallet-selector/react-hook\";\n\nconst MyComponent = () => {\n  const { signNep413Message } = useWalletSelector();\n\n  const signedMessage = await signNep413Message({\n    message: \"Test message\",\n    accountId: \"example.testnet\",\n    recipient: \"app.near\",\n    nonce: Buffer.from(Date.now().toString()),\n  });\n\n  console.log(\"Message signed:\", signedMessage);\n};\n```\n\n* * *\n\n## Call a Read-Only Method [](https://docs.near.org/tools/wallet-selector\\#call-a-read-only-method \"Direct link to Call a Read-Only Method\")\n\nSmart contracts often expose read-only methods that allow users to query data without modifying the contract's state. These methods are typically used to fetch information such as balances, configurations, or other relevant data.\n\n- Wallet Selector\n- React Hook\n\nIn order to call a read-only method you will need to use `near-api-js`, as the core wallet selector does not provide this functionality out of the box.\n\n```ts\nimport { JsonRpcProvider } from \"@near-js/providers\";\n\nconst provider = new JsonRpcProvider({\n  url: \"https://free.rpc.fastnear.com\",\n});\n\nconst viewFunction = async ({\n  contractId,\n  method,\n  args = {},\n}: ViewMethodParams) => {\n  const res = await provider.callFunction(\n    \"hello.near-examples.testnet\",\n    \"get_greeting\",\n    {}\n  );\n\n  return JSON.parse(Buffer.from(res.result).toString());\n};\n```\n\n```jsx\nimport { useWalletSelector } from \"@near-wallet-selector/react-hook\";\n\nconst MyComponent = () => {\n  const { viewFunction } = useWalletSelector();\n\n  const handleViewMethod = async () => {\n    try {\n      const result = await viewFunction({\n        contractId: \"guestbook.near-examples.testnet\",\n        method: \"get_messages\",\n        args: {},\n      });\n      console.log(\"View result:\", result);\n    } catch (error) {\n      console.error(\"View method failed:\", error);\n    }\n  };\n\n  return <button onClick={handleViewMethod}>Call View Method</button>;\n};\n```\n\n* * *\n\n## Sign and Send a Transaction [](https://docs.near.org/tools/wallet-selector\\#sign-and-send-a-transaction \"Direct link to Sign and Send a Transaction\")\n\nYou can use the wallet selector to sign and send transactions to the NEAR blockchain. This is useful for performing actions that modify the state of a smart contract, such as transferring tokens, updating data, or executing specific functions.\n\n- Wallet Selector\n- React Hook\n\n```ts\nimport { actionCreators } from \"@near-js/transactions\";\n\nconst wallet = await selector.wallet();\nawait wallet.signAndSendTransaction({\n  receiverId: 'guestbook.near-examples.testnet',\n  actions: [\\\n    actionCreators.functionCall(\\\n      \"add_message\",\\\n      { text: \"Hello World!\" },\\\n      \"30000000000000\",\\\n      \"10000000000000000000000\",\\\n    )\\\n  ],\n});\n```\n\n```jsx\nimport { useWalletSelector } from \"@near-wallet-selector/react-hook\";\n\nconst MyComponent = () => {\n  const { signAndSendTransaction, callFunction } = useWalletSelector();\n\n  const handleTransaction = async () => {\n    try {\n      const result = await callFunction({\n        contractId: \"guestbook.near-examples.testnet\",\n        method: \"add_message\",\n        args: { text: \"Hello World!\" },\n        gas: \"30000000000000\",\n        deposit: \"10000000000000000000000\",\n      });\n      console.log(\"Transaction result:\", result);\n    } catch (error) {\n      console.error(\"Transaction failed:\", error);\n    }\n  };\n\n  return <button onClick={handleTransaction}>Send Transaction</button>;\n};\n```\n\n## Sign and send transactions [](https://docs.near.org/tools/wallet-selector\\#sign-and-send-transactions \"Direct link to Sign and send transactions\")\n\nYou can use the wallet selector to sign and send multiple transactions in parallel with a single request.\n\n- Wallet Selector\n- React Hook\n\n```ts\nconst wallet = await selector.wallet();\nawait wallet.signAndSendTransactions({\n  transactions: [\\\n    {\\\n      receiverId: \"guestbook.near-examples.testnet\",\\\n      actions: [\\\n        {\\\n          type: \"FunctionCall\",\\\n          params: {\\\n            methodName: \"add_message\",\\\n            args: { text: \"Hello World!\" },\\\n            gas: \"30000000000000\",\\\n            deposit: \"10000000000000000000000\",\\\n          },\\\n        },\\\n      ],\\\n    },\\\n  ],\n});\n```\n\n```jsx\nimport { useWalletSelector } from \"@near-wallet-selector/react-hook\";\n\nconst MyComponent = () => {\n  const { signAndSendTransactions } = useWalletSelector();\n\n  const handleBatchTransactions = async () => {\n    try {\n      const transactions = [\\\n        {\\\n          receiverId: \"guestbook.near-examples.testnet\",\\\n          actions: [\\\n            {\\\n              type: \"FunctionCall\",\\\n              params: {\\\n                methodName: \"add_message\",\\\n                args: { text: \"Hello World!\" },\\\n                gas: \"30000000000000\",\\\n                deposit: \"10000000000000000000000\",\\\n              },\\\n            },\\\n          ],\\\n        },\\\n      ];\n\n      const results = await signAndSendTransactions({ transactions });\n      console.log(\"Batch results:\", results);\n    } catch (error) {\n      console.error(\"Batch transaction failed:\", error);\n    }\n  };\n\n  return (\n    <button onClick={handleBatchTransactions}>Send Batch Transactions</button>\n  );\n};\n```\n\nWas this page helpful?\n\nYesNo\n\n- [Unlocking the wallet ecosystem](https://docs.near.org/tools/wallet-selector#unlocking-the-wallet-ecosystem)\n- [Install](https://docs.near.org/tools/wallet-selector#install)\n- [Setup](https://docs.near.org/tools/wallet-selector#setup)\n- [Sign in](https://docs.near.org/tools/wallet-selector#sign-in)\n- [Sign out](https://docs.near.org/tools/wallet-selector#sign-out)\n- [Get accounts](https://docs.near.org/tools/wallet-selector#get-accounts)\n- [Get Balance](https://docs.near.org/tools/wallet-selector#get-balance)\n- [Verify Message](https://docs.near.org/tools/wallet-selector#verify-message)\n- [Call a Read-Only Method](https://docs.near.org/tools/wallet-selector#call-a-read-only-method)\n- [Sign and Send a Transaction](https://docs.near.org/tools/wallet-selector#sign-and-send-a-transaction)\n- [Sign and send transactions](https://docs.near.org/tools/wallet-selector#sign-and-send-transactions)","path":null,"size_bytes":14395,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n  customHeaders?: Record<string, string>,\n): Promise<Response> {\n  const headers: Record<string, string> = {\n    ...(data ? { \"Content-Type\": \"application/json\" } : {}),\n    ...customHeaders,\n  };\n\n  const res = await fetch(url, {\n    method,\n    headers,\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1506,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2154,"size_tokens":null},"client/src/components/chat/chat-container.tsx":{"content":"import { useRef, useEffect } from \"react\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { MessageBubble } from \"./message-bubble\";\nimport type { ChatMessage } from \"@shared/schema\";\nimport { Loader2, Shield, Sparkles, MessageSquare } from \"lucide-react\";\n\ninterface ChatContainerProps {\n  messages: ChatMessage[];\n  isLoading: boolean;\n}\n\nexport function ChatContainer({ messages, isLoading }: ChatContainerProps) {\n  const scrollRef = useRef<HTMLDivElement>(null);\n  const bottomRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    bottomRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages, isLoading]);\n\n  if (messages.length === 0 && !isLoading) {\n    return (\n      <div className=\"flex-1 flex items-center justify-center p-8\">\n        <div className=\"text-center max-w-md space-y-6\">\n          <div className=\"flex justify-center\">\n            <div className=\"relative\">\n              <div className=\"h-20 w-20 rounded-2xl bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center\">\n                <Shield className=\"h-10 w-10 text-primary\" />\n              </div>\n              <div className=\"absolute -top-2 -right-2 h-8 w-8 rounded-full bg-card border border-border flex items-center justify-center\">\n                <Sparkles className=\"h-4 w-4 text-primary\" />\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <h2 className=\"text-2xl font-semibold\">Welcome to GhostBridge AI</h2>\n            <p className=\"text-muted-foreground\">\n              Your AI-powered assistant for private cross-chain bridges. \n              Tell me what you want to do in plain English.\n            </p>\n          </div>\n\n          <div className=\"grid gap-3 text-left\">\n            <ExamplePrompt \n              title=\"Bridge Zcash\"\n              description=\"Bridge 5 ZEC to Ethereum using the best available route\"\n            />\n            <ExamplePrompt \n              title=\"Check Fees\"\n              description=\"What are the fees to bridge 10 ZEC to Polygon?\"\n            />\n            <ExamplePrompt \n              title=\"Compare Routes\"\n              description=\"Compare bridge options for ZEC to NEAR\"\n            />\n          </div>\n\n          <div className=\"flex items-center justify-center gap-2 text-sm text-muted-foreground pt-4\">\n            <MessageSquare className=\"h-4 w-4\" />\n            <span>Type a message below to get started</span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <ScrollArea className=\"flex-1\" ref={scrollRef}>\n      <div className=\"max-w-4xl mx-auto p-4 md:p-6 space-y-6\">\n        {messages.map((message) => (\n          <MessageBubble key={message.id} message={message} />\n        ))}\n        \n        {isLoading && (\n          <div className=\"flex gap-3 animate-in fade-in-0 slide-in-from-bottom-2\" data-testid=\"loading-indicator\">\n            <div className=\"flex h-8 w-8 shrink-0 items-center justify-center rounded-md bg-muted\">\n              <div className=\"relative\">\n                <Shield className=\"h-4 w-4\" />\n                <Sparkles className=\"h-2.5 w-2.5 absolute -top-1 -right-1 text-primary\" />\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2 rounded-lg bg-card border border-card-border px-4 py-3\">\n              <Loader2 className=\"h-4 w-4 animate-spin text-primary\" />\n              <span className=\"text-sm text-muted-foreground\" data-testid=\"text-loading-message\">\n                GhostBridge is thinking...\n              </span>\n            </div>\n          </div>\n        )}\n        \n        <div ref={bottomRef} />\n      </div>\n    </ScrollArea>\n  );\n}\n\nfunction ExamplePrompt({ title, description }: { title: string; description: string }) {\n  return (\n    <div \n      className=\"p-4 rounded-lg border border-border bg-card/50 hover-elevate cursor-pointer transition-colors\"\n      data-testid={`card-example-${title.toLowerCase().replace(/\\s+/g, '-')}`}\n    >\n      <h3 className=\"font-medium text-sm mb-1\">{title}</h3>\n      <p className=\"text-xs text-muted-foreground\">{description}</p>\n    </div>\n  );\n}\n","path":null,"size_bytes":4173,"size_tokens":null},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { serveStatic } from \"./static\";\nimport { createServer } from \"http\";\n\nconst app = express();\nconst httpServer = createServer(app);\n\ndeclare module \"http\" {\n  interface IncomingMessage {\n    rawBody: unknown;\n  }\n}\n\napp.use(\n  express.json({\n    verify: (req, _res, buf) => {\n      req.rawBody = buf;\n    },\n  }),\n);\n\napp.use(express.urlencoded({ extended: false }));\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  await registerRoutes(httpServer, app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (process.env.NODE_ENV === \"production\") {\n    serveStatic(app);\n  } else {\n    const { setupVite } = await import(\"./vite\");\n    await setupVite(httpServer, app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || \"5000\", 10);\n  httpServer.listen(\n    {\n      port,\n      host: \"0.0.0.0\",\n      reusePort: true,\n    },\n    () => {\n      log(`serving on port ${port}`);\n    },\n  );\n})();\n","path":null,"size_bytes":2560,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":689,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4120,"size_tokens":null},"client/src/components/header.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { useWallet } from \"@/lib/wallet-context\";\nimport { \n  Wallet, \n  LogOut, \n  Copy, \n  Check, \n  Shield, \n  ChevronDown,\n  Loader2,\n  Zap\n} from \"lucide-react\";\n\nexport function Header() {\n  const { wallet, connect, disconnect, isConnecting } = useWallet();\n  const [copied, setCopied] = useState(false);\n\n  const handleCopyAddress = async () => {\n    if (wallet.accountId) {\n      await navigator.clipboard.writeText(wallet.accountId);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    }\n  };\n\n  const handleConnect = async () => {\n    await connect();\n  };\n\n  const truncateAddress = (address: string) => {\n    if (address.length <= 16) return address;\n    return `${address.slice(0, 8)}...${address.slice(-6)}`;\n  };\n\n  return (\n    <>\n      <header className=\"sticky top-0 z-50 w-full border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80\">\n        <div className=\"flex h-16 items-center justify-between gap-4 px-4 md:px-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"relative flex h-9 w-9 items-center justify-center rounded-md bg-primary\">\n                <Shield className=\"h-5 w-5 text-primary-foreground\" />\n                <div className=\"absolute -right-0.5 -top-0.5 h-2.5 w-2.5 rounded-full border-2 border-background bg-chart-2\" />\n              </div>\n              <div className=\"flex flex-col\">\n                <span className=\"text-lg font-semibold tracking-tight\" data-testid=\"text-app-name\">\n                  GhostBridge\n                </span>\n                <span className=\"text-xs text-muted-foreground hidden sm:block\">\n                  AI-Powered Privacy Bridge\n                </span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-3\">\n            <Badge variant=\"outline\" className=\"hidden sm:flex items-center gap-1.5\">\n              <Zap className=\"h-3 w-3 text-primary\" />\n              <span className=\"text-xs\">{wallet.network === \"testnet\" ? \"Testnet\" : \"Mainnet\"}</span>\n            </Badge>\n\n            {wallet.isConnected ? (\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button variant=\"outline\" className=\"gap-2\" data-testid=\"button-wallet-dropdown\">\n                    <Wallet className=\"h-4 w-4\" />\n                    <span className=\"hidden sm:inline font-mono text-sm\">\n                      {truncateAddress(wallet.accountId || \"\")}\n                    </span>\n                    <span className=\"sm:hidden font-mono text-sm\">\n                      {wallet.accountId?.slice(0, 6)}...\n                    </span>\n                    <ChevronDown className=\"h-4 w-4 text-muted-foreground\" />\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\" className=\"w-64\">\n                  <div className=\"p-3\">\n                    <p className=\"text-xs text-muted-foreground mb-1\">Connected Account</p>\n                    <p className=\"font-mono text-sm break-all\">{wallet.accountId}</p>\n                    {wallet.balance && (\n                      <p className=\"mt-2 text-sm\">\n                        <span className=\"text-muted-foreground\">Balance: </span>\n                        <span className=\"font-semibold\">{wallet.balance} NEAR</span>\n                      </p>\n                    )}\n                  </div>\n                  <DropdownMenuSeparator />\n                  <DropdownMenuItem onClick={handleCopyAddress} data-testid=\"button-copy-address\">\n                    {copied ? (\n                      <Check className=\"h-4 w-4 mr-2 text-chart-2\" />\n                    ) : (\n                      <Copy className=\"h-4 w-4 mr-2\" />\n                    )}\n                    {copied ? \"Copied!\" : \"Copy Address\"}\n                  </DropdownMenuItem>\n                  <DropdownMenuItem \n                    onClick={disconnect} \n                    className=\"text-destructive focus:text-destructive\"\n                    data-testid=\"button-disconnect\"\n                  >\n                    <LogOut className=\"h-4 w-4 mr-2\" />\n                    Disconnect\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            ) : (\n              <Button \n                onClick={handleConnect} \n                disabled={isConnecting}\n                data-testid=\"button-connect-wallet\"\n              >\n                {isConnecting ? (\n                  <>\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    <span className=\"hidden sm:inline\">Connecting...</span>\n                  </>\n                ) : (\n                  <>\n                    <Wallet className=\"h-4 w-4\" />\n                    <span className=\"hidden sm:inline\">Connect Wallet</span>\n                    <span className=\"sm:hidden\">Connect</span>\n                  </>\n                )}\n              </Button>\n            )}\n          </div>\n        </div>\n      </header>\n    </>\n  );\n}\n","path":null,"size_bytes":5435,"size_tokens":null},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1139,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":844,"size_tokens":null},"client/src/components/chat/message-bubble.tsx":{"content":"import { format } from \"date-fns\";\nimport type { ChatMessage } from \"@shared/schema\";\nimport { BridgePlanCard } from \"./bridge-plan-card\";\nimport { Shield, User, Sparkles } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface MessageBubbleProps {\n  message: ChatMessage;\n}\n\nexport function MessageBubble({ message }: MessageBubbleProps) {\n  const isUser = message.role === \"user\";\n  const timestamp = new Date(message.timestamp);\n\n  return (\n    <div\n      className={cn(\n        \"flex gap-3 animate-in fade-in-0 slide-in-from-bottom-2 duration-300\",\n        isUser ? \"flex-row-reverse\" : \"flex-row\"\n      )}\n      data-testid={`message-${message.id}`}\n    >\n      <div\n        className={cn(\n          \"flex h-8 w-8 shrink-0 items-center justify-center rounded-md\",\n          isUser ? \"bg-primary text-primary-foreground\" : \"bg-muted\"\n        )}\n      >\n        {isUser ? (\n          <User className=\"h-4 w-4\" />\n        ) : (\n          <div className=\"relative\">\n            <Shield className=\"h-4 w-4\" />\n            <Sparkles className=\"h-2.5 w-2.5 absolute -top-1 -right-1 text-primary\" />\n          </div>\n        )}\n      </div>\n\n      <div\n        className={cn(\n          \"flex flex-col gap-2 max-w-[85%] md:max-w-[75%]\",\n          isUser ? \"items-end\" : \"items-start\"\n        )}\n      >\n        <div\n          className={cn(\n            \"rounded-lg px-4 py-3\",\n            isUser\n              ? \"bg-primary text-primary-foreground\"\n              : \"bg-card border border-card-border\"\n          )}\n        >\n          <p className=\"text-sm whitespace-pre-wrap leading-relaxed\">{message.content}</p>\n        </div>\n\n        {message.bridgePlan && <BridgePlanCard plan={message.bridgePlan} />}\n\n        <span className=\"text-xs text-muted-foreground px-1\">\n          {format(timestamp, \"h:mm a\")}\n        </span>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":1865,"size_tokens":null},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","path":null,"size_bytes":4050,"size_tokens":null},"server/storage.ts":{"content":"import type { ChatMessage, BridgePlan } from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\n\nexport interface BridgeExecutionRecord {\n  id: string;\n  quoteId: string;\n  walletAddress: string;\n  sourceChain: string;\n  targetChain: string;\n  inputAmount: string;\n  outputAmount: string;\n  protocol: string;\n  status: string;\n  steps: {\n    step: number;\n    status: \"pending\" | \"in_progress\" | \"completed\" | \"failed\";\n    transactionHash?: string;\n    blockNumber?: number;\n    timestamp?: string;\n    message: string;\n  }[];\n  sourceTransaction?: {\n    hash: string;\n    blockNumber: number;\n    confirmations: number;\n    explorerUrl: string;\n  };\n  targetTransaction?: {\n    hash: string;\n    blockNumber: number;\n    confirmations: number;\n    explorerUrl: string;\n  };\n  createdAt: string;\n  updatedAt: string;\n  error?: string;\n}\n\nexport interface IStorage {\n  getChatMessages(sessionId: string): Promise<ChatMessage[]>;\n  addChatMessage(sessionId: string, message: Omit<ChatMessage, \"id\" | \"timestamp\">): Promise<ChatMessage>;\n  clearChatMessages(sessionId: string): Promise<void>;\n  getActiveBridgePlan(sessionId: string): Promise<BridgePlan | undefined>;\n  setActiveBridgePlan(sessionId: string, plan: BridgePlan): Promise<void>;\n  clearActiveBridgePlan(sessionId: string): Promise<void>;\n  \n  saveBridgeExecution(execution: BridgeExecutionRecord): Promise<void>;\n  getBridgeExecution(executionId: string): Promise<BridgeExecutionRecord | undefined>;\n  updateBridgeExecution(executionId: string, updates: Partial<BridgeExecutionRecord>): Promise<void>;\n  getBridgeExecutionsByWallet(walletAddress: string, limit?: number): Promise<BridgeExecutionRecord[]>;\n}\n\nexport class MemStorage implements IStorage {\n  private chatMessages: Map<string, ChatMessage[]>;\n  private bridgePlans: Map<string, BridgePlan>;\n  private bridgeExecutions: Map<string, BridgeExecutionRecord>;\n\n  constructor() {\n    this.chatMessages = new Map();\n    this.bridgePlans = new Map();\n    this.bridgeExecutions = new Map();\n  }\n\n  async getChatMessages(sessionId: string): Promise<ChatMessage[]> {\n    return this.chatMessages.get(sessionId) || [];\n  }\n\n  async addChatMessage(\n    sessionId: string, \n    message: Omit<ChatMessage, \"id\" | \"timestamp\">\n  ): Promise<ChatMessage> {\n    const fullMessage: ChatMessage = {\n      ...message,\n      id: randomUUID(),\n      timestamp: new Date().toISOString(),\n    };\n\n    const messages = this.chatMessages.get(sessionId) || [];\n    messages.push(fullMessage);\n    this.chatMessages.set(sessionId, messages);\n\n    return fullMessage;\n  }\n\n  async clearChatMessages(sessionId: string): Promise<void> {\n    this.chatMessages.delete(sessionId);\n  }\n\n  async getActiveBridgePlan(sessionId: string): Promise<BridgePlan | undefined> {\n    return this.bridgePlans.get(sessionId);\n  }\n\n  async setActiveBridgePlan(sessionId: string, plan: BridgePlan): Promise<void> {\n    this.bridgePlans.set(sessionId, plan);\n  }\n\n  async clearActiveBridgePlan(sessionId: string): Promise<void> {\n    this.bridgePlans.delete(sessionId);\n  }\n\n  async saveBridgeExecution(execution: BridgeExecutionRecord): Promise<void> {\n    this.bridgeExecutions.set(execution.id, execution);\n  }\n\n  async getBridgeExecution(executionId: string): Promise<BridgeExecutionRecord | undefined> {\n    return this.bridgeExecutions.get(executionId);\n  }\n\n  async updateBridgeExecution(executionId: string, updates: Partial<BridgeExecutionRecord>): Promise<void> {\n    const existing = this.bridgeExecutions.get(executionId);\n    if (existing) {\n      this.bridgeExecutions.set(executionId, {\n        ...existing,\n        ...updates,\n        updatedAt: new Date().toISOString(),\n      });\n    }\n  }\n\n  async getBridgeExecutionsByWallet(walletAddress: string, limit: number = 10): Promise<BridgeExecutionRecord[]> {\n    const executions = Array.from(this.bridgeExecutions.values())\n      .filter(e => e.walletAddress === walletAddress)\n      .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime())\n      .slice(0, limit);\n    return executions;\n  }\n}\n\nexport const storage = new MemStorage();\n","path":null,"size_bytes":4105,"size_tokens":null},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"attached_assets/content-1764842925849.md":{"content":"[Skip to content](https://github.com/near/wallet-selector#start-of-content)\n\nYou signed in with another tab or window. [Reload](https://github.com/near/wallet-selector) to refresh your session.You signed out in another tab or window. [Reload](https://github.com/near/wallet-selector) to refresh your session.You switched accounts on another tab or window. [Reload](https://github.com/near/wallet-selector) to refresh your session.Dismiss alert\n\n{{ message }}\n\n[near](https://github.com/near)/ **[wallet-selector](https://github.com/near/wallet-selector)** Public\n\n- [Notifications](https://github.com/login?return_to=%2Fnear%2Fwallet-selector) You must be signed in to change notification settings\n- [Fork\\\\\n185](https://github.com/login?return_to=%2Fnear%2Fwallet-selector)\n- [Star\\\\\n177](https://github.com/login?return_to=%2Fnear%2Fwallet-selector)\n\n\nThis is a wallet selector modal that allows users to interact with NEAR dApps with a selection of available wallets.\n\n\n[near.github.io/wallet-selector/](https://near.github.io/wallet-selector/ \"https://near.github.io/wallet-selector/\")\n\n### License\n\nApache-2.0, MIT licenses found\n\n\n### Licenses found\n\n[Apache-2.0\\\\\n\\\\\nLICENSE-APACHE](https://github.com/near/wallet-selector/blob/main/LICENSE-APACHE) [MIT\\\\\n\\\\\nLICENSE-MIT](https://github.com/near/wallet-selector/blob/main/LICENSE-MIT)\n\n[177\\\\\nstars](https://github.com/near/wallet-selector/stargazers) [185\\\\\nforks](https://github.com/near/wallet-selector/forks) [Branches](https://github.com/near/wallet-selector/branches) [Tags](https://github.com/near/wallet-selector/tags) [Activity](https://github.com/near/wallet-selector/activity)\n\n[Star](https://github.com/login?return_to=%2Fnear%2Fwallet-selector)\n\n[Notifications](https://github.com/login?return_to=%2Fnear%2Fwallet-selector) You must be signed in to change notification settings\n\n# near/wallet-selector\n\nmain\n\n[**13** Branches](https://github.com/near/wallet-selector/branches) [**569** Tags](https://github.com/near/wallet-selector/tags)\n\n[Go to Branches page](https://github.com/near/wallet-selector/branches)[Go to Tags page](https://github.com/near/wallet-selector/tags)\n\nGo to file\n\nCode\n\nOpen more actions menu\n\n## Folders and files\n\n| Name | Name | Last commit message | Last commit date |\n| --- | --- | --- | --- |\n| ## Latest commit<br>## History<br>[4,213 Commits](https://github.com/near/wallet-selector/commits/main/)<br>[View commit history for this file.](https://github.com/near/wallet-selector/commits/main/) |\n| [.changeset](https://github.com/near/wallet-selector/tree/main/.changeset \".changeset\") | [.changeset](https://github.com/near/wallet-selector/tree/main/.changeset \".changeset\") |  |  |\n| [.github](https://github.com/near/wallet-selector/tree/main/.github \".github\") | [.github](https://github.com/near/wallet-selector/tree/main/.github \".github\") |  |  |\n| [.vscode](https://github.com/near/wallet-selector/tree/main/.vscode \".vscode\") | [.vscode](https://github.com/near/wallet-selector/tree/main/.vscode \".vscode\") |  |  |\n| [\\_\\_tests\\_\\_](https://github.com/near/wallet-selector/tree/main/__tests__ \"__tests__\") | [\\_\\_tests\\_\\_](https://github.com/near/wallet-selector/tree/main/__tests__ \"__tests__\") |  |  |\n| [examples](https://github.com/near/wallet-selector/tree/main/examples \"examples\") | [examples](https://github.com/near/wallet-selector/tree/main/examples \"examples\") |  |  |\n| [images](https://github.com/near/wallet-selector/tree/main/images \"images\") | [images](https://github.com/near/wallet-selector/tree/main/images \"images\") |  |  |\n| [packages](https://github.com/near/wallet-selector/tree/main/packages \"packages\") | [packages](https://github.com/near/wallet-selector/tree/main/packages \"packages\") |  |  |\n| [scripts](https://github.com/near/wallet-selector/tree/main/scripts \"scripts\") | [scripts](https://github.com/near/wallet-selector/tree/main/scripts \"scripts\") |  |  |\n| [tools](https://github.com/near/wallet-selector/tree/main/tools \"tools\") | [tools](https://github.com/near/wallet-selector/tree/main/tools \"tools\") |  |  |\n| [.editorconfig](https://github.com/near/wallet-selector/blob/main/.editorconfig \".editorconfig\") | [.editorconfig](https://github.com/near/wallet-selector/blob/main/.editorconfig \".editorconfig\") |  |  |\n| [.eslintignore](https://github.com/near/wallet-selector/blob/main/.eslintignore \".eslintignore\") | [.eslintignore](https://github.com/near/wallet-selector/blob/main/.eslintignore \".eslintignore\") |  |  |\n| [.eslintrc.json](https://github.com/near/wallet-selector/blob/main/.eslintrc.json \".eslintrc.json\") | [.eslintrc.json](https://github.com/near/wallet-selector/blob/main/.eslintrc.json \".eslintrc.json\") |  |  |\n| [.gitattributes](https://github.com/near/wallet-selector/blob/main/.gitattributes \".gitattributes\") | [.gitattributes](https://github.com/near/wallet-selector/blob/main/.gitattributes \".gitattributes\") |  |  |\n| [.gitignore](https://github.com/near/wallet-selector/blob/main/.gitignore \".gitignore\") | [.gitignore](https://github.com/near/wallet-selector/blob/main/.gitignore \".gitignore\") |  |  |\n| [.npmignore](https://github.com/near/wallet-selector/blob/main/.npmignore \".npmignore\") | [.npmignore](https://github.com/near/wallet-selector/blob/main/.npmignore \".npmignore\") |  |  |\n| [.npmrc](https://github.com/near/wallet-selector/blob/main/.npmrc \".npmrc\") | [.npmrc](https://github.com/near/wallet-selector/blob/main/.npmrc \".npmrc\") |  |  |\n| [.prettierignore](https://github.com/near/wallet-selector/blob/main/.prettierignore \".prettierignore\") | [.prettierignore](https://github.com/near/wallet-selector/blob/main/.prettierignore \".prettierignore\") |  |  |\n| [.yarnrc](https://github.com/near/wallet-selector/blob/main/.yarnrc \".yarnrc\") | [.yarnrc](https://github.com/near/wallet-selector/blob/main/.yarnrc \".yarnrc\") |  |  |\n| [CONTRIBUTING.md](https://github.com/near/wallet-selector/blob/main/CONTRIBUTING.md \"CONTRIBUTING.md\") | [CONTRIBUTING.md](https://github.com/near/wallet-selector/blob/main/CONTRIBUTING.md \"CONTRIBUTING.md\") |  |  |\n| [LICENSE-APACHE](https://github.com/near/wallet-selector/blob/main/LICENSE-APACHE \"LICENSE-APACHE\") | [LICENSE-APACHE](https://github.com/near/wallet-selector/blob/main/LICENSE-APACHE \"LICENSE-APACHE\") |  |  |\n| [LICENSE-MIT](https://github.com/near/wallet-selector/blob/main/LICENSE-MIT \"LICENSE-MIT\") | [LICENSE-MIT](https://github.com/near/wallet-selector/blob/main/LICENSE-MIT \"LICENSE-MIT\") |  |  |\n| [MIGRATION-v10.md](https://github.com/near/wallet-selector/blob/main/MIGRATION-v10.md \"MIGRATION-v10.md\") | [MIGRATION-v10.md](https://github.com/near/wallet-selector/blob/main/MIGRATION-v10.md \"MIGRATION-v10.md\") |  |  |\n| [README.md](https://github.com/near/wallet-selector/blob/main/README.md \"README.md\") | [README.md](https://github.com/near/wallet-selector/blob/main/README.md \"README.md\") |  |  |\n| [SECURITY.md](https://github.com/near/wallet-selector/blob/main/SECURITY.md \"SECURITY.md\") | [SECURITY.md](https://github.com/near/wallet-selector/blob/main/SECURITY.md \"SECURITY.md\") |  |  |\n| [babel.config.json](https://github.com/near/wallet-selector/blob/main/babel.config.json \"babel.config.json\") | [babel.config.json](https://github.com/near/wallet-selector/blob/main/babel.config.json \"babel.config.json\") |  |  |\n| [jest.config.ts](https://github.com/near/wallet-selector/blob/main/jest.config.ts \"jest.config.ts\") | [jest.config.ts](https://github.com/near/wallet-selector/blob/main/jest.config.ts \"jest.config.ts\") |  |  |\n| [jest.init.ts](https://github.com/near/wallet-selector/blob/main/jest.init.ts \"jest.init.ts\") | [jest.init.ts](https://github.com/near/wallet-selector/blob/main/jest.init.ts \"jest.init.ts\") |  |  |\n| [jest.preset.js](https://github.com/near/wallet-selector/blob/main/jest.preset.js \"jest.preset.js\") | [jest.preset.js](https://github.com/near/wallet-selector/blob/main/jest.preset.js \"jest.preset.js\") |  |  |\n| [nx.json](https://github.com/near/wallet-selector/blob/main/nx.json \"nx.json\") | [nx.json](https://github.com/near/wallet-selector/blob/main/nx.json \"nx.json\") |  |  |\n| [package.json](https://github.com/near/wallet-selector/blob/main/package.json \"package.json\") | [package.json](https://github.com/near/wallet-selector/blob/main/package.json \"package.json\") |  |  |\n| [pnpm-lock.yaml](https://github.com/near/wallet-selector/blob/main/pnpm-lock.yaml \"pnpm-lock.yaml\") | [pnpm-lock.yaml](https://github.com/near/wallet-selector/blob/main/pnpm-lock.yaml \"pnpm-lock.yaml\") |  |  |\n| [pnpm-workspace.yaml](https://github.com/near/wallet-selector/blob/main/pnpm-workspace.yaml \"pnpm-workspace.yaml\") | [pnpm-workspace.yaml](https://github.com/near/wallet-selector/blob/main/pnpm-workspace.yaml \"pnpm-workspace.yaml\") |  |  |\n| [release.config.js](https://github.com/near/wallet-selector/blob/main/release.config.js \"release.config.js\") | [release.config.js](https://github.com/near/wallet-selector/blob/main/release.config.js \"release.config.js\") |  |  |\n| [tsconfig.base.json](https://github.com/near/wallet-selector/blob/main/tsconfig.base.json \"tsconfig.base.json\") | [tsconfig.base.json](https://github.com/near/wallet-selector/blob/main/tsconfig.base.json \"tsconfig.base.json\") |  |  |\n| [tsprune.json](https://github.com/near/wallet-selector/blob/main/tsprune.json \"tsprune.json\") | [tsprune.json](https://github.com/near/wallet-selector/blob/main/tsprune.json \"tsprune.json\") |  |  |\n| View all files |\n\n## Repository files navigation\n\n# NEAR Wallet Selector\n\n[Permalink: NEAR Wallet Selector](https://github.com/near/wallet-selector#near-wallet-selector)\n\n> ** Recommendation**\n>\n> While Wallet Selector remains supported during the transition period,\n>\n> the **NEAR Infra Committee / NEAR Foundation recommends exploring**\n>\n> **the new preferred connector  [HOT Connect](https://github.com/azbang/hot-connector).**\n>\n> ### HOT Connect provides:\n>\n> [Permalink: HOT Connect provides:](https://github.com/near/wallet-selector#hot-connect-provides)\n>\n> - **Full compatibility** with Wallet Selector APIs\n> - **Secure isolation** of all wallet code via iframes\n> - **Automatic wallet updates** without maintenance on the dApp side\n> - **Modern authentication flows** and improved UX\n\n We recommend integrating **HOT Connect** to ensure long-term compatibility and the best user experience on NEAR.\n\nNEAR Wallet Selector makes it easy for users to interact with your dApp by providing an abstraction over various wallets within the NEAR ecosystem:\n\n- [Arepa Wallet](https://www.npmjs.com/package/@near-wallet-selector/arepa-wallet) \\- Browser wallet.\n- [Bitget Wallet](https://www.npmjs.com/package/@near-wallet-selector/bitget-wallet) \\- Injected wallet.\n- [Bitte Wallet](https://www.npmjs.com/package/@near-wallet-selector/bitte-wallet) \\- Injected wallet.\n- [Coin98 Wallet](https://www.npmjs.com/package/@near-wallet-selector/coin98-wallet) \\- Injected wallet.\n- [Ethereum wallets](https://www.npmjs.com/package/@near-wallet-selector/ethereum-wallets) \\- Injected wallet.\n- [Here Wallet](https://www.npmjs.com/package/@near-wallet-selector/here-wallet) \\- Mobile wallet.\n- [HOT Wallet](https://www.npmjs.com/package/@near-wallet-selector/hot-wallet) \\- Injected wallet.\n- [Unity Wallet](https://www.npmjs.com/package/@near-wallet-selector/unity-wallet) \\- Mobile wallet.\n- [Ledger](https://www.npmjs.com/package/@near-wallet-selector/ledger) \\- Hardware wallet.\n- [Math Wallet](https://www.npmjs.com/package/@near-wallet-selector/math-wallet) \\- Injected wallet.\n- [Metamask Snap](https://www.npmjs.com/package/@near-wallet-selector/near-snap) \\- Injected wallet.\n- [Meteor Wallet](https://www.npmjs.com/package/@near-wallet-selector/meteor-wallet) \\- Injected wallet.\n- [Meteor Wallet App](https://www.npmjs.com/package/@near-wallet-selector/meteor-wallet-app) \\- Instant link wallet.\n- [My NEAR Wallet](https://www.npmjs.com/package/@near-wallet-selector/my-near-wallet) \\- Browser wallet.\n- [Narwallets](https://www.npmjs.com/package/@near-wallet-selector/narwallets) \\- Injected wallet.\n- [Near Mobile Wallet](https://www.npmjs.com/package/@near-wallet-selector/near-mobile-wallet) \\- Mobile Wallet.\n- [Nightly](https://www.npmjs.com/package/@near-wallet-selector/nightly) \\- Injected wallet.\n- [OKX Wallet](https://www.npmjs.com/package/@near-wallet-selector/okx-wallet) \\- Injected wallet.\n- [Ramper Wallet](https://www.npmjs.com/package/@near-wallet-selector/ramper-wallet) \\- Injected wallet.\n- [Sender](https://www.npmjs.com/package/@near-wallet-selector/sender) \\- Injected wallet.\n- [WalletConnect](https://www.npmjs.com/package/@near-wallet-selector/wallet-connect) \\- Bridge wallet.\n- [WELLDONE Wallet](https://www.npmjs.com/package/@near-wallet-selector/welldone-wallet) \\- Injected wallet.\n- [XDEFI Wallet](https://www.npmjs.com/package/@near-wallet-selector/xdefi) \\- Injected wallet.\n- [Intear Wallet](https://www.npmjs.com/package/@near-wallet-selector/intear-wallet) \\- Injected wallet.\n\n## Preview\n\n[Permalink: Preview](https://github.com/near/wallet-selector#preview)\n\n[React](https://reactjs.org/) / [Next.js](https://nextjs.org/) and VanillaJS variations of the [Guest Book](https://docs.near.org/tutorials/examples/guest-book) dApp can be found in the [`examples`](https://github.com/near/wallet-selector/blob/main/examples) directory. You can use these to gain a concrete understanding of how to integrate NEAR Wallet Selector into your own dApp.\n\n[![Preview](https://github.com/near/wallet-selector/raw/main/images/preview.gif)](https://github.com/near/wallet-selector/blob/main/images/preview.gif)[![Preview](https://github.com/near/wallet-selector/raw/main/images/preview.gif)](https://github.com/near/wallet-selector/blob/main/images/preview.gif)[Open in new window](https://github.com/near/wallet-selector/blob/main/images/preview.gif)\n\n## Upgrading from v9 to v10\n\n[Permalink: Upgrading from v9 to v10](https://github.com/near/wallet-selector#upgrading-from-v9-to-v10)\n\nIf you're upgrading from v9.x to v10.x, please read the [Migration Guide](https://github.com/near/wallet-selector/blob/main/MIGRATION-v10.md) for detailed instructions on the breaking changes and how to update your code.\n\n## Installation and Usage\n\n[Permalink: Installation and Usage](https://github.com/near/wallet-selector#installation-and-usage)\n\nThe easiest way to use NEAR Wallet Selector is to install the [`core`](https://www.npmjs.com/package/@near-wallet-selector/core) package from the NPM registry.\n\n```\n# Using NPM.\nnpm install @near-wallet-selector/core\n\n# Using Yarn.\nyarn add @near-wallet-selector/core\n\n# Using PNPM.\npnpm add @near-wallet-selector/core\n```\n\nNext, you'll need to install the wallets you want to support:\n\n```\n# Using NPM.\nnpm install \\\n  @near-wallet-selector/arepa-wallet \\\n  @near-wallet-selector/bitget-wallet \\\n  @near-wallet-selector/bitte-wallet \\\n  @near-wallet-selector/coin98-wallet \\\n  @near-wallet-selector/ethereum-wallets \\\n  @near-wallet-selector/here-wallet \\\n  @near-wallet-selector/hot-wallet \\\n  @near-wallet-selector/intear-wallet \\\n  @near-wallet-selector/ledger \\\n  @near-wallet-selector/math-wallet \\\n  @near-wallet-selector/meteor-wallet \\\n  @near-wallet-selector/meteor-wallet-app \\\n  @near-wallet-selector/my-near-wallet \\\n  @near-wallet-selector/narwallets \\\n  @near-wallet-selector/near-mobile-wallet \\\n  @near-wallet-selector/near-snap \\\n  @near-wallet-selector/nightly \\\n  @near-wallet-selector/okx-wallet \\\n  @near-wallet-selector/ramper-wallet \\\n  @near-wallet-selector/react-hook \\\n  @near-wallet-selector/sender \\\n  @near-wallet-selector/unity-wallet \\\n  @near-wallet-selector/wallet-connect \\\n  @near-wallet-selector/welldone-wallet \\\n  @near-wallet-selector/xdefi\n\n# Using Yarn.\nyarn add \\\n  @near-wallet-selector/arepa-wallet \\\n  @near-wallet-selector/bitget-wallet \\\n  @near-wallet-selector/bitte-wallet \\\n  @near-wallet-selector/coin98-wallet \\\n  @near-wallet-selector/ethereum-wallets \\\n  @near-wallet-selector/here-wallet \\\n  @near-wallet-selector/hot-wallet \\\n  @near-wallet-selector/intear-wallet \\\n  @near-wallet-selector/ledger \\\n  @near-wallet-selector/math-wallet \\\n  @near-wallet-selector/meteor-wallet \\\n  @near-wallet-selector/meteor-wallet-app \\\n  @near-wallet-selector/my-near-wallet \\\n  @near-wallet-selector/narwallets \\\n  @near-wallet-selector/near-mobile-wallet \\\n  @near-wallet-selector/near-snap \\\n  @near-wallet-selector/nightly \\\n  @near-wallet-selector/okx-wallet \\\n  @near-wallet-selector/ramper-wallet \\\n  @near-wallet-selector/react-hook \\\n  @near-wallet-selector/sender \\\n  @near-wallet-selector/unity-wallet \\\n  @near-wallet-selector/wallet-connect \\\n  @near-wallet-selector/welldone-wallet \\\n  @near-wallet-selector/xdefi\n\n# Using PNPM.\npnpm add \\\n  @near-wallet-selector/arepa-wallet \\\n  @near-wallet-selector/bitget-wallet \\\n  @near-wallet-selector/bitte-wallet \\\n  @near-wallet-selector/coin98-wallet \\\n  @near-wallet-selector/ethereum-wallets \\\n  @near-wallet-selector/here-wallet \\\n  @near-wallet-selector/hot-wallet \\\n  @near-wallet-selector/intear-wallet \\\n  @near-wallet-selector/ledger \\\n  @near-wallet-selector/math-wallet \\\n  @near-wallet-selector/meteor-wallet \\\n  @near-wallet-selector/meteor-wallet-app \\\n  @near-wallet-selector/my-near-wallet \\\n  @near-wallet-selector/narwallets \\\n  @near-wallet-selector/near-mobile-wallet \\\n  @near-wallet-selector/near-snap \\\n  @near-wallet-selector/nightly \\\n  @near-wallet-selector/okx-wallet \\\n  @near-wallet-selector/ramper-wallet \\\n  @near-wallet-selector/react-hook \\\n  @near-wallet-selector/sender \\\n  @near-wallet-selector/unity-wallet \\\n  @near-wallet-selector/wallet-connect \\\n  @near-wallet-selector/welldone-wallet \\\n  @near-wallet-selector/xdefi\n```\n\nOptionally, you can install our [`modal-ui`](https://www.npmjs.com/package/@near-wallet-selector/modal-ui) (react) or [`modal-ui-js`](https://www.npmjs.com/package/@near-wallet-selector/modal-ui-js) package for a pre-built interface that wraps the `core` API and presents the supported wallets:\n\n```\n# Using NPM.\nnpm install @near-wallet-selector/modal-ui\n\n# Using Yarn.\nyarn add @near-wallet-selector/modal-ui\n\n# Using PNPM.\npnpm add @near-wallet-selector/modal-ui\n```\n\nThen in your dApp:\n\n```\nimport { setupWalletSelector } from \"@near-wallet-selector/core\";\nimport { setupModal } from \"@near-wallet-selector/modal-ui\";\nimport { setupArepaWallet } from \"@near-wallet-selector/arepa-wallet\";\nimport { setupBitgetWallet } from \"@near-wallet-selector/bitget-wallet\";\nimport { setupBitteWallet } from \"@near-wallet-selector/bitte-wallet\";\nimport { setupCoin98Wallet } from \"@near-wallet-selector/coin98-wallet\";\nimport { setupEthereumWallets } from \"@near-wallet-selector/ethereum-wallets\";\nimport { setupHereWallet } from \"@near-wallet-selector/here-wallet\";\nimport { setupHotWallet } from \"@near-wallet-selector/hot-wallet\";\nimport { setupIntearWallet } from \"@near-wallet-selector/intear-wallet\";\nimport { setupLedger } from \"@near-wallet-selector/ledger\";\nimport { setupMathWallet } from \"@near-wallet-selector/math-wallet\";\nimport { setupMeteorWallet } from \"@near-wallet-selector/meteor-wallet\";\nimport { setupMeteorWalletApp } from \"@near-wallet-selector/meteor-wallet-app\";\nimport { setupMyNearWallet } from \"@near-wallet-selector/my-near-wallet\";\nimport { setupNarwallets } from \"@near-wallet-selector/narwallets\";\nimport { setupNearMobileWallet } from \"@near-wallet-selector/near-mobile-wallet\";\nimport { setupNearSnap } from \"@near-wallet-selector/near-snap\";\nimport { setupNightly } from \"@near-wallet-selector/nightly\";\nimport { setupOkxWallet } from \"@near-wallet-selector/okx-wallet\";\nimport { setupRamperWallet } from \"@near-wallet-selector/ramper-wallet\";\nimport { setupSender } from \"@near-wallet-selector/sender\";\nimport { setupUnityWallet } from \"@near-wallet-selector/unity-wallet\";\nimport { setupWalletConnect } from \"@near-wallet-selector/wallet-connect\";\nimport { setupWelldoneWallet } from \"@near-wallet-selector/welldone-wallet\";\nimport { setupXDEFI } from \"@near-wallet-selector/xdefi\";\n\nconst selector = await setupWalletSelector({\n  network: \"testnet\",\n  modules: [\\\n    setupArepaWallet(),\\\n    setupBitgetWallet(),\\\n    setupBitteWallet(),\\\n    setupCoin98Wallet(),\\\n    setupEthereumWallets({ wagmiConfig, web3Modal }),\\\n    setupHereWallet(),\\\n    setupHotWallet(),\\\n    setupIntearWallet(),\\\n    setupLedger(),\\\n    setupMathWallet(),\\\n    setupMeteorWallet(),\\\n    setupMeteorWalletApp({ contractId: \"guest-book.testnet\" }),\\\n    setupMyNearWallet(),\\\n    setupNarwallets(),\\\n    setupNearMobileWallet(),\\\n    setupNearSnap(),\\\n    setupNightly(),\\\n    setupOkxWallet(),\\\n    setupRamperWallet(),\\\n    setupSender(),\\\n    setupUnityWallet({\\\n      projectId: \"c4f79cc...\",\\\n      metadata: {\\\n        name: \"Your dApp name\",\\\n        description: \"Example dApp used by NEAR Wallet Selector\",\\\n        url: \"https://github.com/near/wallet-selector\",\\\n        icons: [\"https://avatars.githubusercontent.com/u/37784886\"],\\\n      },\\\n    }),\\\n    setupWalletConnect({\\\n      projectId: \"c4f79cc...\",\\\n      metadata: {\\\n        name: \"NEAR Wallet Selector\",\\\n        description: \"Example dApp used by NEAR Wallet Selector\",\\\n        url: \"https://github.com/near/wallet-selector\",\\\n        icons: [\"https://avatars.githubusercontent.com/u/37784886\"],\\\n      },\\\n    }),\\\n    setupWelldoneWallet(),\\\n    setupXDEFI(),\\\n  ],\n});\n\nconst modal = setupModal(selector, {\n  contractId: \"guest-book.testnet\"\n});\n```\n\n## Wallet Package Documentation\n\n[Permalink: Wallet Package Documentation](https://github.com/near/wallet-selector#wallet-package-documentation)\n\nEach wallet package contains its own `README` document, please refer inside the [packages folder](https://github.com/near/wallet-selector/tree/main/packages) for extra information.\n\n## Contributing\n\n[Permalink: Contributing](https://github.com/near/wallet-selector#contributing)\n\nContributors may find the [`examples`](https://github.com/near/wallet-selector/blob/main/examples) directory useful as it provides a quick and consistent way to manually test new changes and/or bug fixes.\n\nMore details around contributing to this project can be found [here](https://github.com/near/wallet-selector/blob/main/CONTRIBUTING.md).\n\n## Editor Setup\n\n[Permalink: Editor Setup](https://github.com/near/wallet-selector#editor-setup)\n\nThis project uses [ESLint](https://eslint.org/) (with [Prettier](https://prettier.io/)) to enforce a consistent coding style. It's important that you configure your editor correctly to avoid issues when you're ready to open a Pull Request.\n\nAlthough this project uses Prettier, it's simply an \"internal\" dependency to our ESLint configuration. This is because we want Prettier to handle code styling while avoiding conflicts with ESLint which specifically focuses on potentially problematic code. As a result, **it's important that you switch off Prettier in your editor and ensure only ESLint is enabled**.\n\n## License\n\n[Permalink: License](https://github.com/near/wallet-selector#license)\n\nThis repository is distributed under the terms of both the MIT license and the Apache License (Version 2.0). See [LICENSE-MIT](https://github.com/near/wallet-selector/blob/main/LICENSE-MIT) and [LICENSE-APACHE](https://github.com/near/wallet-selector/blob/main/LICENSE-APACHE) for details.\n\n## About\n\nThis is a wallet selector modal that allows users to interact with NEAR dApps with a selection of available wallets.\n\n\n[near.github.io/wallet-selector/](https://near.github.io/wallet-selector/ \"https://near.github.io/wallet-selector/\")\n\n### Topics\n\n[blockchain](https://github.com/topics/blockchain \"Topic: blockchain\") [ledger](https://github.com/topics/ledger \"Topic: ledger\") [wallets](https://github.com/topics/wallets \"Topic: wallets\") [dapps](https://github.com/topics/dapps \"Topic: dapps\") [nearprotocol](https://github.com/topics/nearprotocol \"Topic: nearprotocol\") [near-blockchain](https://github.com/topics/near-blockchain \"Topic: near-blockchain\") [near-wallet](https://github.com/topics/near-wallet \"Topic: near-wallet\")\n\n### Resources\n\n[Readme](https://github.com/near/wallet-selector#readme-ov-file)\n\n### License\n\nApache-2.0, MIT licenses found\n\n\n### Licenses found\n\n[Apache-2.0\\\\\n\\\\\nLICENSE-APACHE](https://github.com/near/wallet-selector/blob/main/LICENSE-APACHE) [MIT\\\\\n\\\\\nLICENSE-MIT](https://github.com/near/wallet-selector/blob/main/LICENSE-MIT)\n\n### Code of conduct\n\n[Code of conduct](https://github.com/near/wallet-selector#coc-ov-file)\n\n### Contributing\n\n[Contributing](https://github.com/near/wallet-selector#contributing-ov-file)\n\n### Security policy\n\n[Security policy](https://github.com/near/wallet-selector#security-ov-file)\n\n### Uh oh!\n\nThere was an error while loading. [Please reload this page](https://github.com/near/wallet-selector).\n\n[Activity](https://github.com/near/wallet-selector/activity)\n\n[Custom properties](https://github.com/near/wallet-selector/custom-properties)\n\n### Stars\n\n[**177**\\\\\nstars](https://github.com/near/wallet-selector/stargazers)\n\n### Watchers\n\n[**12**\\\\\nwatching](https://github.com/near/wallet-selector/watchers)\n\n### Forks\n\n[**185**\\\\\nforks](https://github.com/near/wallet-selector/forks)\n\n[Report repository](https://github.com/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fnear%2Fwallet-selector&report=near+%28user%29)\n\n## [Releases\\  558](https://github.com/near/wallet-selector/releases)\n\n[@near-wallet-selector/nightly@10.1.3\\\\\nLatest\\\\\n\\\\\nyesterdayDec 2, 2025](https://github.com/near/wallet-selector/releases/tag/%40near-wallet-selector%2Fnightly%4010.1.3)\n\n[\\+ 557 releases](https://github.com/near/wallet-selector/releases)\n\n## [Packages\\  0](https://github.com/orgs/near/packages?repo_name=wallet-selector)\n\nNo packages published\n\n### Uh oh!\n\nThere was an error while loading. [Please reload this page](https://github.com/near/wallet-selector).\n\n## [Contributors\\  103](https://github.com/near/wallet-selector/graphs/contributors)\n\n- [![@lewis-sqa](https://avatars.githubusercontent.com/u/97291103?s=64&v=4)](https://github.com/lewis-sqa)\n- [![@kujtimprenkuSQA](https://avatars.githubusercontent.com/u/95851345?s=64&v=4)](https://github.com/kujtimprenkuSQA)\n- [![@amirsaran3](https://avatars.githubusercontent.com/u/95852708?s=64&v=4)](https://github.com/amirsaran3)\n- [![@DamirSQA](https://avatars.githubusercontent.com/u/111346686?s=64&v=4)](https://github.com/DamirSQA)\n- [![@roman009](https://avatars.githubusercontent.com/u/14812536?s=64&v=4)](https://github.com/roman009)\n- [![@ahnafalfariza](https://avatars.githubusercontent.com/u/33027382?s=64&v=4)](https://github.com/ahnafalfariza)\n- [![@dependabot[bot]](https://avatars.githubusercontent.com/in/29110?s=64&v=4)](https://github.com/apps/dependabot)\n- [![@trechriron](https://avatars.githubusercontent.com/u/1510451?s=64&v=4)](https://github.com/trechriron)\n- [![@rgolea](https://avatars.githubusercontent.com/u/8843202?s=64&v=4)](https://github.com/rgolea)\n- [![@erditkurteshiSQA](https://avatars.githubusercontent.com/u/95851348?s=64&v=4)](https://github.com/erditkurteshiSQA)\n- [![@HarisSQA](https://avatars.githubusercontent.com/u/110036570?s=64&v=4)](https://github.com/HarisSQA)\n- [![@paouvrard](https://avatars.githubusercontent.com/u/29397451?s=64&v=4)](https://github.com/paouvrard)\n- [![@hcho112](https://avatars.githubusercontent.com/u/6027014?s=64&v=4)](https://github.com/hcho112)\n- [![@denbite](https://avatars.githubusercontent.com/u/41162202?s=64&v=4)](https://github.com/denbite)\n\n[\\+ 89 contributors](https://github.com/near/wallet-selector/graphs/contributors)\n\n## Languages\n\n- [TypeScript93.9%](https://github.com/near/wallet-selector/search?l=typescript)\n- [CSS4.9%](https://github.com/near/wallet-selector/search?l=css)\n- [JavaScript1.1%](https://github.com/near/wallet-selector/search?l=javascript)\n- [Shell0.1%](https://github.com/near/wallet-selector/search?l=shell)\n\nYou cant perform that action at this time.","path":null,"size_bytes":27825,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":1977,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1883,"size_tokens":null},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":791,"size_tokens":null},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":261,"size_tokens":null},"client/src/components/bridge/bridge-execution-tracker.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { \n  CheckCircle2, \n  Circle, \n  Loader2, \n  XCircle, \n  ExternalLink, \n  Clock,\n  Shield,\n  ArrowRight,\n  RefreshCw,\n  Copy,\n} from \"lucide-react\";\nimport { useBridgeExecution, formatTime, type BridgeExecution } from \"@/hooks/use-bridge\";\nimport { cn } from \"@/lib/utils\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface BridgeExecutionTrackerProps {\n  executionId: string | null;\n  onComplete?: (execution: BridgeExecution) => void;\n  onError?: (error: string) => void;\n  onClose?: () => void;\n}\n\nconst EXPLORER_URLS: Record<string, string> = {\n  zcash: \"https://explorer.zcha.in/transactions/\",\n  ethereum: \"https://etherscan.io/tx/\",\n  near: \"https://explorer.testnet.near.org/transactions/\",\n  polygon: \"https://polygonscan.com/tx/\",\n  binance: \"https://bscscan.com/tx/\",\n  avalanche: \"https://snowtrace.io/tx/\",\n};\n\nfunction getStepIcon(status: string) {\n  switch (status) {\n    case \"completed\":\n      return <CheckCircle2 className=\"h-5 w-5 text-green-500\" />;\n    case \"in_progress\":\n      return <Loader2 className=\"h-5 w-5 text-primary animate-spin\" />;\n    case \"failed\":\n      return <XCircle className=\"h-5 w-5 text-destructive\" />;\n    default:\n      return <Circle className=\"h-5 w-5 text-muted-foreground\" />;\n  }\n}\n\nfunction getStatusBadge(status: string) {\n  switch (status) {\n    case \"completed\":\n      return <Badge variant=\"default\" className=\"bg-green-500/20 text-green-400 border-green-500/30\">Completed</Badge>;\n    case \"in_progress\":\n    case \"pending_signature\":\n    case \"executing\":\n      return <Badge variant=\"default\" className=\"bg-primary/20 text-primary border-primary/30\">In Progress</Badge>;\n    case \"failed\":\n      return <Badge variant=\"destructive\">Failed</Badge>;\n    default:\n      return <Badge variant=\"secondary\">Pending</Badge>;\n  }\n}\n\nexport function BridgeExecutionTracker({ executionId, onComplete, onError, onClose }: BridgeExecutionTrackerProps) {\n  const { data, isLoading, error, refetch } = useBridgeExecution(executionId);\n  const [prevStatus, setPrevStatus] = useState<string | null>(null);\n  const { toast } = useToast();\n\n  const execution = data?.execution;\n\n  useEffect(() => {\n    if (execution && execution.status !== prevStatus) {\n      setPrevStatus(execution.status);\n      \n      if (execution.status === \"completed\" && onComplete) {\n        onComplete(execution);\n        toast({\n          title: \"Bridge Completed\",\n          description: \"Your assets have been successfully bridged!\",\n        });\n      }\n      \n      if (execution.status === \"failed\" && onError && execution.error) {\n        onError(execution.error);\n        toast({\n          title: \"Bridge Failed\",\n          description: execution.error,\n          variant: \"destructive\",\n        });\n      }\n    }\n  }, [execution, prevStatus, onComplete, onError, toast]);\n\n  const copyToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text);\n    toast({\n      title: \"Copied\",\n      description: \"Transaction hash copied to clipboard\",\n    });\n  };\n\n  if (!executionId) {\n    return null;\n  }\n\n  if (isLoading && !execution) {\n    return (\n      <Card className=\"bg-card/50 backdrop-blur-sm border-primary/20\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-center gap-3\">\n            <Loader2 className=\"h-5 w-5 animate-spin text-primary\" />\n            <span className=\"text-muted-foreground\">Loading execution details...</span>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (error || !execution) {\n    return (\n      <Card className=\"bg-card/50 backdrop-blur-sm border-destructive/20\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex flex-col items-center gap-4\">\n            <XCircle className=\"h-8 w-8 text-destructive\" />\n            <p className=\"text-muted-foreground\">Failed to load execution details</p>\n            <Button variant=\"outline\" size=\"sm\" onClick={() => refetch()} data-testid=\"button-retry-fetch\">\n              <RefreshCw className=\"h-4 w-4 mr-2\" />\n              Retry\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const completedSteps = execution.steps.filter(s => s.status === \"completed\").length;\n  const totalSteps = execution.steps.length;\n  const progressPercent = totalSteps > 0 ? (completedSteps / totalSteps) * 100 : 0;\n\n  return (\n    <Card className=\"bg-card/50 backdrop-blur-sm border-primary/20\" data-testid=\"card-execution-tracker\">\n      <CardHeader className=\"flex flex-row items-center justify-between gap-4 pb-4\">\n        <div className=\"flex items-center gap-3\">\n          <Shield className=\"h-5 w-5 text-primary\" />\n          <CardTitle className=\"text-lg font-medium\">Bridge Execution</CardTitle>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          {getStatusBadge(execution.status)}\n          {onClose && execution.status !== \"in_progress\" && execution.status !== \"executing\" && (\n            <Button variant=\"ghost\" size=\"sm\" onClick={onClose} data-testid=\"button-close-tracker\">\n              Close\n            </Button>\n          )}\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-muted-foreground\">Progress</span>\n            <span className=\"font-medium\">{completedSteps} / {totalSteps} steps</span>\n          </div>\n          <Progress value={progressPercent} className=\"h-2\" data-testid=\"progress-execution\" />\n        </div>\n\n        <div className=\"space-y-3\">\n          {execution.steps.map((step, index) => (\n            <div \n              key={step.step} \n              className={cn(\n                \"flex items-start gap-3 p-3 rounded-lg transition-colors\",\n                step.status === \"in_progress\" && \"bg-primary/5 border border-primary/20\",\n                step.status === \"completed\" && \"bg-green-500/5\",\n                step.status === \"failed\" && \"bg-destructive/5\"\n              )}\n              data-testid={`step-${step.step}-${step.status}`}\n            >\n              <div className=\"flex-shrink-0 mt-0.5\">\n                {getStepIcon(step.status)}\n              </div>\n              <div className=\"flex-1 min-w-0 space-y-1\">\n                <div className=\"flex items-center gap-2 flex-wrap\">\n                  <span className=\"font-medium text-sm\">Step {step.step}</span>\n                  {step.status === \"in_progress\" && (\n                    <Badge variant=\"outline\" className=\"text-xs gap-1\">\n                      <Clock className=\"h-3 w-3\" />\n                      Processing\n                    </Badge>\n                  )}\n                </div>\n                <p className=\"text-sm text-muted-foreground\">{step.message}</p>\n                {step.transactionHash && (\n                  <div className=\"flex items-center gap-2 mt-2\">\n                    <code className=\"text-xs bg-muted/50 px-2 py-1 rounded font-mono truncate max-w-[200px]\">\n                      {step.transactionHash.slice(0, 16)}...\n                    </code>\n                    <Button \n                      variant=\"ghost\" \n                      size=\"icon\" \n                      className=\"h-6 w-6\"\n                      onClick={() => copyToClipboard(step.transactionHash!)}\n                      data-testid={`button-copy-hash-${step.step}`}\n                    >\n                      <Copy className=\"h-3 w-3\" />\n                    </Button>\n                  </div>\n                )}\n                {step.timestamp && (\n                  <p className=\"text-xs text-muted-foreground\">\n                    {new Date(step.timestamp).toLocaleTimeString()}\n                  </p>\n                )}\n              </div>\n              {index < execution.steps.length - 1 && (\n                <ArrowRight className=\"h-4 w-4 text-muted-foreground/50 flex-shrink-0\" />\n              )}\n            </div>\n          ))}\n        </div>\n\n        {(execution.sourceTransaction || execution.targetTransaction) && (\n          <div className=\"pt-4 border-t border-border/50 space-y-3\">\n            <h4 className=\"font-medium text-sm\">Transaction Details</h4>\n            \n            {execution.sourceTransaction && (\n              <div className=\"flex items-center justify-between p-3 rounded-lg bg-muted/30\">\n                <div className=\"space-y-1\">\n                  <p className=\"text-xs text-muted-foreground\">Source Transaction</p>\n                  <div className=\"flex items-center gap-2\">\n                    <code className=\"text-xs font-mono\">\n                      {execution.sourceTransaction.hash.slice(0, 12)}...{execution.sourceTransaction.hash.slice(-8)}\n                    </code>\n                    <Badge variant=\"outline\" className=\"text-xs\">\n                      {execution.sourceTransaction.confirmations} confirmations\n                    </Badge>\n                  </div>\n                </div>\n                <a \n                  href={execution.sourceTransaction.explorerUrl} \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"text-primary hover:text-primary/80 transition-colors\"\n                  data-testid=\"link-source-explorer\"\n                >\n                  <ExternalLink className=\"h-4 w-4\" />\n                </a>\n              </div>\n            )}\n            \n            {execution.targetTransaction && (\n              <div className=\"flex items-center justify-between p-3 rounded-lg bg-muted/30\">\n                <div className=\"space-y-1\">\n                  <p className=\"text-xs text-muted-foreground\">Target Transaction</p>\n                  <div className=\"flex items-center gap-2\">\n                    <code className=\"text-xs font-mono\">\n                      {execution.targetTransaction.hash.slice(0, 12)}...{execution.targetTransaction.hash.slice(-8)}\n                    </code>\n                    <Badge variant=\"outline\" className=\"text-xs\">\n                      {execution.targetTransaction.confirmations} confirmations\n                    </Badge>\n                  </div>\n                </div>\n                <a \n                  href={execution.targetTransaction.explorerUrl} \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"text-primary hover:text-primary/80 transition-colors\"\n                  data-testid=\"link-target-explorer\"\n                >\n                  <ExternalLink className=\"h-4 w-4\" />\n                </a>\n              </div>\n            )}\n          </div>\n        )}\n\n        {execution.error && (\n          <div className=\"p-4 rounded-lg bg-destructive/10 border border-destructive/20\">\n            <div className=\"flex items-start gap-3\">\n              <XCircle className=\"h-5 w-5 text-destructive flex-shrink-0 mt-0.5\" />\n              <div className=\"space-y-1\">\n                <p className=\"font-medium text-sm text-destructive\">Execution Failed</p>\n                <p className=\"text-sm text-muted-foreground\">{execution.error}</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div className=\"flex items-center justify-between text-xs text-muted-foreground pt-2 border-t border-border/30\">\n          <span>Execution ID: {execution.id.slice(0, 8)}...</span>\n          <span>Last updated: {new Date(execution.updatedAt).toLocaleTimeString()}</span>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":11782,"size_tokens":null},"client/src/components/app-sidebar.tsx":{"content":"import { useLocation, Link } from \"wouter\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarHeader,\n  SidebarFooter,\n} from \"@/components/ui/sidebar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  ArrowLeftRight,\n  TrendingUp,\n  Brain,\n  Wallet,\n  Code,\n  Palette,\n  Radio,\n  CreditCard,\n  BarChart3,\n  Shield,\n  Zap,\n} from \"lucide-react\";\n\nconst workflows = [\n  {\n    id: \"ghostbridge\",\n    title: \"GhostBridge\",\n    subtitle: \"Cross-Chain Bridge\",\n    description: \"Private ZEC bridging\",\n    icon: ArrowLeftRight,\n    path: \"/\",\n    color: \"text-amber-400\",\n    badge: \"Bridge\",\n  },\n  {\n    id: \"shadowtrader\",\n    title: \"ShadowTrader\",\n    subtitle: \"Private DeFi\",\n    description: \"Private trading & swaps\",\n    icon: TrendingUp,\n    path: \"/shadowtrader\",\n    color: \"text-emerald-400\",\n    badge: \"DeFi\",\n  },\n  {\n    id: \"enigma\",\n    title: \"EnigmaAI\",\n    subtitle: \"Private Compute\",\n    description: \"Encrypted AI processing\",\n    icon: Brain,\n    path: \"/enigma\",\n    color: \"text-purple-400\",\n    badge: \"AI\",\n  },\n  {\n    id: \"vault\",\n    title: \"VaultAI\",\n    subtitle: \"Self-Custody\",\n    description: \"Multi-chain wallet\",\n    icon: Wallet,\n    path: \"/vault\",\n    color: \"text-blue-400\",\n    badge: \"Wallet\",\n  },\n  {\n    id: \"shieldcoder\",\n    title: \"ShieldCoder\",\n    subtitle: \"Dev Tools\",\n    description: \"Privacy dev toolkit\",\n    icon: Code,\n    path: \"/shieldcoder\",\n    color: \"text-cyan-400\",\n    badge: \"Dev\",\n  },\n  {\n    id: \"privamuse\",\n    title: \"PrivaMuse\",\n    subtitle: \"Creative Privacy\",\n    description: \"AI art & stories\",\n    icon: Palette,\n    path: \"/privamuse\",\n    color: \"text-pink-400\",\n    badge: \"Creative\",\n  },\n  {\n    id: \"echoprivacy\",\n    title: \"EchoPrivacy\",\n    subtitle: \"Content & Media\",\n    description: \"Privacy news & content\",\n    icon: Radio,\n    path: \"/echoprivacy\",\n    color: \"text-orange-400\",\n    badge: \"Media\",\n  },\n  {\n    id: \"anonpay\",\n    title: \"AnonPay\",\n    subtitle: \"Private Payments\",\n    description: \"Scheduled shielded tx\",\n    icon: CreditCard,\n    path: \"/anonpay\",\n    color: \"text-green-400\",\n    badge: \"Payments\",\n  },\n  {\n    id: \"zinsight\",\n    title: \"ZInsight\",\n    subtitle: \"Analytics\",\n    description: \"Zcash data insights\",\n    icon: BarChart3,\n    path: \"/zinsight\",\n    color: \"text-indigo-400\",\n    badge: \"Analytics\",\n  },\n];\n\nexport function AppSidebar() {\n  const [location] = useLocation();\n\n  return (\n    <Sidebar>\n      <SidebarHeader className=\"p-4 border-b border-sidebar-border\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-10 h-10 rounded-md bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center\">\n            <Shield className=\"w-6 h-6 text-black\" />\n          </div>\n          <div>\n            <h1 className=\"font-bold text-lg text-sidebar-foreground\">ZPrivacy</h1>\n            <p className=\"text-xs text-muted-foreground\">Unified Privacy Platform</p>\n          </div>\n        </div>\n      </SidebarHeader>\n      \n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel className=\"text-xs uppercase tracking-wider text-muted-foreground px-4\">\n            Workflows\n          </SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {workflows.map((workflow) => {\n                const isActive = location === workflow.path;\n                const Icon = workflow.icon;\n                \n                return (\n                  <SidebarMenuItem key={workflow.id}>\n                    <SidebarMenuButton\n                      asChild\n                      isActive={isActive}\n                      className=\"h-auto py-3\"\n                      data-testid={`nav-${workflow.id}`}\n                    >\n                      <Link href={workflow.path}>\n                        <div className=\"flex items-start gap-3 w-full\">\n                          <div className={`mt-0.5 ${workflow.color}`}>\n                            <Icon className=\"w-5 h-5\" />\n                          </div>\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"flex items-center gap-2\">\n                              <span className=\"font-medium text-sm\">{workflow.title}</span>\n                              <Badge variant=\"outline\" className=\"text-[10px] px-1.5 py-0\">\n                                {workflow.badge}\n                              </Badge>\n                            </div>\n                            <p className=\"text-xs text-muted-foreground truncate\">\n                              {workflow.description}\n                            </p>\n                          </div>\n                        </div>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                );\n              })}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n\n      <SidebarFooter className=\"p-4 border-t border-sidebar-border\">\n        <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n          <Zap className=\"w-4 h-4 text-amber-400\" />\n          <span>Powered by Zcash Privacy</span>\n        </div>\n      </SidebarFooter>\n    </Sidebar>\n  );\n}\n","path":null,"size_bytes":5381,"size_tokens":null},"client/src/pages/ghostbridge.tsx":{"content":"import { useState, useCallback, useEffect } from \"react\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { useWallet } from \"@/lib/wallet-context\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport type { ChatMessage, ChatResponse, BridgePlan, Transaction, FunctionCall } from \"@shared/schema\";\nimport {\n  ArrowLeftRight,\n  TrendingUp,\n  TrendingDown,\n  Brain,\n  Wallet as WalletIcon,\n  Code,\n  Palette,\n  Radio,\n  CreditCard,\n  BarChart3,\n  Shield,\n  RefreshCw,\n  Send,\n  Lock,\n  Zap,\n  Activity,\n  Eye,\n  EyeOff,\n  Clock,\n  Plus,\n  Trash2,\n  Play,\n  Pause,\n  Check,\n  Database,\n  LineChart,\n  Sparkles,\n  FileText,\n  Image,\n  MessageSquare,\n  ArrowRightLeft,\n  Copy,\n  ExternalLink,\n} from \"lucide-react\";\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  Filler,\n} from \"chart.js\";\nimport { Line, Bar } from \"react-chartjs-2\";\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  Filler\n);\n\ntype WorkflowId = \n  | \"ghostbridge\" \n  | \"shadowtrader\" \n  | \"enigma\" \n  | \"vault\" \n  | \"shieldcoder\" \n  | \"privamuse\" \n  | \"echoprivacy\" \n  | \"anonpay\" \n  | \"zinsight\";\n\ninterface WorkflowConfig {\n  id: WorkflowId;\n  title: string;\n  subtitle: string;\n  description: string;\n  icon: typeof ArrowLeftRight;\n  color: string;\n  gradientFrom: string;\n  gradientTo: string;\n  placeholder: string;\n}\n\nconst WORKFLOWS: WorkflowConfig[] = [\n  {\n    id: \"ghostbridge\",\n    title: \"GhostBridge\",\n    subtitle: \"Cross-Chain Bridge\",\n    description: \"Private ZEC bridging across 8 chains\",\n    icon: ArrowLeftRight,\n    color: \"text-amber-400\",\n    gradientFrom: \"from-amber-400\",\n    gradientTo: \"to-amber-600\",\n    placeholder: \"Bridge 1 ETH to Zcash privately...\",\n  },\n  {\n    id: \"shadowtrader\",\n    title: \"ShadowTrader\",\n    subtitle: \"Private DeFi\",\n    description: \"Private trading with Arcium encryption\",\n    icon: TrendingUp,\n    color: \"text-emerald-400\",\n    gradientFrom: \"from-emerald-400\",\n    gradientTo: \"to-emerald-600\",\n    placeholder: \"Swap 1 ZEC for USDC privately...\",\n  },\n  {\n    id: \"enigma\",\n    title: \"EnigmaAI\",\n    subtitle: \"Private Compute\",\n    description: \"Homomorphic encryption processing\",\n    icon: Brain,\n    color: \"text-purple-400\",\n    gradientFrom: \"from-purple-400\",\n    gradientTo: \"to-purple-600\",\n    placeholder: \"Encrypt my data with Paillier...\",\n  },\n  {\n    id: \"vault\",\n    title: \"VaultAI\",\n    subtitle: \"Self-Custody\",\n    description: \"Multi-chain wallet management\",\n    icon: WalletIcon,\n    color: \"text-blue-400\",\n    gradientFrom: \"from-blue-400\",\n    gradientTo: \"to-blue-600\",\n    placeholder: \"Show my balances across all chains...\",\n  },\n  {\n    id: \"shieldcoder\",\n    title: \"ShieldCoder\",\n    subtitle: \"Dev Tools\",\n    description: \"ZK development snippets & tools\",\n    icon: Code,\n    color: \"text-cyan-400\",\n    gradientFrom: \"from-cyan-400\",\n    gradientTo: \"to-cyan-600\",\n    placeholder: \"Generate ZK proof verification code...\",\n  },\n  {\n    id: \"privamuse\",\n    title: \"PrivaMuse\",\n    subtitle: \"Creative Privacy\",\n    description: \"Privacy memes, stories & art\",\n    icon: Palette,\n    color: \"text-pink-400\",\n    gradientFrom: \"from-pink-400\",\n    gradientTo: \"to-pink-600\",\n    placeholder: \"Create a privacy-themed meme...\",\n  },\n  {\n    id: \"echoprivacy\",\n    title: \"EchoPrivacy\",\n    subtitle: \"Content & Media\",\n    description: \"Privacy education & news\",\n    icon: Radio,\n    color: \"text-orange-400\",\n    gradientFrom: \"from-orange-400\",\n    gradientTo: \"to-orange-600\",\n    placeholder: \"Write an article about Zcash privacy...\",\n  },\n  {\n    id: \"anonpay\",\n    title: \"AnonPay\",\n    subtitle: \"Private Payments\",\n    description: \"Scheduled shielded transactions\",\n    icon: CreditCard,\n    color: \"text-green-400\",\n    gradientFrom: \"from-green-400\",\n    gradientTo: \"to-green-600\",\n    placeholder: \"Schedule 0.5 ZEC monthly to zs1...\",\n  },\n  {\n    id: \"zinsight\",\n    title: \"ZInsight\",\n    subtitle: \"Analytics\",\n    description: \"Zcash blockchain insights\",\n    icon: BarChart3,\n    color: \"text-indigo-400\",\n    gradientFrom: \"from-indigo-400\",\n    gradientTo: \"to-indigo-600\",\n    placeholder: \"Analyze Zcash shielded pool trends...\",\n  },\n];\n\nconst OTHER_CHAINS = [\n  { id: \"ethereum\", label: \"ETH\", placeholder: \"0x...\", validate: (addr: string) => /^0x[a-fA-F0-9]{40}$/.test(addr) },\n  { id: \"polygon\", label: \"MATIC\", placeholder: \"0x...\", validate: (addr: string) => /^0x[a-fA-F0-9]{40}$/.test(addr) },\n  { id: \"zcash\", label: \"ZEC\", placeholder: \"t1... or zs1...\", validate: (addr: string) => /^(t1|zs1)[a-zA-Z0-9]{33,}$/.test(addr) },\n];\n\nconst STORAGE_KEY = \"ghostbridge_chain_addresses\";\n\nexport default function GhostBridge() {\n  const { wallet, connect, fetchBalance } = useWallet();\n  const { toast } = useToast();\n  const [activeWorkflow, setActiveWorkflow] = useState<WorkflowId>(\"ghostbridge\");\n  const [messages, setMessages] = useState<Record<WorkflowId, ChatMessage[]>>({\n    ghostbridge: [],\n    shadowtrader: [],\n    enigma: [],\n    vault: [],\n    shieldcoder: [],\n    privamuse: [],\n    echoprivacy: [],\n    anonpay: [],\n    zinsight: [],\n  });\n  const [input, setInput] = useState(\"\");\n  const [currentPlan, setCurrentPlan] = useState<BridgePlan | undefined>();\n  const [balances, setBalances] = useState<Record<string, string>>({});\n  const [isLoadingBalances, setIsLoadingBalances] = useState(false);\n  const [chainAddresses, setChainAddresses] = useState<Record<string, string>>(() => {\n    try {\n      const stored = localStorage.getItem(STORAGE_KEY);\n      return stored ? JSON.parse(stored) : {};\n    } catch {\n      return {};\n    }\n  });\n  const [showAddressInputs, setShowAddressInputs] = useState(false);\n  const [addressErrors, setAddressErrors] = useState<Record<string, string>>({});\n\n  const currentWorkflow = WORKFLOWS.find(w => w.id === activeWorkflow)!;\n\n  const { data: transactionsData, refetch: refetchTransactions } = useQuery<{ transactions: Transaction[] }>({\n    queryKey: [\"/api/transactions\"],\n    enabled: wallet.isConnected,\n  });\n\n  const fetchBalances = useCallback(async () => {\n    if (!wallet.isConnected || !wallet.accountId) return;\n    \n    setIsLoadingBalances(true);\n    try {\n      const params = new URLSearchParams();\n      params.set(\"near\", wallet.accountId);\n      \n      const storedAddresses = (() => {\n        try {\n          const stored = localStorage.getItem(STORAGE_KEY);\n          return stored ? JSON.parse(stored) : {};\n        } catch {\n          return {};\n        }\n      })();\n      \n      for (const chain of OTHER_CHAINS) {\n        const addr = storedAddresses[chain.id];\n        if (addr && chain.validate(addr)) {\n          params.set(chain.id, addr);\n        }\n      }\n      \n      const response = await fetch(`/api/balances?${params.toString()}`);\n      if (response.ok) {\n        const data = await response.json();\n        if (data.balances) {\n          const balanceMap: Record<string, string> = {};\n          for (const b of data.balances) {\n            balanceMap[b.chain] = b.balance;\n          }\n          setBalances(balanceMap);\n        }\n      }\n    } catch (error) {\n      console.error(\"Error fetching balances:\", error);\n    } finally {\n      setIsLoadingBalances(false);\n    }\n  }, [wallet.isConnected, wallet.accountId]);\n\n  useEffect(() => {\n    if (wallet.isConnected) {\n      fetchBalances();\n    }\n  }, [wallet.isConnected, fetchBalances]);\n\n  const handleFunctionCall = useCallback((functionCall: FunctionCall) => {\n    switch (functionCall.name) {\n      case \"check_balance\":\n        toast({\n          title: \"Balance Check\",\n          description: \"Your balances are displayed in the dashboard.\",\n        });\n        fetchBalances();\n        break;\n      case \"create_bridge_quote\":\n        toast({\n          title: \"Bridge Quote Ready\",\n          description: \"Review the quote details in the response.\",\n        });\n        break;\n      case \"execute_private_trade\":\n        toast({\n          title: \"Trade Submitted\",\n          description: \"Your private trade is being processed.\",\n        });\n        break;\n      case \"encrypt_data\":\n        toast({\n          title: \"Data Encrypted\",\n          description: \"Homomorphic encryption complete.\",\n        });\n        break;\n      case \"generate_privacy_code\":\n        toast({\n          title: \"Code Generated\",\n          description: \"Your privacy code snippet is ready.\",\n        });\n        break;\n      case \"schedule_payment\":\n        toast({\n          title: \"Payment Scheduled\",\n          description: \"Your private payment has been scheduled.\",\n        });\n        break;\n      case \"analyze_zcash_metrics\":\n        toast({\n          title: \"Analysis Complete\",\n          description: \"Zcash metrics analysis is ready.\",\n        });\n        break;\n      default:\n        console.log(\"Function call:\", functionCall);\n    }\n  }, [toast, fetchBalances]);\n\n  const chatMutation = useMutation({\n    mutationFn: async (message: string) => {\n      const walletHeaders: Record<string, string> = {};\n      if (wallet.isConnected && wallet.accountId) {\n        walletHeaders[\"x-wallet-address\"] = wallet.accountId;\n        walletHeaders[\"x-wallet-chain\"] = \"near\";\n      }\n\n      const response = await apiRequest(\"POST\", \"/api/chat\", {\n        message,\n        workflow: activeWorkflow,\n        conversationHistory: messages[activeWorkflow].map(m => ({\n          role: m.role,\n          content: m.content,\n        })),\n      }, walletHeaders);\n      return await response.json() as ChatResponse;\n    },\n    onSuccess: (data) => {\n      setMessages(prev => ({\n        ...prev,\n        [activeWorkflow]: [...prev[activeWorkflow], data.message],\n      }));\n      if (data.bridgePlan) {\n        setCurrentPlan(data.bridgePlan);\n      }\n      if (data.functionCall) {\n        handleFunctionCall(data.functionCall);\n      }\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: error instanceof Error ? error.message : \"Failed to process request\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSendMessage = useCallback(() => {\n    if (!input.trim()) return;\n    const userMessage: ChatMessage = {\n      id: `msg-${Date.now()}`,\n      role: \"user\",\n      content: input,\n      timestamp: new Date().toISOString(),\n    };\n    setMessages(prev => ({\n      ...prev,\n      [activeWorkflow]: [...prev[activeWorkflow], userMessage],\n    }));\n    chatMutation.mutate(input);\n    setInput(\"\");\n  }, [input, chatMutation, activeWorkflow]);\n\n  const handleConnect = useCallback(async () => {\n    await connect();\n  }, [connect]);\n\n  const copyToClipboard = useCallback((text: string) => {\n    navigator.clipboard.writeText(text);\n    toast({ title: \"Copied to clipboard\" });\n  }, [toast]);\n\n  if (!wallet.isConnected) {\n    return (\n      <div className=\"min-h-screen flex flex-col bg-background flex-1 w-full\">\n        <div className=\"flex-1 flex items-center justify-center p-8\">\n          <Card className=\"max-w-lg w-full text-center\">\n            <CardHeader className=\"text-center pb-2\">\n              <div className=\"w-20 h-20 rounded-xl bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center mx-auto mb-4\">\n                <Shield className=\"w-10 h-10 text-black\" />\n              </div>\n              <CardTitle className=\"text-2xl\">Welcome to GhostBridge AI</CardTitle>\n              <CardDescription className=\"text-base mt-2\">\n                Your unified privacy platform with 9 specialized AI workflows\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              <div className=\"grid grid-cols-3 gap-3\">\n                {WORKFLOWS.slice(0, 9).map((workflow) => {\n                  const Icon = workflow.icon;\n                  return (\n                    <div\n                      key={workflow.id}\n                      className=\"flex flex-col items-center p-3 rounded-lg bg-muted/50 text-center\"\n                    >\n                      <div className={`w-8 h-8 rounded-md bg-gradient-to-br ${workflow.gradientFrom} ${workflow.gradientTo} flex items-center justify-center mb-2`}>\n                        <Icon className=\"w-4 h-4 text-white\" />\n                      </div>\n                      <span className=\"text-xs font-medium\">{workflow.title}</span>\n                    </div>\n                  );\n                })}\n              </div>\n              \n              <div className=\"space-y-3\">\n                <p className=\"text-sm text-muted-foreground text-center\">\n                  Connect your wallet to access all features\n                </p>\n                <Button \n                  className=\"w-full bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-black font-semibold\" \n                  size=\"lg\"\n                  onClick={handleConnect}\n                  data-testid=\"button-connect-wallet\"\n                >\n                  <WalletIcon className=\"w-5 h-5 mr-2\" />\n                  Connect Wallet\n                </Button>\n                <p className=\"text-xs text-muted-foreground text-center\">\n                  Supports NEAR wallets (Meteor, HOT, MyNEAR, Ledger, and more)\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  const currentMessages = messages[activeWorkflow];\n\n  return (\n    <div className=\"flex-1 w-full flex flex-col h-full overflow-hidden bg-background\">\n      <div className=\"p-4 border-b border-border shrink-0\">\n        <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n          <div className=\"flex items-center gap-3\">\n            <div className={`w-10 h-10 rounded-md bg-gradient-to-br ${currentWorkflow.gradientFrom} ${currentWorkflow.gradientTo} flex items-center justify-center`}>\n              <currentWorkflow.icon className=\"w-6 h-6 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-xl font-bold\">{currentWorkflow.title}</h1>\n              <p className=\"text-sm text-muted-foreground\">{currentWorkflow.description}</p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2 flex-wrap\">\n            <Badge variant=\"outline\" className=\"text-amber-400 border-amber-400/50\">\n              <Shield className=\"w-3 h-3 mr-1\" />\n              Shielded\n            </Badge>\n            <Badge variant=\"outline\" className=\"text-emerald-400 border-emerald-400/50\">\n              <Activity className=\"w-3 h-3 mr-1\" />\n              Connected\n            </Badge>\n            <div className=\"flex items-center gap-2 px-3 py-1.5 rounded-md bg-muted/50\">\n              <div className=\"w-2 h-2 rounded-full bg-emerald-400 animate-pulse\" />\n              <span className=\"text-sm font-mono truncate max-w-32\">\n                {wallet.accountId?.slice(0, 12)}...\n              </span>\n              <Button \n                variant=\"ghost\" \n                size=\"icon\" \n                className=\"h-6 w-6\"\n                onClick={() => copyToClipboard(wallet.accountId || \"\")}\n                data-testid=\"button-copy-address\"\n              >\n                <Copy className=\"w-3 h-3\" />\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex-1 flex overflow-hidden\">\n        <div className=\"w-64 border-r border-border p-4 space-y-4 overflow-y-auto shrink-0 hidden lg:block\">\n          <div>\n            <h3 className=\"text-xs font-medium text-muted-foreground uppercase mb-3\">Workflows</h3>\n            <div className=\"space-y-1\">\n              {WORKFLOWS.map((workflow) => {\n                const Icon = workflow.icon;\n                const isActive = activeWorkflow === workflow.id;\n                return (\n                  <button\n                    key={workflow.id}\n                    onClick={() => setActiveWorkflow(workflow.id)}\n                    className={`w-full flex items-center gap-3 p-2.5 rounded-md transition-colors ${\n                      isActive \n                        ? \"bg-muted\" \n                        : \"hover-elevate\"\n                    }`}\n                    data-testid={`workflow-${workflow.id}`}\n                  >\n                    <div className={`w-8 h-8 rounded-md bg-gradient-to-br ${workflow.gradientFrom} ${workflow.gradientTo} flex items-center justify-center shrink-0`}>\n                      <Icon className=\"w-4 h-4 text-white\" />\n                    </div>\n                    <div className=\"text-left min-w-0\">\n                      <div className=\"text-sm font-medium truncate\">{workflow.title}</div>\n                      <div className=\"text-xs text-muted-foreground truncate\">{workflow.subtitle}</div>\n                    </div>\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n\n          <div className=\"border-t border-border pt-4\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <h3 className=\"text-xs font-medium text-muted-foreground uppercase\">\n                Balances\n              </h3>\n              <div className=\"flex items-center gap-1\">\n                <Button \n                  variant=\"ghost\" \n                  size=\"icon\" \n                  className=\"h-5 w-5\"\n                  onClick={() => setShowAddressInputs(!showAddressInputs)}\n                  data-testid=\"button-toggle-addresses\"\n                >\n                  <Plus className={`w-3 h-3 transition-transform ${showAddressInputs ? \"rotate-45\" : \"\"}`} />\n                </Button>\n                <Button \n                  variant=\"ghost\" \n                  size=\"icon\" \n                  className=\"h-5 w-5\"\n                  onClick={fetchBalances}\n                  disabled={isLoadingBalances}\n                  data-testid=\"button-refresh-balances\"\n                >\n                  <RefreshCw className={`w-3 h-3 ${isLoadingBalances ? \"animate-spin\" : \"\"}`} />\n                </Button>\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between text-sm p-2 rounded-md bg-muted/30\">\n                <span className=\"uppercase text-xs font-medium\">NEAR</span>\n                <span className=\"font-mono text-xs\">\n                  {balances.near || \"0.00\"}\n                </span>\n              </div>\n              {OTHER_CHAINS.map((chain) => (\n                chainAddresses[chain.id] && (\n                  <div key={chain.id} className=\"flex items-center justify-between text-sm p-2 rounded-md bg-muted/30\">\n                    <span className=\"uppercase text-xs font-medium\">{chain.label}</span>\n                    <span className=\"font-mono text-xs\">\n                      {balances[chain.id] || \"0.00\"}\n                    </span>\n                  </div>\n                )\n              ))}\n              {showAddressInputs && (\n                <div className=\"space-y-2 pt-2\">\n                  <p className=\"text-xs text-muted-foreground\">Add addresses for other chains:</p>\n                  {OTHER_CHAINS.map((chain) => (\n                    <div key={chain.id} className=\"space-y-1\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-xs font-medium w-10\">{chain.label}</span>\n                        <Input \n                          placeholder={chain.placeholder}\n                          value={chainAddresses[chain.id] || \"\"}\n                          onChange={(e) => {\n                            const value = e.target.value;\n                            setChainAddresses(prev => ({ ...prev, [chain.id]: value }));\n                            if (value && !chain.validate(value)) {\n                              setAddressErrors(prev => ({ ...prev, [chain.id]: \"Invalid address format\" }));\n                            } else {\n                              setAddressErrors(prev => {\n                                const { [chain.id]: _, ...rest } = prev;\n                                return rest;\n                              });\n                            }\n                          }}\n                          className={`h-7 text-xs font-mono ${addressErrors[chain.id] ? \"border-destructive\" : \"\"}`}\n                          data-testid={`input-address-${chain.id}`}\n                        />\n                      </div>\n                      {addressErrors[chain.id] && (\n                        <p className=\"text-xs text-destructive pl-12\">{addressErrors[chain.id]}</p>\n                      )}\n                    </div>\n                  ))}\n                  <Button \n                    variant=\"outline\" \n                    size=\"sm\" \n                    className=\"w-full\"\n                    onClick={() => {\n                      const validAddresses: Record<string, string> = {};\n                      for (const chain of OTHER_CHAINS) {\n                        const addr = chainAddresses[chain.id];\n                        if (addr && chain.validate(addr)) {\n                          validAddresses[chain.id] = addr;\n                        }\n                      }\n                      localStorage.setItem(STORAGE_KEY, JSON.stringify(validAddresses));\n                      setChainAddresses(prev => ({ ...prev, ...validAddresses }));\n                      fetchBalances();\n                      setShowAddressInputs(false);\n                      toast({ title: \"Addresses saved\" });\n                    }}\n                    disabled={Object.keys(addressErrors).length > 0}\n                    data-testid=\"button-save-addresses\"\n                  >\n                    Save & Fetch Balances\n                  </Button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex-1 flex flex-col min-w-0 overflow-hidden\">\n          <div className=\"lg:hidden p-2 border-b border-border shrink-0\">\n            <ScrollArea className=\"w-full\">\n              <div className=\"flex gap-2 pb-2\">\n                {WORKFLOWS.map((workflow) => {\n                  const Icon = workflow.icon;\n                  const isActive = activeWorkflow === workflow.id;\n                  return (\n                    <button\n                      key={workflow.id}\n                      onClick={() => setActiveWorkflow(workflow.id)}\n                      className={`flex items-center gap-2 px-3 py-2 rounded-md whitespace-nowrap ${\n                        isActive \n                          ? \"bg-muted\" \n                          : \"hover-elevate\"\n                      }`}\n                      data-testid={`mobile-workflow-${workflow.id}`}\n                    >\n                      <Icon className={`w-4 h-4 ${workflow.color}`} />\n                      <span className=\"text-sm font-medium\">{workflow.title}</span>\n                    </button>\n                  );\n                })}\n              </div>\n            </ScrollArea>\n          </div>\n\n          <div className=\"flex-1 overflow-y-auto p-4\">\n            {currentMessages.length === 0 ? (\n              <div className=\"flex items-center justify-center h-full\">\n                <div className=\"text-center max-w-md\">\n                  <div className={`w-16 h-16 rounded-xl bg-gradient-to-br ${currentWorkflow.gradientFrom} ${currentWorkflow.gradientTo} flex items-center justify-center mx-auto mb-4`}>\n                    <currentWorkflow.icon className=\"w-8 h-8 text-white\" />\n                  </div>\n                  <h2 className=\"text-xl font-bold mb-2\">{currentWorkflow.title}</h2>\n                  <p className=\"text-muted-foreground mb-6\">{currentWorkflow.description}</p>\n                  \n                  <div className=\"grid grid-cols-2 gap-3\">\n                    {activeWorkflow === \"ghostbridge\" && (\n                      <>\n                        <Button variant=\"outline\" onClick={() => setInput(\"Bridge 1 ETH to Zcash with privacy\")} data-testid=\"quick-bridge\">\n                          <ArrowLeftRight className=\"w-4 h-4 mr-2\" />\n                          Bridge ETH\n                        </Button>\n                        <Button variant=\"outline\" onClick={() => setInput(\"Check my balances across all chains\")} data-testid=\"quick-balance\">\n                          <WalletIcon className=\"w-4 h-4 mr-2\" />\n                          Check Balances\n                        </Button>\n                      </>\n                    )}\n                    {activeWorkflow === \"shadowtrader\" && (\n                      <>\n                        <Button variant=\"outline\" onClick={() => setInput(\"Swap 1 ZEC for USDC privately\")} data-testid=\"quick-swap\">\n                          <ArrowRightLeft className=\"w-4 h-4 mr-2\" />\n                          Private Swap\n                        </Button>\n                        <Button variant=\"outline\" onClick={() => setInput(\"Analyze ZEC market trends\")} data-testid=\"quick-analyze\">\n                          <TrendingUp className=\"w-4 h-4 mr-2\" />\n                          Market Analysis\n                        </Button>\n                      </>\n                    )}\n                    {activeWorkflow === \"enigma\" && (\n                      <>\n                        <Button variant=\"outline\" onClick={() => setInput(\"Encrypt this data: [sensitive info]\")} data-testid=\"quick-encrypt\">\n                          <Lock className=\"w-4 h-4 mr-2\" />\n                          Encrypt Data\n                        </Button>\n                        <Button variant=\"outline\" onClick={() => setInput(\"Perform homomorphic addition on encrypted values\")} data-testid=\"quick-compute\">\n                          <Brain className=\"w-4 h-4 mr-2\" />\n                          Compute\n                        </Button>\n                      </>\n                    )}\n                    {activeWorkflow === \"vault\" && (\n                      <>\n                        <Button variant=\"outline\" onClick={() => setInput(\"Show all my wallet balances\")} data-testid=\"quick-balances\">\n                          <WalletIcon className=\"w-4 h-4 mr-2\" />\n                          View Balances\n                        </Button>\n                        <Button variant=\"outline\" onClick={() => setInput(\"Generate a new shielded address\")} data-testid=\"quick-address\">\n                          <Shield className=\"w-4 h-4 mr-2\" />\n                          New Address\n                        </Button>\n                      </>\n                    )}\n                    {activeWorkflow === \"shieldcoder\" && (\n                      <>\n                        <Button variant=\"outline\" onClick={() => setInput(\"Generate ZK proof verification code in Rust\")} data-testid=\"quick-code\">\n                          <Code className=\"w-4 h-4 mr-2\" />\n                          ZK Code\n                        </Button>\n                        <Button variant=\"outline\" onClick={() => setInput(\"Create a privacy smart contract template\")} data-testid=\"quick-contract\">\n                          <FileText className=\"w-4 h-4 mr-2\" />\n                          Contract\n                        </Button>\n                      </>\n                    )}\n                    {activeWorkflow === \"privamuse\" && (\n                      <>\n                        <Button variant=\"outline\" onClick={() => setInput(\"Create a privacy-themed meme about ZEC\")} data-testid=\"quick-meme\">\n                          <Image className=\"w-4 h-4 mr-2\" />\n                          Create Meme\n                        </Button>\n                        <Button variant=\"outline\" onClick={() => setInput(\"Write a short story about crypto privacy\")} data-testid=\"quick-story\">\n                          <Sparkles className=\"w-4 h-4 mr-2\" />\n                          Write Story\n                        </Button>\n                      </>\n                    )}\n                    {activeWorkflow === \"echoprivacy\" && (\n                      <>\n                        <Button variant=\"outline\" onClick={() => setInput(\"Write an article about Zcash privacy features\")} data-testid=\"quick-article\">\n                          <FileText className=\"w-4 h-4 mr-2\" />\n                          Write Article\n                        </Button>\n                        <Button variant=\"outline\" onClick={() => setInput(\"Summarize latest privacy news\")} data-testid=\"quick-news\">\n                          <Radio className=\"w-4 h-4 mr-2\" />\n                          Privacy News\n                        </Button>\n                      </>\n                    )}\n                    {activeWorkflow === \"anonpay\" && (\n                      <>\n                        <Button variant=\"outline\" onClick={() => setInput(\"Schedule 0.5 ZEC monthly payment to zs1...\")} data-testid=\"quick-schedule\">\n                          <Clock className=\"w-4 h-4 mr-2\" />\n                          Schedule\n                        </Button>\n                        <Button variant=\"outline\" onClick={() => setInput(\"Show my scheduled payments\")} data-testid=\"quick-view\">\n                          <CreditCard className=\"w-4 h-4 mr-2\" />\n                          View Payments\n                        </Button>\n                      </>\n                    )}\n                    {activeWorkflow === \"zinsight\" && (\n                      <>\n                        <Button variant=\"outline\" onClick={() => setInput(\"Analyze Zcash shielded pool adoption\")} data-testid=\"quick-analyze-pool\">\n                          <BarChart3 className=\"w-4 h-4 mr-2\" />\n                          Pool Analysis\n                        </Button>\n                        <Button variant=\"outline\" onClick={() => setInput(\"Show ZEC price trends and predictions\")} data-testid=\"quick-price\">\n                          <LineChart className=\"w-4 h-4 mr-2\" />\n                          Price Trends\n                        </Button>\n                      </>\n                    )}\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div className=\"space-y-4 max-w-3xl mx-auto\">\n                {currentMessages.map((msg) => (\n                  <div\n                    key={msg.id}\n                    className={`flex ${msg.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}\n                  >\n                    <div\n                      className={`max-w-[85%] rounded-lg p-4 ${\n                        msg.role === \"user\"\n                          ? `bg-gradient-to-br ${currentWorkflow.gradientFrom}/20 ${currentWorkflow.gradientTo}/20`\n                          : \"bg-card border border-border\"\n                      }`}\n                    >\n                      <div className=\"whitespace-pre-wrap\">{msg.content}</div>\n                      <div className=\"text-xs text-muted-foreground mt-2\">\n                        {new Date(msg.timestamp).toLocaleTimeString()}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n                {chatMutation.isPending && (\n                  <div className=\"flex justify-start\">\n                    <div className=\"bg-card border border-border rounded-lg p-4\">\n                      <div className=\"flex items-center gap-2\">\n                        <RefreshCw className=\"w-4 h-4 animate-spin\" />\n                        <span className=\"text-sm text-muted-foreground\">Processing...</span>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n\n          <div className=\"p-4 border-t border-border shrink-0\">\n            <div className=\"flex gap-3 max-w-3xl mx-auto\">\n              <Input\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                onKeyDown={(e) => e.key === \"Enter\" && !e.shiftKey && handleSendMessage()}\n                placeholder={currentWorkflow.placeholder}\n                className=\"flex-1\"\n                data-testid=\"input-message\"\n              />\n              <Button\n                onClick={handleSendMessage}\n                disabled={chatMutation.isPending || !input.trim()}\n                className={`bg-gradient-to-r ${currentWorkflow.gradientFrom} ${currentWorkflow.gradientTo} text-white`}\n                data-testid=\"button-send\"\n              >\n                {chatMutation.isPending ? (\n                  <RefreshCw className=\"w-4 h-4 animate-spin\" />\n                ) : (\n                  <Send className=\"w-4 h-4\" />\n                )}\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"w-80 border-l border-border p-4 overflow-y-auto shrink-0 hidden xl:block\">\n          {activeWorkflow === \"ghostbridge\" && currentPlan && (\n            <Card className=\"mb-4\">\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-sm flex items-center gap-2\">\n                  <ArrowLeftRight className=\"w-4 h-4 text-amber-400\" />\n                  Bridge Plan\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span className=\"text-muted-foreground\">From</span>\n                  <span className=\"font-medium uppercase\">{currentPlan.sourceChain}</span>\n                </div>\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span className=\"text-muted-foreground\">To</span>\n                  <span className=\"font-medium uppercase\">{currentPlan.targetChain}</span>\n                </div>\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span className=\"text-muted-foreground\">Amount</span>\n                  <span className=\"font-medium\">{currentPlan.amount}</span>\n                </div>\n                {currentPlan.estimatedFees && (\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"text-muted-foreground\">Fee</span>\n                    <span className=\"font-medium\">{currentPlan.estimatedFees.totalUsd}</span>\n                  </div>\n                )}\n                <Button className=\"w-full mt-2\" size=\"sm\" data-testid=\"button-execute-bridge\">\n                  <Zap className=\"w-4 h-4 mr-2\" />\n                  Execute Bridge\n                </Button>\n              </CardContent>\n            </Card>\n          )}\n\n          <Card>\n            <CardHeader className=\"pb-2\">\n              <CardTitle className=\"text-sm flex items-center gap-2\">\n                <Activity className=\"w-4 h-4 text-emerald-400\" />\n                Recent Activity\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              {transactionsData?.transactions && transactionsData.transactions.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {transactionsData.transactions.slice(0, 5).map((tx) => (\n                    <div key={tx.id} className=\"flex items-center justify-between text-sm p-2 rounded-md bg-muted/30\">\n                      <div>\n                        <div className=\"font-medium\">\n                          {tx.sourceChain.toUpperCase()}  {tx.targetChain.toUpperCase()}\n                        </div>\n                        <div className=\"text-xs text-muted-foreground\">\n                          {tx.amount}\n                        </div>\n                      </div>\n                      <Badge variant=\"outline\" className={\n                        tx.status === \"confirmed\" ? \"text-emerald-400\" :\n                        tx.status === \"pending\" ? \"text-amber-400\" : \n                        tx.status === \"processing\" ? \"text-blue-400\" : \"text-red-400\"\n                      }>\n                        {tx.status}\n                      </Badge>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-6 text-muted-foreground\">\n                  <Activity className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n                  <p className=\"text-sm\">No recent activity</p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          <Card className=\"mt-4\">\n            <CardHeader className=\"pb-2\">\n              <CardTitle className=\"text-sm flex items-center gap-2\">\n                <Shield className=\"w-4 h-4 text-amber-400\" />\n                Privacy Status\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-2\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Encryption</span>\n                <Badge variant=\"outline\" className=\"text-emerald-400\">Active</Badge>\n              </div>\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Shielded Pool</span>\n                <Badge variant=\"outline\" className=\"text-emerald-400\">Connected</Badge>\n              </div>\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Network</span>\n                <span className=\"font-mono text-xs\">{wallet.network}</span>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":38208,"size_tokens":null},"client/src/polyfills.ts":{"content":"import { Buffer } from \"buffer\";\n\ndeclare global {\n  interface Window {\n    global: typeof globalThis;\n    Buffer: typeof Buffer;\n    process: { env: Record<string, string> };\n  }\n}\n\nif (typeof window !== 'undefined') {\n  window.global = window;\n  window.Buffer = Buffer;\n  window.process = window.process || { env: {} };\n}\n\nexport {};\n","path":null,"size_bytes":336,"size_tokens":null},"client/src/hooks/use-bridge.ts":{"content":"import { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\n\nexport interface BridgeQuote {\n  id: string;\n  protocol: string;\n  sourceChain: string;\n  targetChain: string;\n  sourceToken: string;\n  targetToken: string;\n  inputAmount: string;\n  outputAmount: string;\n  fees: {\n    bridgeFee: string;\n    gasFee: string;\n    protocolFee: string;\n    totalFee: string;\n    totalFeeUsd: string;\n  };\n  estimatedTime: number;\n  slippageTolerance: number;\n  route: {\n    step: number;\n    protocol: string;\n    action: string;\n    chain: string;\n    description: string;\n    estimatedDuration: number;\n  }[];\n  isShielded: boolean;\n  expiresAt: string;\n  securityLevel: \"standard\" | \"enhanced\" | \"maximum\";\n}\n\nexport interface BridgeExecution {\n  id: string;\n  quoteId: string;\n  status: string;\n  steps: {\n    step: number;\n    status: \"pending\" | \"in_progress\" | \"completed\" | \"failed\";\n    transactionHash?: string;\n    blockNumber?: number;\n    timestamp?: string;\n    message: string;\n  }[];\n  sourceTransaction?: {\n    hash: string;\n    blockNumber: number;\n    confirmations: number;\n    explorerUrl: string;\n  };\n  targetTransaction?: {\n    hash: string;\n    blockNumber: number;\n    confirmations: number;\n    explorerUrl: string;\n  };\n  createdAt: string;\n  updatedAt: string;\n  error?: string;\n}\n\nexport interface ProtocolInfo {\n  protocol: string;\n  config: {\n    name: string;\n    displayName: string;\n    supportedChains: string[];\n    avgBridgeTime: number;\n    baseFeePercent: number;\n    securityLevel: string;\n    supportsShielded: boolean;\n  };\n}\n\nexport function useBridgeProtocols() {\n  return useQuery<{ protocols: ProtocolInfo[]; chains: string[] }>({\n    queryKey: [\"/api/bridge/protocols\"],\n  });\n}\n\nexport function useBridgeQuote(params: {\n  sourceChain: string;\n  targetChain: string;\n  amount: string;\n  isShielded?: boolean;\n  preferredProtocol?: string;\n}) {\n  return useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest(\"POST\", \"/api/bridge/quote\", params);\n      return response.json() as Promise<{ quote: BridgeQuote }>;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/bridge\"] });\n    },\n  });\n}\n\nexport function useBridgeQuotes(params: {\n  sourceChain: string;\n  targetChain: string;\n  amount: string;\n  isShielded?: boolean;\n}) {\n  return useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest(\"POST\", \"/api/bridge/quotes\", params);\n      return response.json() as Promise<{ quotes: BridgeQuote[]; count: number }>;\n    },\n  });\n}\n\nexport function useExecuteBridge() {\n  return useMutation({\n    mutationFn: async (data: { quote: BridgeQuote; signerAddress: string }) => {\n      const response = await apiRequest(\"POST\", \"/api/bridge/execute\", data);\n      return response.json() as Promise<{ execution: BridgeExecution }>;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/transactions\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/bridge/history\"] });\n    },\n  });\n}\n\nexport function useBridgeExecution(executionId: string | null) {\n  return useQuery<{ execution: BridgeExecution }>({\n    queryKey: [\"/api/bridge/execution\", executionId],\n    queryFn: async () => {\n      const response = await fetch(`/api/bridge/execution/${executionId}`);\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch execution status\");\n      }\n      return response.json();\n    },\n    enabled: !!executionId,\n    refetchInterval: (query) => {\n      const execution = query.state.data?.execution;\n      if (!execution) return 2000;\n      if (execution.status === \"completed\" || execution.status === \"failed\") {\n        return false;\n      }\n      return 2000;\n    },\n  });\n}\n\nexport function useBridgeHistory(walletAddress: string | undefined, limit: number = 10) {\n  return useQuery<{ executions: BridgeExecution[] }>({\n    queryKey: [\"/api/bridge/history\", walletAddress, limit],\n    queryFn: async () => {\n      const response = await fetch(`/api/bridge/history?wallet=${encodeURIComponent(walletAddress!)}&limit=${limit}`);\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch bridge history\");\n      }\n      return response.json();\n    },\n    enabled: !!walletAddress,\n  });\n}\n\nexport function formatTime(seconds: number): string {\n  if (seconds < 60) return `${seconds}s`;\n  const mins = Math.floor(seconds / 60);\n  const secs = seconds % 60;\n  if (secs === 0) return `${mins}m`;\n  return `${mins}m ${secs}s`;\n}\n\nexport function getSecurityBadgeColor(level: string): string {\n  switch (level) {\n    case \"maximum\":\n      return \"text-green-400\";\n    case \"enhanced\":\n      return \"text-yellow-400\";\n    default:\n      return \"text-muted-foreground\";\n  }\n}\n","path":null,"size_bytes":4810,"size_tokens":null},"attached_assets/content-1764866251923.md":{"content":"[Skip to main content](https://docs.near.org/tools/wallet-selector#__docusaurus_skipToContent_fallback)\n\nOn this page\n\nThe [Wallet Selector](https://github.com/near/wallet-selector) is a `JS`/`TS` library that lets users connect to your application using their preferred wallet.\n\n![Preview](https://docs.near.org/assets/images/wallet-selector-915c475b1581de8647c79a274a85e6b0.png)_Initial screen of [Wallet Selector](https://near.github.io/wallet-selector/)_\n\nList of NEAR Wallets\n\nHere is a list of user-friendly wallets that support the NEAR blockchain, you can find more at the [NEAR Wallets](https://wallet.near.org/) page.\n\n- [Bitget Wallet](https://web3.bitget.com/): A multi-chain wallet supporting NEAR and other blockchains with comprehensive DeFi features.\n\n- [Coin98 Wallet](https://coin98.com/): A multi-chain wallet and DeFi gateway supporting NEAR and 40+ blockchains.\n\n- [Hot Wallet](https://hot-labs.org/): A browser-based wallet optimized for development and testing environments.\n\n- [Intear Wallet](https://intear.tech/): A NEAR-focused wallet with seamless integration capabilities.\n\n- [Math Wallet](https://mathwallet.org/): A multi-platform wallet supporting NEAR and multiple blockchain networks.\n\n- [Meteor Wallet](https://wallet.meteorwallet.app/): Both a browser and extension wallet, with advanced NFT features.\n\n- [NEAR Mobile](https://nearmobile.app/): A non-custodial wallet that is easy to use and well designed to manage your crypto wherever you go.\n\n- [OKX Wallet](https://www.okx.com/web3): A comprehensive Web3 wallet supporting NEAR and multiple chains with built-in DeFi access.\n\n- [Ramper Wallet](https://www.ramper.xyz/): A user-friendly wallet with social login features supporting NEAR.\n\n- [Sender Wallet](https://sender.org/): Security-audited mobile & extension wallet with 1M+ users, supporting NEAR & Aurora.\n\n- [Unity Wallet](https://www.unitywallet.app/): A wallet designed for seamless NEAR blockchain integration.\n\n- [WELLDONE Wallet](https://welldonestudio.io/): A multi-chain extension wallet that gives you control over all your assets from a single platform.\n\n\n* * *\n\n## Unlocking the wallet ecosystem [](https://docs.near.org/tools/wallet-selector\\#unlocking-the-wallet-ecosystem \"Direct link to Unlocking the wallet ecosystem\")\n\nWallet Selector makes it easy for users to interact with dApps by providing an abstraction over various wallets and wallet types within the NEAR ecosystem.\n\ninfo\n\nYou can check the current list of supported wallets in the [README.md](https://github.com/near/wallet-selector/blob/main/README.md) file of near/wallet-selector repository.\n\n* * *\n\n## Install [](https://docs.near.org/tools/wallet-selector\\#install \"Direct link to Install\")\n\nThe easiest way to use NEAR Wallet Selector is to install the core package from the NPM registry, some packages may require near-api-js v5.1.1 or above check them at packages.\n\n```bash\nnpm install near-api-js\n```\n\n```bash\nnpm install @near-wallet-selector/core\n```\n\nNext, you'll need to install the wallets you want to support:\n\n```bash\nnpm install \\\n  @near-wallet-selector/modal-ui \\\n  @near-wallet-selector/bitget-wallet \\\n  @near-wallet-selector/coin98-wallet \\\n  @near-wallet-selector/ethereum-wallets \\\n  @near-wallet-selector/hot-wallet \\\n  @near-wallet-selector/intear-wallet \\\n  @near-wallet-selector/ledger \\\n  @near-wallet-selector/math-wallet \\\n  @near-wallet-selector/meteor-wallet \\\n  @near-wallet-selector/meteor-wallet-app \\\n  @near-wallet-selector/near-mobile-wallet \\\n  @near-wallet-selector/okx-wallet \\\n  @near-wallet-selector/ramper-wallet \\\n  @near-wallet-selector/sender \\\n  @near-wallet-selector/unity-wallet \\\n  @near-wallet-selector/welldone-wallet\n```\n\n* * *\n\n## Setup [](https://docs.near.org/tools/wallet-selector\\#setup \"Direct link to Setup\")\n\nThe wallet selector can be set up in two ways: by using its `core` API, or by importing its `React context/hooks` into your app:\n\n- Wallet Selector\n- React Hook\n\n```ts\nimport \"@near-wallet-selector/modal-ui/styles.css\";\nimport { setupWalletSelector } from \"@near-wallet-selector/core\";\nimport { setupMeteorWallet } from \"@near-wallet-selector/meteor-wallet\";\n// import other wallets you want to support\n\nconst selector = await setupWalletSelector({\n  network: \"testnet\",\n  modules: [\\\n    setupMeteorWallet(),\\\n    /// add other setup functions\\\n  ],\n});\n\n// Subscribe to changes in the selected account\nwalletSelector.then(async (selector) => {\n  selector.subscribeOnAccountChange(async (signedAccount) => { ... });\n});\n```\n\nInstall the React hook package:\n\n```bash\nnpm install @near-wallet-selector/react-hook\n```\n\nWrap your app with the provider:\n\n```jsx\nimport \"@near-wallet-selector/modal-ui/styles.css\";\nimport { WalletSelectorProvider } from \"@near-wallet-selector/react-hook\";\nimport { setupMeteorWallet } from \"@near-wallet-selector/meteor-wallet\";\n// import other wallets you want to support\n\nconst config = {\n  network: \"testnet\",\n  modules: [\\\n    setupMeteorWallet()\\\n    // add other setup functions\\\n    ],\n  createAccessKeyFor: \"hello.near-examples.testnet\",\n};\n\nfunction App() {\n  return (\n    <WalletSelectorProvider config={config}>\n      {/* Your app components */}\n    </WalletSelectorProvider>\n  );\n}\n```\n\n* * *\n\n## Sign in [](https://docs.near.org/tools/wallet-selector\\#sign-in \"Direct link to Sign in\")\n\n- Wallet Selector\n- React Hook\n\nTo sign in, you will need to create a modal instance and call the `show()` method:\n\n```ts\n  import { setupModal } from \"@near-wallet-selector/modal-ui\";\n\n  const modal = setupModal(selector, {\n    contractId: \"hello.near-examples.testnet\",\n  });\n\n  modal.show();\n```\n\n```jsx\nimport { useWalletSelector } from \"@near-wallet-selector/react-hook\";\n\nconst MyComponent = () => {\n  const { signIn } = useWalletSelector();\n\n  const handleSignIn = () => {\n    signIn();\n  };\n\n  return <button onClick={handleSignIn}>Sign In</button>;\n};\n```\n\n* * *\n\n## Sign out [](https://docs.near.org/tools/wallet-selector\\#sign-out \"Direct link to Sign out\")\n\n- Wallet Selector\n- React Hook\n\n```ts\n  const wallet = await selector.wallet();\n  await wallet.signOut();\n```\n\n```jsx\nimport { useWalletSelector } from \"@near-wallet-selector/react-hook\";\n\nconst MyComponent = () => {\n  const { signOut } = useWalletSelector();\n\n  const handleSignOut = async () => {\n    await signOut();\n  };\n\n  return <button onClick={handleSignOut}>Sign Out</button>;\n};\n```\n\n* * *\n\n## Get accounts [](https://docs.near.org/tools/wallet-selector\\#get-accounts \"Direct link to Get accounts\")\n\nYou can easily query the signed-in accounts (either one or `none`):\n\n- Wallet Selector\n- React Hook\n\n```ts\nconst wallet = await selector.wallet();\nconst accounts = await wallet.getAccounts();\nconsole.log(accounts); // [{ accountId: \"test.testnet\" }]\n```\n\n```jsx\nimport { useWalletSelector } from \"@near-wallet-selector/react-hook\";\n\nconst MyComponent = () => {\n  const { signedAccountId } = useWalletSelector();\n\n  if (signedAccountId) {\n    return <div>Signed in as {signedAccountId}</div>;\n  } else {\n    return <div>Not signed in</div>;\n  }\n};\n```\n\n* * *\n\n## Get Balance [](https://docs.near.org/tools/wallet-selector\\#get-balance \"Direct link to Get Balance\")\n\nThe React hook exposes a method that can be used to get the balance of the currently signed-in account:\n\n- React Hook\n\n```jsx\nconst { getBalance } = useWalletSelector();\n\nconst balance = await getBalance();\n```\n\n* * *\n\n## Verify Message [](https://docs.near.org/tools/wallet-selector\\#verify-message \"Direct link to Verify Message\")\n\nIn NEAR, users can sign messages with their private keys to prove ownership of their accounts. This is useful for various purposes, such as authentication, authorization, and data integrity.\n\nThe wallet selector provides a `signNep413Message` method that allows users to sign messages in a standardized way, following the [NEP-413](https://github.com/near/NEPs/blob/master/neps/nep-0413.md) specification.\n\n- Wallet Selector\n- React Hook\n\n```ts\n// MyNearWallet\nconst wallet = await selector.wallet();\nconst signedMessage = await wallet.signNep413Message({\n  message: \"Test message\",\n  accountId: \"example.testnet\",\n  recipient: \"app.near\",\n  nonce: Buffer.from(Date.now().toString()),\n});\n```\n\n```jsx\nimport { useWalletSelector } from \"@near-wallet-selector/react-hook\";\n\nconst MyComponent = () => {\n  const { signNep413Message } = useWalletSelector();\n\n  const signedMessage = await signNep413Message({\n    message: \"Test message\",\n    accountId: \"example.testnet\",\n    recipient: \"app.near\",\n    nonce: Buffer.from(Date.now().toString()),\n  });\n\n  console.log(\"Message signed:\", signedMessage);\n};\n```\n\n* * *\n\n## Call a Read-Only Method [](https://docs.near.org/tools/wallet-selector\\#call-a-read-only-method \"Direct link to Call a Read-Only Method\")\n\nSmart contracts often expose read-only methods that allow users to query data without modifying the contract's state. These methods are typically used to fetch information such as balances, configurations, or other relevant data.\n\n- Wallet Selector\n- React Hook\n\nIn order to call a read-only method you will need to use `near-api-js`, as the core wallet selector does not provide this functionality out of the box.\n\n```ts\nimport { JsonRpcProvider } from \"@near-js/providers\";\n\nconst provider = new JsonRpcProvider({\n  url: \"https://free.rpc.fastnear.com\",\n});\n\nconst viewFunction = async ({\n  contractId,\n  method,\n  args = {},\n}: ViewMethodParams) => {\n  const res = await provider.callFunction(\n    \"hello.near-examples.testnet\",\n    \"get_greeting\",\n    {}\n  );\n\n  return JSON.parse(Buffer.from(res.result).toString());\n};\n```\n\n```jsx\nimport { useWalletSelector } from \"@near-wallet-selector/react-hook\";\n\nconst MyComponent = () => {\n  const { viewFunction } = useWalletSelector();\n\n  const handleViewMethod = async () => {\n    try {\n      const result = await viewFunction({\n        contractId: \"guestbook.near-examples.testnet\",\n        method: \"get_messages\",\n        args: {},\n      });\n      console.log(\"View result:\", result);\n    } catch (error) {\n      console.error(\"View method failed:\", error);\n    }\n  };\n\n  return <button onClick={handleViewMethod}>Call View Method</button>;\n};\n```\n\n* * *\n\n## Sign and Send a Transaction [](https://docs.near.org/tools/wallet-selector\\#sign-and-send-a-transaction \"Direct link to Sign and Send a Transaction\")\n\nYou can use the wallet selector to sign and send transactions to the NEAR blockchain. This is useful for performing actions that modify the state of a smart contract, such as transferring tokens, updating data, or executing specific functions.\n\n- Wallet Selector\n- React Hook\n\n```ts\nimport { actionCreators } from \"@near-js/transactions\";\n\nconst wallet = await selector.wallet();\nawait wallet.signAndSendTransaction({\n  receiverId: 'guestbook.near-examples.testnet',\n  actions: [\\\n    actionCreators.functionCall(\\\n      \"add_message\",\\\n      { text: \"Hello World!\" },\\\n      \"30000000000000\",\\\n      \"10000000000000000000000\",\\\n    )\\\n  ],\n});\n```\n\n```jsx\nimport { useWalletSelector } from \"@near-wallet-selector/react-hook\";\n\nconst MyComponent = () => {\n  const { signAndSendTransaction, callFunction } = useWalletSelector();\n\n  const handleTransaction = async () => {\n    try {\n      const result = await callFunction({\n        contractId: \"guestbook.near-examples.testnet\",\n        method: \"add_message\",\n        args: { text: \"Hello World!\" },\n        gas: \"30000000000000\",\n        deposit: \"10000000000000000000000\",\n      });\n      console.log(\"Transaction result:\", result);\n    } catch (error) {\n      console.error(\"Transaction failed:\", error);\n    }\n  };\n\n  return <button onClick={handleTransaction}>Send Transaction</button>;\n};\n```\n\n## Sign and send transactions [](https://docs.near.org/tools/wallet-selector\\#sign-and-send-transactions \"Direct link to Sign and send transactions\")\n\nYou can use the wallet selector to sign and send multiple transactions in parallel with a single request.\n\n- Wallet Selector\n- React Hook\n\n```ts\nconst wallet = await selector.wallet();\nawait wallet.signAndSendTransactions({\n  transactions: [\\\n    {\\\n      receiverId: \"guestbook.near-examples.testnet\",\\\n      actions: [\\\n        {\\\n          type: \"FunctionCall\",\\\n          params: {\\\n            methodName: \"add_message\",\\\n            args: { text: \"Hello World!\" },\\\n            gas: \"30000000000000\",\\\n            deposit: \"10000000000000000000000\",\\\n          },\\\n        },\\\n      ],\\\n    },\\\n  ],\n});\n```\n\n```jsx\nimport { useWalletSelector } from \"@near-wallet-selector/react-hook\";\n\nconst MyComponent = () => {\n  const { signAndSendTransactions } = useWalletSelector();\n\n  const handleBatchTransactions = async () => {\n    try {\n      const transactions = [\\\n        {\\\n          receiverId: \"guestbook.near-examples.testnet\",\\\n          actions: [\\\n            {\\\n              type: \"FunctionCall\",\\\n              params: {\\\n                methodName: \"add_message\",\\\n                args: { text: \"Hello World!\" },\\\n                gas: \"30000000000000\",\\\n                deposit: \"10000000000000000000000\",\\\n              },\\\n            },\\\n          ],\\\n        },\\\n      ];\n\n      const results = await signAndSendTransactions({ transactions });\n      console.log(\"Batch results:\", results);\n    } catch (error) {\n      console.error(\"Batch transaction failed:\", error);\n    }\n  };\n\n  return (\n    <button onClick={handleBatchTransactions}>Send Batch Transactions</button>\n  );\n};\n```\n\nWas this page helpful?\n\nYesNo\n\n- [Unlocking the wallet ecosystem](https://docs.near.org/tools/wallet-selector#unlocking-the-wallet-ecosystem)\n- [Install](https://docs.near.org/tools/wallet-selector#install)\n- [Setup](https://docs.near.org/tools/wallet-selector#setup)\n- [Sign in](https://docs.near.org/tools/wallet-selector#sign-in)\n- [Sign out](https://docs.near.org/tools/wallet-selector#sign-out)\n- [Get accounts](https://docs.near.org/tools/wallet-selector#get-accounts)\n- [Get Balance](https://docs.near.org/tools/wallet-selector#get-balance)\n- [Verify Message](https://docs.near.org/tools/wallet-selector#verify-message)\n- [Call a Read-Only Method](https://docs.near.org/tools/wallet-selector#call-a-read-only-method)\n- [Sign and Send a Transaction](https://docs.near.org/tools/wallet-selector#sign-and-send-a-transaction)\n- [Sign and send transactions](https://docs.near.org/tools/wallet-selector#sign-and-send-transactions)","path":null,"size_bytes":14395,"size_tokens":null},"client/src/components/bridge/transaction-history.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { \n  History, \n  ArrowRight, \n  ExternalLink, \n  ChevronDown, \n  ChevronUp,\n  Clock,\n  CheckCircle2,\n  XCircle,\n  Loader2,\n  Shield,\n} from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { useBridgeHistory, type BridgeExecution } from \"@/hooks/use-bridge\";\n\ninterface TransactionHistoryProps {\n  walletAddress?: string;\n  onSelectExecution?: (executionId: string) => void;\n  limit?: number;\n}\n\nconst CHAIN_ICONS: Record<string, string> = {\n  zcash: \"ZEC\",\n  ethereum: \"ETH\",\n  near: \"NEAR\",\n  polygon: \"MATIC\",\n  binance: \"BNB\",\n  avalanche: \"AVAX\",\n};\n\nconst STATUS_CONFIG: Record<string, { icon: typeof CheckCircle2; color: string; label: string }> = {\n  completed: { icon: CheckCircle2, color: \"text-green-500\", label: \"Completed\" },\n  failed: { icon: XCircle, color: \"text-destructive\", label: \"Failed\" },\n  in_progress: { icon: Loader2, color: \"text-primary\", label: \"Processing\" },\n  executing: { icon: Loader2, color: \"text-primary\", label: \"Executing\" },\n  pending: { icon: Clock, color: \"text-muted-foreground\", label: \"Pending\" },\n};\n\ninterface TransactionItemProps {\n  execution: BridgeExecution & { \n    sourceChain?: string; \n    targetChain?: string;\n    inputAmount?: string;\n    outputAmount?: string;\n    protocol?: string;\n  };\n  isExpanded: boolean;\n  onToggle: () => void;\n  onSelect?: () => void;\n}\n\nfunction TransactionItem({ execution, isExpanded, onToggle, onSelect }: TransactionItemProps) {\n  const statusConfig = STATUS_CONFIG[execution.status] || STATUS_CONFIG.pending;\n  const StatusIcon = statusConfig.icon;\n  \n  return (\n    <div \n      className={cn(\n        \"p-4 rounded-lg border transition-colors\",\n        isExpanded ? \"bg-muted/30 border-primary/30\" : \"bg-card/30 border-border/50 hover-elevate\"\n      )}\n      data-testid={`transaction-item-${execution.id}`}\n    >\n      <div \n        className=\"flex items-center justify-between cursor-pointer\"\n        onClick={onToggle}\n      >\n        <div className=\"flex items-center gap-3\">\n          <div className={cn(\"p-2 rounded-full bg-muted/50\", statusConfig.color)}>\n            <StatusIcon className={cn(\"h-4 w-4\", execution.status.includes(\"progress\") && \"animate-spin\")} />\n          </div>\n          <div>\n            <div className=\"flex items-center gap-2\">\n              {execution.sourceChain && execution.targetChain && (\n                <>\n                  <Badge variant=\"outline\" className=\"text-xs\">\n                    {CHAIN_ICONS[execution.sourceChain] || execution.sourceChain}\n                  </Badge>\n                  <ArrowRight className=\"h-3 w-3 text-muted-foreground\" />\n                  <Badge variant=\"outline\" className=\"text-xs\">\n                    {CHAIN_ICONS[execution.targetChain] || execution.targetChain}\n                  </Badge>\n                </>\n              )}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              {new Date(execution.createdAt).toLocaleString()}\n            </p>\n          </div>\n        </div>\n        \n        <div className=\"flex items-center gap-2\">\n          {execution.inputAmount && (\n            <span className=\"text-sm font-medium\">{execution.inputAmount}</span>\n          )}\n          <Badge \n            variant={execution.status === \"completed\" ? \"default\" : \"secondary\"}\n            className={cn(\n              \"text-xs\",\n              execution.status === \"completed\" && \"bg-green-500/20 text-green-400 border-green-500/30\",\n              execution.status === \"failed\" && \"bg-destructive/20 text-destructive border-destructive/30\"\n            )}\n          >\n            {statusConfig.label}\n          </Badge>\n          {isExpanded ? (\n            <ChevronUp className=\"h-4 w-4 text-muted-foreground\" />\n          ) : (\n            <ChevronDown className=\"h-4 w-4 text-muted-foreground\" />\n          )}\n        </div>\n      </div>\n      \n      {isExpanded && (\n        <div className=\"mt-4 pt-4 border-t border-border/30 space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4 text-sm\">\n            <div>\n              <p className=\"text-muted-foreground\">Execution ID</p>\n              <p className=\"font-mono text-xs\">{execution.id.slice(0, 16)}...</p>\n            </div>\n            {execution.protocol && (\n              <div>\n                <p className=\"text-muted-foreground\">Protocol</p>\n                <p className=\"font-medium\">{execution.protocol}</p>\n              </div>\n            )}\n          </div>\n          \n          <div className=\"space-y-2\">\n            <p className=\"text-sm text-muted-foreground\">Steps Progress</p>\n            <div className=\"flex gap-1\">\n              {execution.steps.map((step) => (\n                <div \n                  key={step.step}\n                  className={cn(\n                    \"flex-1 h-2 rounded-full\",\n                    step.status === \"completed\" && \"bg-green-500\",\n                    step.status === \"in_progress\" && \"bg-primary animate-pulse\",\n                    step.status === \"failed\" && \"bg-destructive\",\n                    step.status === \"pending\" && \"bg-muted\"\n                  )}\n                  title={`Step ${step.step}: ${step.message}`}\n                />\n              ))}\n            </div>\n          </div>\n          \n          {(execution.sourceTransaction || execution.targetTransaction) && (\n            <div className=\"flex flex-wrap gap-2\">\n              {execution.sourceTransaction && (\n                <a \n                  href={execution.sourceTransaction.explorerUrl} \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"inline-flex items-center gap-1 text-xs text-primary hover:underline\"\n                  data-testid={`link-source-tx-${execution.id}`}\n                >\n                  Source TX <ExternalLink className=\"h-3 w-3\" />\n                </a>\n              )}\n              {execution.targetTransaction && (\n                <a \n                  href={execution.targetTransaction.explorerUrl} \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"inline-flex items-center gap-1 text-xs text-primary hover:underline\"\n                  data-testid={`link-target-tx-${execution.id}`}\n                >\n                  Target TX <ExternalLink className=\"h-3 w-3\" />\n                </a>\n              )}\n            </div>\n          )}\n          \n          {execution.error && (\n            <div className=\"p-2 rounded bg-destructive/10 text-sm text-destructive\">\n              {execution.error}\n            </div>\n          )}\n          \n          {onSelect && (\n            <Button \n              variant=\"outline\" \n              size=\"sm\" \n              onClick={onSelect}\n              className=\"w-full\"\n              data-testid={`button-view-details-${execution.id}`}\n            >\n              View Full Details\n            </Button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport function TransactionHistory({ \n  walletAddress, \n  onSelectExecution,\n  limit = 10 \n}: TransactionHistoryProps) {\n  const [expandedId, setExpandedId] = useState<string | null>(null);\n  \n  const { data, isLoading } = useBridgeHistory(walletAddress, limit);\n\n  const executions = (data?.executions || []) as (BridgeExecution & { \n    sourceChain?: string; \n    targetChain?: string;\n    inputAmount?: string;\n    outputAmount?: string;\n    protocol?: string;\n  })[];\n\n  if (!walletAddress) {\n    return (\n      <Card className=\"bg-card/50 backdrop-blur-sm border-border/50\">\n        <CardContent className=\"p-6 text-center\">\n          <History className=\"h-8 w-8 mx-auto mb-3 text-muted-foreground\" />\n          <p className=\"text-muted-foreground\">Connect your wallet to view transaction history</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (isLoading) {\n    return (\n      <Card className=\"bg-card/50 backdrop-blur-sm border-border/50\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-center gap-3\">\n            <Loader2 className=\"h-5 w-5 animate-spin text-primary\" />\n            <span className=\"text-muted-foreground\">Loading transaction history...</span>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className=\"bg-card/50 backdrop-blur-sm border-border/50\" data-testid=\"card-transaction-history\">\n      <CardHeader className=\"flex flex-row items-center justify-between gap-4 pb-4\">\n        <div className=\"flex items-center gap-2\">\n          <History className=\"h-5 w-5 text-primary\" />\n          <CardTitle className=\"text-lg font-medium\">Transaction History</CardTitle>\n        </div>\n        {executions.length > 0 && (\n          <Badge variant=\"secondary\" className=\"text-xs\">\n            {executions.length} transaction{executions.length !== 1 ? \"s\" : \"\"}\n          </Badge>\n        )}\n      </CardHeader>\n      <CardContent>\n        {executions.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <Shield className=\"h-12 w-12 mx-auto mb-3 text-muted-foreground/50\" />\n            <p className=\"text-muted-foreground\">No bridge transactions yet</p>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Your bridge history will appear here\n            </p>\n          </div>\n        ) : (\n          <ScrollArea className=\"max-h-[400px]\">\n            <div className=\"space-y-3 pr-4\">\n              {executions.map((execution) => (\n                <TransactionItem \n                  key={execution.id}\n                  execution={execution}\n                  isExpanded={expandedId === execution.id}\n                  onToggle={() => setExpandedId(expandedId === execution.id ? null : execution.id)}\n                  onSelect={onSelectExecution ? () => onSelectExecution(execution.id) : undefined}\n                />\n              ))}\n            </div>\n          </ScrollArea>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":10213,"size_tokens":null},"server/bridge-service.ts":{"content":"import { randomUUID } from \"crypto\";\nimport { storage, type BridgeExecutionRecord } from \"./storage\";\n\nexport interface BridgeQuote {\n  id: string;\n  protocol: BridgeProtocol;\n  sourceChain: Chain;\n  targetChain: Chain;\n  sourceToken: string;\n  targetToken: string;\n  inputAmount: string;\n  outputAmount: string;\n  fees: {\n    bridgeFee: string;\n    gasFee: string;\n    protocolFee: string;\n    totalFee: string;\n    totalFeeUsd: string;\n  };\n  estimatedTime: number;\n  slippageTolerance: number;\n  route: BridgeRoute[];\n  isShielded: boolean;\n  expiresAt: string;\n  securityLevel: \"standard\" | \"enhanced\" | \"maximum\";\n}\n\nexport interface BridgeRoute {\n  step: number;\n  protocol: string;\n  action: \"lock\" | \"mint\" | \"burn\" | \"unlock\" | \"swap\" | \"verify\";\n  chain: Chain;\n  description: string;\n  estimatedDuration: number;\n}\n\nexport interface BridgeExecution {\n  id: string;\n  quoteId: string;\n  status: BridgeExecutionStatus;\n  steps: ExecutionStep[];\n  sourceTransaction?: TransactionInfo;\n  targetTransaction?: TransactionInfo;\n  createdAt: string;\n  updatedAt: string;\n  error?: string;\n}\n\nexport interface ExecutionStep {\n  step: number;\n  status: \"pending\" | \"in_progress\" | \"completed\" | \"failed\";\n  transactionHash?: string;\n  blockNumber?: number;\n  timestamp?: string;\n  message: string;\n}\n\nexport interface TransactionInfo {\n  hash: string;\n  blockNumber: number;\n  confirmations: number;\n  explorerUrl: string;\n}\n\ntype Chain = \"zcash\" | \"ethereum\" | \"near\" | \"polygon\" | \"binance\" | \"avalanche\" | \"starknet\" | \"mina\";\ntype BridgeProtocol = \"wormhole\" | \"near_intents\" | \"polygon_bridge\" | \"multichain\" | \"avalanche_bridge\" | \"starknet_bridge\" | \"mina_bridge\";\ntype BridgeExecutionStatus = \"pending\" | \"source_confirmed\" | \"bridging\" | \"target_pending\" | \"completed\" | \"failed\";\n\ninterface ProtocolConfig {\n  name: string;\n  displayName: string;\n  supportedSourceChains: Chain[];\n  supportedTargetChains: Chain[];\n  avgBridgeTime: number;\n  baseFeePercent: number;\n  securityLevel: \"standard\" | \"enhanced\" | \"maximum\";\n  supportsShielded: boolean;\n}\n\nconst PROTOCOL_CONFIGS: Record<BridgeProtocol, ProtocolConfig> = {\n  wormhole: {\n    name: \"wormhole\",\n    displayName: \"Wormhole\",\n    supportedSourceChains: [\"zcash\", \"ethereum\"],\n    supportedTargetChains: [\"ethereum\", \"polygon\", \"binance\", \"avalanche\"],\n    avgBridgeTime: 900,\n    baseFeePercent: 0.1,\n    securityLevel: \"maximum\",\n    supportsShielded: true,\n  },\n  near_intents: {\n    name: \"near_intents\",\n    displayName: \"NEAR Intents\",\n    supportedSourceChains: [\"zcash\", \"near\", \"ethereum\"],\n    supportedTargetChains: [\"near\", \"ethereum\"],\n    avgBridgeTime: 180,\n    baseFeePercent: 0.05,\n    securityLevel: \"enhanced\",\n    supportsShielded: true,\n  },\n  polygon_bridge: {\n    name: \"polygon_bridge\",\n    displayName: \"Polygon Bridge\",\n    supportedSourceChains: [\"zcash\", \"ethereum\", \"polygon\"],\n    supportedTargetChains: [\"polygon\", \"ethereum\"],\n    avgBridgeTime: 600,\n    baseFeePercent: 0.08,\n    securityLevel: \"standard\",\n    supportsShielded: false,\n  },\n  multichain: {\n    name: \"multichain\",\n    displayName: \"Multichain\",\n    supportedSourceChains: [\"zcash\", \"binance\", \"ethereum\", \"polygon\", \"avalanche\"],\n    supportedTargetChains: [\"binance\", \"ethereum\", \"polygon\", \"avalanche\"],\n    avgBridgeTime: 720,\n    baseFeePercent: 0.15,\n    securityLevel: \"standard\",\n    supportsShielded: false,\n  },\n  avalanche_bridge: {\n    name: \"avalanche_bridge\",\n    displayName: \"Avalanche Bridge\",\n    supportedSourceChains: [\"zcash\", \"ethereum\", \"avalanche\"],\n    supportedTargetChains: [\"avalanche\", \"ethereum\"],\n    avgBridgeTime: 480,\n    baseFeePercent: 0.1,\n    securityLevel: \"enhanced\",\n    supportsShielded: false,\n  },\n  starknet_bridge: {\n    name: \"starknet_bridge\",\n    displayName: \"Starknet Bridge\",\n    supportedSourceChains: [\"zcash\", \"ethereum\", \"starknet\"],\n    supportedTargetChains: [\"starknet\", \"ethereum\"],\n    avgBridgeTime: 360,\n    baseFeePercent: 0.08,\n    securityLevel: \"maximum\",\n    supportsShielded: true,\n  },\n  mina_bridge: {\n    name: \"mina_bridge\",\n    displayName: \"Mina Bridge\",\n    supportedSourceChains: [\"zcash\", \"ethereum\", \"mina\"],\n    supportedTargetChains: [\"mina\", \"ethereum\"],\n    avgBridgeTime: 420,\n    baseFeePercent: 0.07,\n    securityLevel: \"maximum\",\n    supportsShielded: true,\n  },\n};\n\nconst CHAIN_GAS_PRICES: Record<Chain, number> = {\n  zcash: 0.0001,\n  ethereum: 0.005,\n  near: 0.001,\n  polygon: 0.0005,\n  binance: 0.001,\n  avalanche: 0.002,\n  starknet: 0.0003,\n  mina: 0.0004,\n};\n\nconst TOKEN_PRICES_USD: Record<string, number> = {\n  ZEC: 35.0,\n  ETH: 3500.0,\n  NEAR: 5.5,\n  MATIC: 0.85,\n  BNB: 580.0,\n  AVAX: 35.0,\n  STRK: 0.45,\n  MINA: 0.65,\n  wZEC: 35.0,\n  USDC: 1.0,\n};\n\nexport class BridgeService {\n  private activeExecutions: Map<string, BridgeExecution> = new Map();\n\n  selectBestProtocol(sourceChain: Chain, targetChain: Chain, isShielded: boolean): BridgeProtocol | null {\n    const candidates: { protocol: BridgeProtocol; score: number }[] = [];\n\n    for (const [protocol, config] of Object.entries(PROTOCOL_CONFIGS)) {\n      if (!config.supportedSourceChains.includes(sourceChain)) continue;\n      if (!config.supportedTargetChains.includes(targetChain)) continue;\n      if (isShielded && !config.supportsShielded) continue;\n\n      let score = 100;\n\n      score -= config.baseFeePercent * 100;\n      score -= config.avgBridgeTime / 60;\n\n      if (config.securityLevel === \"maximum\") score += 20;\n      else if (config.securityLevel === \"enhanced\") score += 10;\n\n      if (isShielded && config.supportsShielded) score += 15;\n\n      candidates.push({ protocol: protocol as BridgeProtocol, score });\n    }\n\n    if (candidates.length === 0) {\n      return null;\n    }\n\n    candidates.sort((a, b) => b.score - a.score);\n    return candidates[0].protocol;\n  }\n\n  isChainPairSupported(sourceChain: Chain, targetChain: Chain): boolean {\n    for (const config of Object.values(PROTOCOL_CONFIGS)) {\n      if (config.supportedSourceChains.includes(sourceChain) && \n          config.supportedTargetChains.includes(targetChain)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  getSupportedPairsForChain(chain: Chain): { sources: Chain[]; targets: Chain[] } {\n    const sources: Set<Chain> = new Set();\n    const targets: Set<Chain> = new Set();\n    \n    for (const config of Object.values(PROTOCOL_CONFIGS)) {\n      if (config.supportedTargetChains.includes(chain)) {\n        config.supportedSourceChains.forEach(c => sources.add(c));\n      }\n      if (config.supportedSourceChains.includes(chain)) {\n        config.supportedTargetChains.forEach(c => targets.add(c));\n      }\n    }\n    \n    return { sources: Array.from(sources), targets: Array.from(targets) };\n  }\n\n  async getQuote(params: {\n    sourceChain: Chain;\n    targetChain: Chain;\n    amount: string;\n    isShielded?: boolean;\n    preferredProtocol?: BridgeProtocol;\n    slippageTolerance?: number;\n  }): Promise<BridgeQuote> {\n    const {\n      sourceChain,\n      targetChain,\n      amount,\n      isShielded = true,\n      preferredProtocol,\n      slippageTolerance = 0.5,\n    } = params;\n\n    if (!this.isChainPairSupported(sourceChain, targetChain)) {\n      const supportedTargets = this.getSupportedPairsForChain(sourceChain);\n      throw new Error(\n        `Bridging from ${sourceChain} to ${targetChain} is not currently supported. ` +\n        `Supported targets from ${sourceChain}: ${supportedTargets.targets.join(\", \") || \"none\"}`\n      );\n    }\n\n    if (preferredProtocol) {\n      const preferredConfig = PROTOCOL_CONFIGS[preferredProtocol];\n      if (!preferredConfig.supportedSourceChains.includes(sourceChain)) {\n        throw new Error(\n          `Protocol ${preferredConfig.displayName} does not support ${sourceChain} as source chain. ` +\n          `Supported sources: ${preferredConfig.supportedSourceChains.join(\", \")}`\n        );\n      }\n      if (!preferredConfig.supportedTargetChains.includes(targetChain)) {\n        throw new Error(\n          `Protocol ${preferredConfig.displayName} does not support ${targetChain} as target chain. ` +\n          `Supported targets: ${preferredConfig.supportedTargetChains.join(\", \")}`\n        );\n      }\n      if (isShielded && !preferredConfig.supportsShielded) {\n        throw new Error(\n          `Protocol ${preferredConfig.displayName} does not support shielded transactions. ` +\n          `Please disable shielded mode or choose a different protocol.`\n        );\n      }\n    }\n\n    const protocol = preferredProtocol || this.selectBestProtocol(sourceChain, targetChain, isShielded);\n    if (!protocol) {\n      throw new Error(\n        `No compatible bridge protocol found for ${sourceChain} to ${targetChain}` +\n        (isShielded ? \" with shielded transactions\" : \"\")\n      );\n    }\n    const config = PROTOCOL_CONFIGS[protocol];\n\n    const inputAmount = parseFloat(amount);\n\n    const bridgeFee = inputAmount * (config.baseFeePercent / 100);\n    const sourceGasFee = CHAIN_GAS_PRICES[sourceChain];\n    const targetGasFee = CHAIN_GAS_PRICES[targetChain];\n    const protocolFee = inputAmount * 0.001;\n\n    const totalFee = bridgeFee + sourceGasFee + targetGasFee + protocolFee;\n    const outputAmount = inputAmount - bridgeFee - protocolFee;\n\n    const totalFeeUsd = totalFee * TOKEN_PRICES_USD.ZEC;\n\n    const route = this.generateRoute(sourceChain, targetChain, protocol, isShielded);\n\n    const quote: BridgeQuote = {\n      id: randomUUID(),\n      protocol,\n      sourceChain,\n      targetChain,\n      sourceToken: \"ZEC\",\n      targetToken: `wZEC`,\n      inputAmount: amount,\n      outputAmount: outputAmount.toFixed(8),\n      fees: {\n        bridgeFee: bridgeFee.toFixed(8) + \" ZEC\",\n        gasFee: (sourceGasFee + targetGasFee).toFixed(8) + \" ZEC\",\n        protocolFee: protocolFee.toFixed(8) + \" ZEC\",\n        totalFee: totalFee.toFixed(8) + \" ZEC\",\n        totalFeeUsd: `$${totalFeeUsd.toFixed(2)}`,\n      },\n      estimatedTime: config.avgBridgeTime,\n      slippageTolerance,\n      route,\n      isShielded,\n      expiresAt: new Date(Date.now() + 300000).toISOString(),\n      securityLevel: config.securityLevel,\n    };\n\n    return quote;\n  }\n\n  async getMultipleQuotes(params: {\n    sourceChain: Chain;\n    targetChain: Chain;\n    amount: string;\n    isShielded?: boolean;\n  }): Promise<BridgeQuote[]> {\n    const { sourceChain, targetChain, amount, isShielded = true } = params;\n    const quotes: BridgeQuote[] = [];\n\n    for (const protocol of Object.keys(PROTOCOL_CONFIGS) as BridgeProtocol[]) {\n      const config = PROTOCOL_CONFIGS[protocol];\n\n      if (!config.supportedSourceChains.includes(sourceChain)) continue;\n      if (!config.supportedTargetChains.includes(targetChain)) continue;\n      if (isShielded && !config.supportsShielded) continue;\n\n      try {\n        const quote = await this.getQuote({\n          sourceChain,\n          targetChain,\n          amount,\n          isShielded,\n          preferredProtocol: protocol,\n        });\n        quotes.push(quote);\n      } catch (error) {\n        console.error(`Failed to get quote from ${protocol}:`, error);\n      }\n    }\n\n    quotes.sort((a, b) => parseFloat(a.fees.totalFee) - parseFloat(b.fees.totalFee));\n    return quotes;\n  }\n\n  private generateRoute(\n    sourceChain: Chain,\n    targetChain: Chain,\n    protocol: BridgeProtocol,\n    isShielded: boolean\n  ): BridgeRoute[] {\n    const config = PROTOCOL_CONFIGS[protocol];\n    const route: BridgeRoute[] = [];\n    let stepNum = 1;\n\n    if (isShielded && sourceChain === \"zcash\") {\n      route.push({\n        step: stepNum++,\n        protocol: \"Zcash\",\n        action: \"verify\",\n        chain: sourceChain,\n        description: \"Prepare shielded transaction with Sapling proof\",\n        estimatedDuration: 30,\n      });\n    }\n\n    route.push({\n      step: stepNum++,\n      protocol: config.displayName,\n      action: \"lock\",\n      chain: sourceChain,\n      description: `Lock ZEC in ${config.displayName} bridge contract`,\n      estimatedDuration: 60,\n    });\n\n    if (protocol === \"wormhole\") {\n      route.push({\n        step: stepNum++,\n        protocol: \"Wormhole Guardians\",\n        action: \"verify\",\n        chain: sourceChain,\n        description: \"Guardian network validates and signs VAA\",\n        estimatedDuration: config.avgBridgeTime * 0.6,\n      });\n    } else if (protocol === \"near_intents\") {\n      route.push({\n        step: stepNum++,\n        protocol: \"NEAR Intents\",\n        action: \"verify\",\n        chain: \"near\",\n        description: \"Intent solver network processes cross-chain intent\",\n        estimatedDuration: config.avgBridgeTime * 0.5,\n      });\n    }\n\n    route.push({\n      step: stepNum++,\n      protocol: config.displayName,\n      action: \"mint\",\n      chain: targetChain,\n      description: `Mint wZEC on ${this.formatChainName(targetChain)}`,\n      estimatedDuration: config.avgBridgeTime * 0.3,\n    });\n\n    return route;\n  }\n\n  async executeQuote(quote: BridgeQuote, signerAddress: string): Promise<BridgeExecution> {\n    if (new Date(quote.expiresAt) < new Date()) {\n      throw new Error(\"Quote has expired. Please request a new quote.\");\n    }\n\n    const execution: BridgeExecution = {\n      id: randomUUID(),\n      quoteId: quote.id,\n      status: \"pending\",\n      steps: quote.route.map((r) => ({\n        step: r.step,\n        status: \"pending\",\n        message: r.description,\n      })),\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    };\n\n    this.activeExecutions.set(execution.id, execution);\n\n    const executionRecord: BridgeExecutionRecord = {\n      ...execution,\n      walletAddress: signerAddress,\n      sourceChain: quote.sourceChain,\n      targetChain: quote.targetChain,\n      inputAmount: quote.inputAmount,\n      outputAmount: quote.outputAmount,\n      protocol: quote.protocol,\n    };\n    await storage.saveBridgeExecution(executionRecord);\n\n    this.simulateExecution(execution, quote, signerAddress);\n\n    return execution;\n  }\n\n  private async simulateExecution(\n    execution: BridgeExecution,\n    quote: BridgeQuote,\n    _signerAddress: string\n  ): Promise<void> {\n    for (let i = 0; i < execution.steps.length; i++) {\n      await this.delay(2000);\n\n      execution.steps[i].status = \"in_progress\";\n      execution.updatedAt = new Date().toISOString();\n      \n      await storage.updateBridgeExecution(execution.id, {\n        steps: execution.steps,\n        status: execution.status,\n      });\n\n      await this.delay(quote.route[i].estimatedDuration * 10);\n\n      const success = Math.random() > 0.05;\n\n      if (success) {\n        execution.steps[i].status = \"completed\";\n        execution.steps[i].transactionHash = `0x${this.generateRandomHex(64)}`;\n        execution.steps[i].blockNumber = Math.floor(Math.random() * 1000000) + 18000000;\n        execution.steps[i].timestamp = new Date().toISOString();\n\n        const txHash = execution.steps[i].transactionHash!;\n        const blockNum = execution.steps[i].blockNumber!;\n\n        if (i === 0) {\n          execution.sourceTransaction = {\n            hash: txHash,\n            blockNumber: blockNum,\n            confirmations: 1,\n            explorerUrl: this.getExplorerUrl(quote.sourceChain, txHash),\n          };\n          execution.status = \"source_confirmed\";\n        } else if (i === execution.steps.length - 2) {\n          execution.status = \"bridging\";\n        } else if (i === execution.steps.length - 1) {\n          execution.targetTransaction = {\n            hash: `0x${this.generateRandomHex(64)}`,\n            blockNumber: Math.floor(Math.random() * 1000000) + 18000000,\n            confirmations: 1,\n            explorerUrl: this.getExplorerUrl(quote.targetChain, txHash),\n          };\n          execution.status = \"completed\";\n        }\n      } else {\n        execution.steps[i].status = \"failed\";\n        execution.status = \"failed\";\n        execution.error = \"Transaction failed. Please try again.\";\n        \n        await storage.updateBridgeExecution(execution.id, {\n          steps: execution.steps,\n          status: execution.status,\n          error: execution.error,\n          sourceTransaction: execution.sourceTransaction,\n          targetTransaction: execution.targetTransaction,\n        });\n        break;\n      }\n\n      execution.updatedAt = new Date().toISOString();\n      \n      await storage.updateBridgeExecution(execution.id, {\n        steps: execution.steps,\n        status: execution.status,\n        sourceTransaction: execution.sourceTransaction,\n        targetTransaction: execution.targetTransaction,\n      });\n    }\n  }\n\n  getExecutionStatus(executionId: string): BridgeExecution | null {\n    return this.activeExecutions.get(executionId) || null;\n  }\n\n  getSupportedProtocols(): { protocol: BridgeProtocol; config: ProtocolConfig }[] {\n    return Object.entries(PROTOCOL_CONFIGS).map(([protocol, config]) => ({\n      protocol: protocol as BridgeProtocol,\n      config,\n    }));\n  }\n\n  getSupportedChains(): Chain[] {\n    return [\"zcash\", \"ethereum\", \"near\", \"polygon\", \"binance\", \"avalanche\", \"starknet\", \"mina\"];\n  }\n\n  private formatChainName(chain: Chain): string {\n    const names: Record<Chain, string> = {\n      zcash: \"Zcash\",\n      ethereum: \"Ethereum\",\n      near: \"NEAR\",\n      polygon: \"Polygon\",\n      binance: \"BNB Chain\",\n      avalanche: \"Avalanche\",\n      starknet: \"Starknet\",\n      mina: \"Mina\",\n    };\n    return names[chain];\n  }\n\n  private getExplorerUrl(chain: Chain, txHash: string): string {\n    const explorers: Record<Chain, string> = {\n      zcash: \"https://explorer.zcha.in/transactions/\",\n      ethereum: \"https://etherscan.io/tx/\",\n      near: \"https://nearblocks.io/txns/\",\n      polygon: \"https://polygonscan.com/tx/\",\n      binance: \"https://bscscan.com/tx/\",\n      avalanche: \"https://snowtrace.io/tx/\",\n      starknet: \"https://starkscan.co/tx/\",\n      mina: \"https://minaexplorer.com/transaction/\",\n    };\n    return explorers[chain] + txHash;\n  }\n\n  private generateRandomHex(length: number): string {\n    const chars = \"0123456789abcdef\";\n    let result = \"\";\n    for (let i = 0; i < length; i++) {\n      result += chars[Math.floor(Math.random() * chars.length)];\n    }\n    return result;\n  }\n\n  private delay(ms: number): Promise<void> {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n}\n\nexport const bridgeService = new BridgeService();\n","path":null,"size_bytes":18299,"size_tokens":null},"client/src/components/bridge-quote-card.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  Shield, \n  Clock, \n  ArrowRight, \n  Zap, \n  CheckCircle2,\n  ExternalLink,\n  Loader2\n} from \"lucide-react\";\nimport { type BridgeQuote, formatTime, getSecurityBadgeColor } from \"@/hooks/use-bridge\";\n\ninterface BridgeQuoteCardProps {\n  quote: BridgeQuote;\n  isSelected?: boolean;\n  isExecuting?: boolean;\n  onSelect?: (quote: BridgeQuote) => void;\n  onExecute?: (quote: BridgeQuote) => void;\n}\n\nconst chainIcons: Record<string, string> = {\n  zcash: \"ZEC\",\n  ethereum: \"ETH\",\n  near: \"NEAR\",\n  polygon: \"MATIC\",\n  binance: \"BNB\",\n  avalanche: \"AVAX\",\n};\n\nexport function BridgeQuoteCard({\n  quote,\n  isSelected,\n  isExecuting,\n  onSelect,\n  onExecute,\n}: BridgeQuoteCardProps) {\n  const expiresIn = Math.max(0, Math.floor((new Date(quote.expiresAt).getTime() - Date.now()) / 1000));\n  const isExpired = expiresIn <= 0;\n\n  return (\n    <Card\n      className={`transition-all ${\n        isSelected \n          ? \"ring-2 ring-primary border-primary\" \n          : \"hover-elevate cursor-pointer\"\n      } ${isExpired ? \"opacity-50\" : \"\"}`}\n      onClick={() => onSelect?.(quote)}\n      data-testid={`bridge-quote-${quote.id}`}\n    >\n      <CardHeader className=\"flex flex-row items-center justify-between gap-2 pb-2\">\n        <div className=\"flex items-center gap-2\">\n          <CardTitle className=\"text-base\">{quote.protocol}</CardTitle>\n          <Badge variant=\"outline\" className={getSecurityBadgeColor(quote.securityLevel)}>\n            <Shield className=\"w-3 h-3 mr-1\" />\n            {quote.securityLevel}\n          </Badge>\n        </div>\n        {quote.isShielded && (\n          <Badge variant=\"secondary\" className=\"bg-primary/20 text-primary\">\n            <Zap className=\"w-3 h-3 mr-1\" />\n            Shielded\n          </Badge>\n        )}\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-lg font-mono\">{quote.inputAmount}</span>\n            <Badge variant=\"outline\">{chainIcons[quote.sourceChain]}</Badge>\n          </div>\n          <ArrowRight className=\"w-4 h-4 text-muted-foreground\" />\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-lg font-mono text-primary\">{quote.outputAmount}</span>\n            <Badge variant=\"outline\">{quote.targetToken}</Badge>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-4 text-sm\">\n          <div className=\"space-y-1\">\n            <p className=\"text-muted-foreground\">Total Fees</p>\n            <p className=\"font-mono\">{quote.fees.totalFee}</p>\n            <p className=\"text-xs text-muted-foreground\">{quote.fees.totalFeeUsd}</p>\n          </div>\n          <div className=\"space-y-1\">\n            <p className=\"text-muted-foreground\">Estimated Time</p>\n            <p className=\"flex items-center gap-1\">\n              <Clock className=\"w-3 h-3\" />\n              {formatTime(quote.estimatedTime)}\n            </p>\n          </div>\n        </div>\n\n        <div className=\"space-y-2\">\n          <p className=\"text-xs text-muted-foreground\">Route ({quote.route.length} steps)</p>\n          <div className=\"flex items-center gap-1 flex-wrap\">\n            {quote.route.map((step, idx) => (\n              <div key={step.step} className=\"flex items-center gap-1\">\n                <Badge variant=\"outline\" className=\"text-xs\">\n                  {step.action}\n                </Badge>\n                {idx < quote.route.length - 1 && (\n                  <ArrowRight className=\"w-3 h-3 text-muted-foreground\" />\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {!isExpired && (\n          <div className=\"flex items-center justify-between pt-2 border-t\">\n            <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n              <Clock className=\"w-3 h-3\" />\n              Expires in {formatTime(expiresIn)}\n            </div>\n            {onExecute && (\n              <Button\n                size=\"sm\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  onExecute(quote);\n                }}\n                disabled={isExecuting}\n                data-testid=\"button-execute-bridge\"\n              >\n                {isExecuting ? (\n                  <>\n                    <Loader2 className=\"w-3 h-3 mr-1 animate-spin\" />\n                    Executing...\n                  </>\n                ) : (\n                  <>\n                    <CheckCircle2 className=\"w-3 h-3 mr-1\" />\n                    Execute\n                  </>\n                )}\n              </Button>\n            )}\n          </div>\n        )}\n\n        {isExpired && (\n          <div className=\"text-center text-sm text-destructive pt-2 border-t\">\n            Quote expired - please request a new one\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\ninterface BridgeExecutionCardProps {\n  execution: {\n    id: string;\n    status: string;\n    steps: {\n      step: number;\n      status: string;\n      transactionHash?: string;\n      message: string;\n    }[];\n    sourceTransaction?: {\n      hash: string;\n      explorerUrl: string;\n    };\n    targetTransaction?: {\n      hash: string;\n      explorerUrl: string;\n    };\n    error?: string;\n  };\n}\n\nexport function BridgeExecutionCard({ execution }: BridgeExecutionCardProps) {\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"completed\":\n        return \"text-green-400\";\n      case \"in_progress\":\n        return \"text-yellow-400\";\n      case \"failed\":\n        return \"text-destructive\";\n      default:\n        return \"text-muted-foreground\";\n    }\n  };\n\n  return (\n    <Card data-testid={`bridge-execution-${execution.id}`}>\n      <CardHeader className=\"flex flex-row items-center justify-between gap-2 pb-2\">\n        <CardTitle className=\"text-base\">Bridge Progress</CardTitle>\n        <Badge \n          variant={execution.status === \"completed\" ? \"default\" : \"secondary\"}\n          className={execution.status === \"completed\" ? \"bg-green-500/20 text-green-400\" : \"\"}\n        >\n          {execution.status.replace(/_/g, \" \")}\n        </Badge>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div className=\"space-y-3\">\n          {execution.steps.map((step) => (\n            <div key={step.step} className=\"flex items-start gap-3\">\n              <div className={`mt-0.5 ${getStatusColor(step.status)}`}>\n                {step.status === \"completed\" ? (\n                  <CheckCircle2 className=\"w-4 h-4\" />\n                ) : step.status === \"in_progress\" ? (\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\n                ) : (\n                  <div className=\"w-4 h-4 rounded-full border-2 border-current\" />\n                )}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm\">{step.message}</p>\n                {step.transactionHash && (\n                  <p className=\"text-xs font-mono text-muted-foreground truncate\">\n                    {step.transactionHash.slice(0, 10)}...{step.transactionHash.slice(-8)}\n                  </p>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {execution.error && (\n          <div className=\"p-3 bg-destructive/10 rounded-md text-sm text-destructive\">\n            {execution.error}\n          </div>\n        )}\n\n        {(execution.sourceTransaction || execution.targetTransaction) && (\n          <div className=\"flex flex-wrap gap-2 pt-2 border-t\">\n            {execution.sourceTransaction && (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                asChild\n                data-testid=\"link-source-explorer\"\n              >\n                <a \n                  href={execution.sourceTransaction.explorerUrl} \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                >\n                  <ExternalLink className=\"w-3 h-3 mr-1\" />\n                  Source Tx\n                </a>\n              </Button>\n            )}\n            {execution.targetTransaction && (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                asChild\n                data-testid=\"link-target-explorer\"\n              >\n                <a \n                  href={execution.targetTransaction.explorerUrl} \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                >\n                  <ExternalLink className=\"w-3 h-3 mr-1\" />\n                  Target Tx\n                </a>\n              </Button>\n            )}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":8937,"size_tokens":null},"client/src/components/bridge/bridge-execution-modal.tsx":{"content":"import { useState, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogPortal,\n  DialogOverlay,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { \n  Shield, \n  ArrowRight, \n  Clock, \n  Wallet,\n  Loader2,\n  CheckCircle2,\n  AlertCircle,\n  Lock,\n} from \"lucide-react\";\nimport { useWallet, type TransactionAction } from \"@/lib/wallet-context\";\nimport { useExecuteBridge, type BridgeQuote, type BridgeExecution } from \"@/hooks/use-bridge\";\nimport { BridgeExecutionTracker } from \"./bridge-execution-tracker\";\nimport { formatTime } from \"@/hooks/use-bridge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { cn } from \"@/lib/utils\";\n\ninterface BridgeExecutionModalProps {\n  quote: BridgeQuote | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: (execution: BridgeExecution) => void;\n}\n\nconst CHAIN_COLORS: Record<string, string> = {\n  zcash: \"text-amber-400\",\n  ethereum: \"text-blue-400\",\n  near: \"text-cyan-400\",\n  polygon: \"text-purple-400\",\n  binance: \"text-yellow-400\",\n  avalanche: \"text-red-400\",\n};\n\nconst BRIDGE_CONTRACT_ID = \"ghostbridge.testnet\";\n\nexport function BridgeExecutionModal({ \n  quote, \n  isOpen, \n  onClose, \n  onSuccess \n}: BridgeExecutionModalProps) {\n  const { wallet, signTransaction, signMessage, isConnecting } = useWallet();\n  const executeBridge = useExecuteBridge();\n  const { toast } = useToast();\n  \n  const [step, setStep] = useState<\"confirm\" | \"signing\" | \"executing\" | \"tracking\">(\"confirm\");\n  const [executionId, setExecutionId] = useState<string | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  const resetState = useCallback(() => {\n    setStep(\"confirm\");\n    setExecutionId(null);\n    setError(null);\n  }, []);\n\n  const handleClose = useCallback(() => {\n    if (step === \"signing\" || step === \"executing\") {\n      return;\n    }\n    resetState();\n    onClose();\n  }, [step, resetState, onClose]);\n\n  const handleExecute = useCallback(async () => {\n    if (!quote || !wallet.accountId) {\n      setError(\"Wallet not connected\");\n      return;\n    }\n\n    setError(null);\n    setStep(\"signing\");\n\n    try {\n      const signResult = await signMessage(\n        `GhostBridge Authorization\\n\\nBridge ${quote.inputAmount} ${quote.sourceToken} from ${quote.sourceChain} to ${quote.targetChain}\\n\\nQuote ID: ${quote.id}\\nTimestamp: ${new Date().toISOString()}`\n      );\n\n      if (!signResult && quote.sourceChain === \"near\") {\n        toast({\n          title: \"Signature Required\",\n          description: \"Please approve the message signature in your wallet to proceed.\",\n          variant: \"destructive\",\n        });\n        setStep(\"confirm\");\n        return;\n      }\n\n      setStep(\"executing\");\n\n      const result = await executeBridge.mutateAsync({\n        quote,\n        signerAddress: wallet.accountId,\n      });\n\n      if (result.execution) {\n        setExecutionId(result.execution.id);\n        setStep(\"tracking\");\n        \n        toast({\n          title: \"Bridge Initiated\",\n          description: \"Your bridge transaction is now being processed.\",\n        });\n      }\n    } catch (err) {\n      console.error(\"Bridge execution error:\", err);\n      setError(err instanceof Error ? err.message : \"Failed to execute bridge\");\n      setStep(\"confirm\");\n      \n      toast({\n        title: \"Execution Failed\",\n        description: err instanceof Error ? err.message : \"Failed to execute bridge\",\n        variant: \"destructive\",\n      });\n    }\n  }, [quote, wallet.accountId, signMessage, executeBridge, toast]);\n\n  const handleExecutionComplete = useCallback((execution: BridgeExecution) => {\n    onSuccess?.(execution);\n  }, [onSuccess]);\n\n  const handleExecutionError = useCallback((errorMessage: string) => {\n    setError(errorMessage);\n  }, []);\n\n  if (!quote) return null;\n\n  const isNearSource = quote.sourceChain === \"near\";\n  const requiresWalletSign = isNearSource && wallet.isConnected;\n\n  const isProcessing = step === \"signing\" || step === \"executing\";\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && !isProcessing && handleClose()}>\n      <DialogContent \n        className=\"sm:max-w-lg\" \n        data-testid=\"modal-bridge-execution\"\n        onInteractOutside={(e) => isProcessing && e.preventDefault()}\n        onEscapeKeyDown={(e) => isProcessing && e.preventDefault()}\n      >\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Shield className=\"h-5 w-5 text-primary\" />\n            {step === \"tracking\" ? \"Bridge Progress\" : \"Confirm Bridge\"}\n          </DialogTitle>\n          <DialogDescription>\n            {step === \"tracking\" \n              ? \"Your bridge transaction is being processed\"\n              : \"Review the details and confirm your bridge transaction\"\n            }\n          </DialogDescription>\n        </DialogHeader>\n\n        {step === \"tracking\" ? (\n          <BridgeExecutionTracker \n            executionId={executionId}\n            onComplete={handleExecutionComplete}\n            onError={handleExecutionError}\n            onClose={handleClose}\n          />\n        ) : (\n          <div className=\"space-y-6 py-4\">\n            <div className=\"flex items-center justify-center gap-4\">\n              <div className=\"text-center\">\n                <p className=\"text-2xl font-bold\">{quote.inputAmount}</p>\n                <p className={cn(\"text-sm font-medium\", CHAIN_COLORS[quote.sourceChain])}>\n                  {quote.sourceToken}\n                </p>\n                <Badge variant=\"outline\" className=\"mt-1 text-xs\">\n                  {quote.sourceChain}\n                </Badge>\n              </div>\n              \n              <ArrowRight className=\"h-6 w-6 text-muted-foreground\" />\n              \n              <div className=\"text-center\">\n                <p className=\"text-2xl font-bold\">{quote.outputAmount}</p>\n                <p className={cn(\"text-sm font-medium\", CHAIN_COLORS[quote.targetChain])}>\n                  {quote.targetToken}\n                </p>\n                <Badge variant=\"outline\" className=\"mt-1 text-xs\">\n                  {quote.targetChain}\n                </Badge>\n              </div>\n            </div>\n\n            <Separator />\n\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Protocol</span>\n                <Badge variant=\"secondary\">{quote.protocol}</Badge>\n              </div>\n              \n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Total Fees</span>\n                <span className=\"font-medium\">{quote.fees.totalFee} ({quote.fees.totalFeeUsd})</span>\n              </div>\n              \n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Estimated Time</span>\n                <div className=\"flex items-center gap-1\">\n                  <Clock className=\"h-4 w-4 text-muted-foreground\" />\n                  <span className=\"font-medium\">{formatTime(quote.estimatedTime)}</span>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Slippage Tolerance</span>\n                <span className=\"font-medium\">{quote.slippageTolerance}%</span>\n              </div>\n              \n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Security Level</span>\n                <Badge \n                  variant=\"outline\" \n                  className={cn(\n                    quote.securityLevel === \"maximum\" && \"border-green-500/50 text-green-400\",\n                    quote.securityLevel === \"enhanced\" && \"border-primary/50 text-primary\",\n                  )}\n                >\n                  <Lock className=\"h-3 w-3 mr-1\" />\n                  {quote.securityLevel}\n                </Badge>\n              </div>\n              \n              {quote.isShielded && (\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span className=\"text-muted-foreground\">Privacy</span>\n                  <Badge variant=\"default\" className=\"bg-green-500/20 text-green-400 border-green-500/30\">\n                    <Shield className=\"h-3 w-3 mr-1\" />\n                    Shielded\n                  </Badge>\n                </div>\n              )}\n            </div>\n\n            {error && (\n              <div className=\"p-3 rounded-lg bg-destructive/10 border border-destructive/20\">\n                <div className=\"flex items-center gap-2\">\n                  <AlertCircle className=\"h-4 w-4 text-destructive\" />\n                  <p className=\"text-sm text-destructive\">{error}</p>\n                </div>\n              </div>\n            )}\n\n            <Separator />\n\n            <div className=\"flex flex-col gap-3\">\n              {!wallet.isConnected ? (\n                <div className=\"p-3 rounded-lg bg-muted/30 text-center\">\n                  <Wallet className=\"h-5 w-5 mx-auto mb-2 text-muted-foreground\" />\n                  <p className=\"text-sm text-muted-foreground\">\n                    Connect your wallet to execute this bridge\n                  </p>\n                </div>\n              ) : (\n                <>\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"text-muted-foreground\">Signing with</span>\n                    <Badge variant=\"outline\">\n                      <Wallet className=\"h-3 w-3 mr-1\" />\n                      {wallet.accountId}\n                    </Badge>\n                  </div>\n                  \n                  <Button \n                    onClick={handleExecute}\n                    disabled={step === \"signing\" || step === \"executing\" || executeBridge.isPending}\n                    className=\"w-full\"\n                    data-testid=\"button-confirm-bridge\"\n                  >\n                    {step === \"signing\" ? (\n                      <>\n                        <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                        Awaiting Signature...\n                      </>\n                    ) : step === \"executing\" ? (\n                      <>\n                        <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                        Executing Bridge...\n                      </>\n                    ) : (\n                      <>\n                        <CheckCircle2 className=\"h-4 w-4 mr-2\" />\n                        Confirm Bridge\n                      </>\n                    )}\n                  </Button>\n                </>\n              )}\n              \n              <Button \n                variant=\"ghost\" \n                onClick={handleClose}\n                disabled={step === \"signing\" || step === \"executing\"}\n                data-testid=\"button-cancel-bridge\"\n              >\n                Cancel\n              </Button>\n            </div>\n\n            <p className=\"text-xs text-center text-muted-foreground\">\n              By confirming, you agree to the bridge terms and understand that cryptocurrency \n              transactions are irreversible.\n            </p>\n          </div>\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":11579,"size_tokens":null}},"version":2}